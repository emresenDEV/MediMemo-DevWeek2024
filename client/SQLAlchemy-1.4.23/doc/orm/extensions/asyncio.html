<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

        <title>
            
    
    Asynchronous I/O (asyncio)
 &mdash;
    SQLAlchemy 1.4 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
        <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.4 Documentation" href="../../index.html" />
        <link rel="up" title="ORM Extensions" href="index.html" />
        <link rel="next" title="Association Proxy" href="associationproxy.html" />
        <link rel="prev" title="ORM Extensions" href="index.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.4.23</span>


        | Release Date: August 18, 2021

    </div>

    <h1><a href="../../index.html">SQLAlchemy 1.4 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../../index.html">SQLAlchemy 1.4 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../../contents.html">Contents</a> |
                <a href="../../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="../index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="../tutorial.html">Object Relational Tutorial (1.x API)</a></span></li>
<li><span class="link-container"><a class="reference external" href="../mapper_config.html">Mapper Configuration</a></span></li>
<li><span class="link-container"><a class="reference external" href="../relationships.html">Relationship Configuration</a></span></li>
<li><span class="link-container"><a class="reference external" href="../loading_objects.html">Querying Data, Loading Objects</a></span></li>
<li><span class="link-container"><a class="reference external" href="../session.html">Using the Session</a></span></li>
<li><span class="link-container"><a class="reference external" href="../extending.html">Events and Internals</a></span></li>
<li><span class="link-container"><a class="reference external" href="index.html">ORM Extensions</a></span><ul>
<li class="selected"><span class="link-container"><strong>Asynchronous I/O (asyncio)</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#asyncio-platform-installation-notes">Asyncio Platform Installation Notes</a></span></li>
<li><span class="link-container"><a class="reference external" href="#synopsis-core">Synopsis - Core</a></span></li>
<li><span class="link-container"><a class="reference external" href="#synopsis-orm">Synopsis - ORM</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#preventing-implicit-io-when-using-asyncsession">Preventing Implicit IO when Using AsyncSession</a></span></li>
<li><span class="link-container"><a class="reference external" href="#running-synchronous-methods-and-functions-under-asyncio">Running Synchronous Methods and Functions under asyncio</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#using-multiple-asyncio-event-loops">Using multiple asyncio event loops</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-asyncio-scoped-session">Using asyncio scoped session</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-the-inspector-to-inspect-schema-objects">Using the Inspector to inspect schema objects</a></span></li>
<li><span class="link-container"><a class="reference external" href="#engine-api-documentation">Engine API Documentation</a></span></li>
<li><span class="link-container"><a class="reference external" href="#result-set-api-documentation">Result Set API Documentation</a></span></li>
<li><span class="link-container"><a class="reference external" href="#orm-session-api-documentation">ORM Session API Documentation</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="associationproxy.html">Association Proxy</a></span></li>
<li><span class="link-container"><a class="reference external" href="automap.html">Automap</a></span></li>
<li><span class="link-container"><a class="reference external" href="baked.html">Baked Queries</a></span></li>
<li><span class="link-container"><a class="reference external" href="declarative/index.html">Declarative Extensions</a></span></li>
<li><span class="link-container"><a class="reference external" href="mypy.html">Mypy  / Pep-484 Support for ORM Mappings</a></span></li>
<li><span class="link-container"><a class="reference external" href="mutable.html">Mutation Tracking</a></span></li>
<li><span class="link-container"><a class="reference external" href="orderinglist.html">Ordering List</a></span></li>
<li><span class="link-container"><a class="reference external" href="horizontal_shard.html">Horizontal Sharding</a></span></li>
<li><span class="link-container"><a class="reference external" href="hybrid.html">Hybrid Attributes</a></span></li>
<li><span class="link-container"><a class="reference external" href="indexable.html">Indexable</a></span></li>
<li><span class="link-container"><a class="reference external" href="instrumentation.html">Alternate Class Instrumentation</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="../examples.html">ORM Examples</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar orm-extensions-asyncio" >
        
<section id="asynchronous-i-o-asyncio">
<span id="asyncio-toplevel"></span><h1>Asynchronous I/O (asyncio)<a class="headerlink" href="#asynchronous-i-o-asyncio" title="Permalink to this headline">¶</a></h1>
<p>Support for Python asyncio.    Support for Core and ORM usage is
included, using asyncio-compatible dialects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The asyncio extension as of SQLAlchemy 1.4.3 can now be considered to
be <strong>beta level</strong> software. API details are subject to change however at this
point it is unlikely for there to be significant backwards-incompatible
changes.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../changelog/migration_14.html#change-3414"><span class="std std-ref">Asynchronous IO Support for Core and ORM</span></a> - initial feature announcement</p>
<p><a class="reference internal" href="../examples.html#examples-asyncio"><span class="std std-ref">Asyncio Integration</span></a> - example scripts illustrating working examples
of Core and ORM use within the asyncio extension.</p>
</div>
<section id="asyncio-platform-installation-notes">
<span id="asyncio-install"></span><h2>Asyncio Platform Installation Notes<a class="headerlink" href="#asyncio-platform-installation-notes" title="Permalink to this headline">¶</a></h2>
<p>The asyncio extension requires at least Python version 3.6. It also depends
upon the <a class="reference external" href="https://pypi.org/project/greenlet/">greenlet</a> library. This
dependency is installed by default on common machine platforms including:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x86_64</span> <span class="n">aarch64</span> <span class="n">ppc64le</span> <span class="n">amd64</span> <span class="n">win32</span></pre></div>
</div>
<p>For the above platforms, <code class="docutils literal notranslate"><span class="pre">greenlet</span></code> is known to supply pre-built wheel files.
To ensure the <code class="docutils literal notranslate"><span class="pre">greenlet</span></code> dependency is present on other platforms, the
<code class="docutils literal notranslate"><span class="pre">[asyncio]</span></code> extra may be installed as follows, which will include an attempt
to build and install <code class="docutils literal notranslate"><span class="pre">greenlet</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">sqlalchemy</span><span class="p">[</span><span class="n">asyncio</span><span class="p">]</span></pre></div>
</div>
</section>
<section id="synopsis-core">
<h2>Synopsis - Core<a class="headerlink" href="#synopsis-core" title="Permalink to this headline">¶</a></h2>
<p>For Core use, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> function creates an
instance of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> which then offers an async version of
the traditional <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> API.   The
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> delivers an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> via
its <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect" title="sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a> and <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin" title="sqlalchemy.ext.asyncio.AsyncEngine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.begin()</span></code></a>
methods which both deliver asynchronous context managers.   The
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> can then invoke statements using either the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute" title="sqlalchemy.ext.asyncio.AsyncConnection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.execute()</span></code></a> method to deliver a buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>, or the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> method
to deliver a streaming server-side <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">():</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">drop_all</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">t1</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name 1&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name 2&quot;</span><span class="p">}]</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>

        <span class="c1"># select a Result, which will be delivered with buffered</span>
        <span class="c1"># results</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;some name 1&quot;</span><span class="p">))</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>

    <span class="c1"># for AsyncEngine created in function scope, close and</span>
    <span class="c1"># clean-up pooled connections</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre></div>
</div>
<p>Above, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a> method may be used to
invoke special DDL functions such as <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a> that
don’t include an awaitable hook.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It’s advisable to invoke the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a> method
using <code class="docutils literal notranslate"><span class="pre">await</span></code> when using the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> object in a
scope that will go out of context and be garbage collected, as illustrated in the
<code class="docutils literal notranslate"><span class="pre">async_main</span></code> function in the above example.  This ensures that any
connections held open by the connection pool will be properly disposed
within an awaitable context.   Unlike when using blocking IO, SQLAlchemy
cannot properly dispose of these connections within methods like <code class="docutils literal notranslate"><span class="pre">__del__</span></code>
or weakref finalizers as there is no opportunity to invoke <code class="docutils literal notranslate"><span class="pre">await</span></code>.
Failing to explicitly dispose of the engine when it falls out of scope
may result in warnings emitted to standard out resembling the form
<code class="docutils literal notranslate"><span class="pre">RuntimeError:</span> <span class="pre">Event</span> <span class="pre">loop</span> <span class="pre">is</span> <span class="pre">closed</span></code> within garbage collection.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> also features a “streaming” API via
the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> method that returns an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.  This result object uses a server-side
cursor and provides an async/await API, such as an async iterator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">async_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">t1</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">async_result</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;row: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="p">))</span></pre></div>
</div>
</section>
<section id="synopsis-orm">
<span id="asyncio-orm"></span><h2>Synopsis - ORM<a class="headerlink" href="#synopsis-orm" title="Permalink to this headline">¶</a></h2>
<p>Using <a class="reference internal" href="../../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> querying, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class
provides full ORM functionality. Within the default mode of use, special care
must be taken to avoid <a class="reference internal" href="../../glossary.html#term-lazy-loading"><span class="xref std std-term">lazy loading</span></a> or other expired-attribute access
involving ORM relationships and column attributes; the next
section <a class="reference internal" href="#asyncio-orm-avoid-lazyloads"><span class="std std-ref">Preventing Implicit IO when Using AsyncSession</span></a> details this.   The example below
illustrates a complete example including mapper and session configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">DateTime</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">ForeignKey</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">func</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Integer</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.future</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">selectinload</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">sessionmaker</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>
    <span class="n">create_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
    <span class="n">bs</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>

    <span class="c1"># required in order to access columns with server defaults</span>
    <span class="c1"># or SQL expression defaults, subsequent to a flush, without</span>
    <span class="c1"># triggering an expired load</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;eager_defaults&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">a_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;a.id&quot;</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">():</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
        <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">drop_all</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

    <span class="c1"># expire_on_commit=False will prevent attributes from being expired</span>
    <span class="c1"># after commit.</span>
    <span class="n">async_session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span>
        <span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="n">AsyncSession</span>
    <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add_all</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a1&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a2&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a3&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">selectinload</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">bs</span><span class="p">))</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">a1</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;created at: </span><span class="si">{</span><span class="n">a1</span><span class="o">.</span><span class="n">create_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="n">a1</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>

        <span class="n">a1</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="n">a1</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;new data&quot;</span>

        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="c1"># access attribute subsequent to commit; this is what</span>
        <span class="c1"># expire_on_commit=False allows</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># for AsyncEngine created in function scope, close and</span>
    <span class="c1"># clean-up pooled connections</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>


<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre></div>
</div>
<p>In the example above, the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is instantiated using
the optional <a class="reference internal" href="../session_api.html#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> helper, and associated with an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> against particular database URL. It is
then used in a Python asynchronous context manager (i.e. <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with:</span></code>
statement) so that it is automatically closed at the end of the block; this is
equivalent to calling the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a> method.</p>
<section id="preventing-implicit-io-when-using-asyncsession">
<span id="asyncio-orm-avoid-lazyloads"></span><h3>Preventing Implicit IO when Using AsyncSession<a class="headerlink" href="#preventing-implicit-io-when-using-asyncsession" title="Permalink to this headline">¶</a></h3>
<p>Using traditional asyncio, the application needs to avoid any points at which
IO-on-attribute access may occur. Above, the following measures are taken to
prevent this:</p>
<ul>
<li><p>The <a class="reference internal" href="../loading_relationships.html#sqlalchemy.orm.selectinload" title="sqlalchemy.orm.selectinload"><code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code></a> eager loader is employed in order to eagerly
load the <code class="docutils literal notranslate"><span class="pre">A.bs</span></code> collection within the scope of the
<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">session.execute()</span></code> call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">selectinload</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">bs</span><span class="p">))</span></pre></div>
</div>
<p>If the default loader strategy of “lazyload” were left in place, the access
of the <code class="docutils literal notranslate"><span class="pre">A.bs</span></code> attribute would raise an asyncio exception.
There are a variety of ORM loader options available, which may be configured
at the default mapping level or used on a per-query basis, documented at
<a class="reference internal" href="../loading_relationships.html"><span class="std std-ref">Relationship Loading Techniques</span></a>.</p>
</li>
<li><p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> is configured using
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.params.expire_on_commit" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.expire_on_commit</span></code></a> set to False, so that we may access
attributes on an object subsequent to a call to
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.commit" title="sqlalchemy.ext.asyncio.AsyncSession.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.commit()</span></code></a>, as in the line at the end where we
access an attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create AsyncSession with expire_on_commit=False</span>
<span class="n">async_session</span> <span class="o">=</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># sessionmaker version</span>
<span class="n">async_session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span>
    <span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="n">AsyncSession</span>
<span class="p">)</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>

    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>

    <span class="n">a1</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

    <span class="c1"># commit would normally expire all attributes</span>
    <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># access attribute subsequent to commit; this is what</span>
    <span class="c1"># expire_on_commit=False allows</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></pre></div>
</div>
</li>
<li><p>The <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_default</span></code></a> value on the <code class="docutils literal notranslate"><span class="pre">created_at</span></code>
column will not be refreshed by default after an INSERT; instead, it is
normally
<a class="reference internal" href="../persistence_techniques.html#orm-server-defaults"><span class="std std-ref">expired so that it can be loaded when needed</span></a>.
Similar behavior applies to a column where the
<a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a> parameter is assigned to a SQL expression
object. To access this value with asyncio, it has to be refreshed within the
flush process, which is achieved by setting the
<a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.mapper.params.eager_defaults" title="sqlalchemy.orm.mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapper.eager_defaults</span></code></a> parameter on the mapping:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="c1"># ...</span>

    <span class="c1"># column with a server_default, or SQL expression default</span>
    <span class="n">create_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>

    <span class="c1"># add this so that it can be accessed</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;eager_defaults&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span></pre></div>
</div>
</li>
</ul>
<p>Other guidelines include:</p>
<ul class="simple">
<li><p>Methods like <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire" title="sqlalchemy.ext.asyncio.AsyncSession.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.expire()</span></code></a> should be avoided in favor of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a></p></li>
<li><p>Avoid using the <code class="docutils literal notranslate"><span class="pre">all</span></code> cascade option documented at <a class="reference internal" href="../cascades.html#unitofwork-cascades"><span class="std std-ref">Cascades</span></a>
in favor of listing out the desired cascade features explicitly.   The
<code class="docutils literal notranslate"><span class="pre">all</span></code> cascade option implies among others the <a class="reference internal" href="../cascades.html#cascade-refresh-expire"><span class="std std-ref">refresh-expire</span></a>
setting, which means that the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a> method will
expire the attributes on related objects, but not necessarily refresh those
related objects assuming eager loading is not configured within the
<a class="reference internal" href="../relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>, leaving them in an expired state.   A future
release may introduce the ability to indicate eager loader options when
invoking <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a> and/or <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="sqlalchemy.ext.asyncio.AsyncSession.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.refresh()</span></code></a>.</p></li>
<li><p>Appropriate loader options should be employed for <a class="reference internal" href="../loading_columns.html#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a>
columns, if used at all, in addition to that of <a class="reference internal" href="../relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
constructs as noted above.  See <a class="reference internal" href="../loading_columns.html#deferred"><span class="std std-ref">Deferred Column Loading</span></a> for background on
deferred column loading.</p></li>
<li><p>The “dynamic” relationship loader strategy described at
<a class="reference internal" href="../collections.html#dynamic-relationship"><span class="std std-ref">Dynamic Relationship Loaders</span></a> is not compatible with the asyncio approach and
cannot be used, unless invoked within the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a> method described at
<a class="reference internal" href="#session-run-sync"><span class="std std-ref">Running Synchronous Methods and Functions under asyncio</span></a>.</p></li>
</ul>
</section>
<section id="running-synchronous-methods-and-functions-under-asyncio">
<span id="session-run-sync"></span><h3>Running Synchronous Methods and Functions under asyncio<a class="headerlink" href="#running-synchronous-methods-and-functions-under-asyncio" title="Permalink to this headline">¶</a></h3>
<div class="admonition deepalchemy">
<p class="admonition-title">Deep Alchemy</p>
<p>This approach is essentially exposing publicly the
mechanism by which SQLAlchemy is able to provide the asyncio interface
in the first place.   While there is no technical issue with doing so, overall
the approach can probably be considered “controversial” as it works against
some of the central philosophies of the asyncio programming model, which
is essentially that any programming statement that can potentially result
in IO being invoked <strong>must</strong> have an <code class="docutils literal notranslate"><span class="pre">await</span></code> call, lest the program
does not make it explicitly clear every line at which IO may occur.
This approach does not change that general idea, except that it allows
a series of synchronous IO instructions to be exempted from this rule
within the scope of a function call, essentially bundled up into a single
awaitable.</p>
</div>
<p>As an alternative means of integrating traditional SQLAlchemy “lazy loading”
within an asyncio event loop, an <strong>optional</strong> method known as
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a> is provided which will run any
Python function inside of a greenlet, where traditional synchronous
programming concepts will be translated to use <code class="docutils literal notranslate"><span class="pre">await</span></code> when they reach the
database driver.   A hypothetical approach here is an asyncio-oriented
application can package up database-related methods into functions that are
invoked using <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="sqlalchemy.ext.asyncio.AsyncSession.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.run_sync()</span></code></a>.</p>
<p>Altering the above example, if we didn’t use <a class="reference internal" href="../loading_relationships.html#sqlalchemy.orm.selectinload" title="sqlalchemy.orm.selectinload"><code class="xref py py-func docutils literal notranslate"><span class="pre">selectinload()</span></code></a>
for the <code class="docutils literal notranslate"><span class="pre">A.bs</span></code> collection, we could accomplish our treatment of these
attribute accesses within a separate function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>

<span class="k">def</span> <span class="nf">fetch_and_update_objects</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;run traditional sync-style ORM code in a function that will be</span>
<span class="sd">    invoked within an awaitable.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># the session object here is a traditional ORM Session.</span>
    <span class="c1"># all features are available here including legacy Query use.</span>

    <span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">a1</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>

        <span class="c1"># lazy loads</span>
        <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="n">a1</span><span class="o">.</span><span class="n">bs</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">b1</span><span class="p">)</span>

    <span class="c1"># legacy Query use</span>
    <span class="n">a1</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

    <span class="n">a1</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;new data&quot;</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">():</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">drop_all</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add_all</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a1&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a2&quot;</span><span class="p">),</span>
                    <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()],</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;a3&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">fetch_and_update_objects</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="c1"># for AsyncEngine created in function scope, close and</span>
    <span class="c1"># clean-up pooled connections</span>
    <span class="k">await</span> <span class="n">engine</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre></div>
</div>
<p>The above approach of running certain functions within a “sync” runner
has some parallels to an application that runs a SQLAlchemy application
on top of an event-based programming library such as <code class="docutils literal notranslate"><span class="pre">gevent</span></code>.  The
differences are as follows:</p>
<ol class="arabic simple">
<li><p>unlike when using <code class="docutils literal notranslate"><span class="pre">gevent</span></code>, we can continue to use the standard Python
asyncio event loop, or any custom event loop, without the need to integrate
into the <code class="docutils literal notranslate"><span class="pre">gevent</span></code> event loop.</p></li>
<li><p>There is no “monkeypatching” whatsoever.   The above example makes use of
a real asyncio driver and the underlying SQLAlchemy connection pool is also
using the Python built-in <code class="docutils literal notranslate"><span class="pre">asyncio.Queue</span></code> for pooling connections.</p></li>
<li><p>The program can freely switch between async/await code and contained
functions that use sync code with virtually no performance penalty.  There
is no “thread executor” or any additional waiters or synchronization in use.</p></li>
<li><p>The underlying network drivers are also using pure Python asyncio
concepts, no third party networking libraries as <code class="docutils literal notranslate"><span class="pre">gevent</span></code> and <code class="docutils literal notranslate"><span class="pre">eventlet</span></code>
provides are in use.</p></li>
</ol>
</section>
</section>
<section id="using-multiple-asyncio-event-loops">
<h2>Using multiple asyncio event loops<a class="headerlink" href="#using-multiple-asyncio-event-loops" title="Permalink to this headline">¶</a></h2>
<p>An application that makes use of multiple event loops, for example by combining asyncio
with multithreading, should not share the same <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>
with different event loops when using the default pool implementation.</p>
<p>If an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> is be passed from one event loop to another,
the method <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="sqlalchemy.ext.asyncio.AsyncEngine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.dispose()</span></code></a> should be called before it’s
re-used on a new event loop. Failing to do so may lead to a <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>
along the lines of
<code class="docutils literal notranslate"><span class="pre">Task</span> <span class="pre">&lt;Task</span> <span class="pre">pending</span> <span class="pre">...&gt;</span> <span class="pre">got</span> <span class="pre">Future</span> <span class="pre">attached</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">different</span> <span class="pre">loop</span></code></p>
<p>If the same engine must be shared between different loop, it should be configured
to disable pooling using <a class="reference internal" href="../../core/pooling.html#sqlalchemy.pool.NullPool" title="sqlalchemy.pool.NullPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullPool</span></code></a>, preventing the Engine
from using any connection more than once:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.pool</span> <span class="kn">import</span> <span class="n">NullPool</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
    <span class="s2">&quot;postgresql+asyncpg://user:pass@host/dbname&quot;</span><span class="p">,</span> <span class="n">poolclass</span><span class="o">=</span><span class="n">NullPool</span>
<span class="p">)</span></pre></div>
</div>
</section>
<section id="using-asyncio-scoped-session">
<span id="asyncio-scoped-session"></span><h2>Using asyncio scoped session<a class="headerlink" href="#using-asyncio-scoped-session" title="Permalink to this headline">¶</a></h2>
<p>The usage of <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> is mostly similar to
<a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoping.scoped_session" title="sqlalchemy.orm.scoping.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a>. However, since there’s no “thread-local” concept in
the asyncio context, the “scopefunc” paramater must be provided to the
constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">asyncio</span> <span class="kn">import</span> <span class="n">current_task</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">async_scoped_session</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>

<span class="n">async_session_factory</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">some_async_engine</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="n">_AsyncSession</span><span class="p">)</span>
<span class="n">AsyncSession</span> <span class="o">=</span> <span class="n">async_scoped_session</span><span class="p">(</span><span class="n">async_session_factory</span><span class="p">,</span> <span class="n">scopefunc</span><span class="o">=</span><span class="n">current_task</span><span class="p">)</span>

<span class="n">some_async_session</span> <span class="o">=</span> <span class="n">AsyncSession</span><span class="p">()</span></pre></div>
</div>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> also includes <strong>proxy
behavior</strong> similar to that of <a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoping.scoped_session" title="sqlalchemy.orm.scoping.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a>, which means it can be
treated as a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> directly, keeping in mind that
the usual <code class="docutils literal notranslate"><span class="pre">await</span></code> keywords are necessary, including for the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="sqlalchemy.ext.asyncio.async_scoped_session.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_scoped_session.remove()</span></code></a> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">some_async_session</span><span class="p">,</span> <span class="n">some_object</span><span class="p">):</span>
   <span class="c1"># use the AsyncSession directly</span>
   <span class="n">some_async_session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>

   <span class="c1"># use the AsyncSession via the context-local proxy</span>
   <span class="k">await</span> <span class="n">AsyncSession</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

   <span class="c1"># &quot;remove&quot; the current proxied AsyncSession for the local context</span>
   <span class="k">await</span> <span class="n">AsyncSession</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.19.</span></p>
</div>
</section>
<section id="using-the-inspector-to-inspect-schema-objects">
<h2>Using the Inspector to inspect schema objects<a class="headerlink" href="#using-the-inspector-to-inspect-schema-objects" title="Permalink to this headline">¶</a></h2>
<p>SQLAlchemy does not yet offer an asyncio version of the
<a class="reference internal" href="../../core/reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Inspector</span></code></a> (introduced at <a class="reference internal" href="../../core/reflection.html#metadata-reflection-inspector"><span class="std std-ref">Fine Grained Reflection with Inspector</span></a>),
however the existing interface may be used in an asyncio context by
leveraging the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="sqlalchemy.ext.asyncio.AsyncConnection.run_sync"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.run_sync()</span></code></a> method of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">inspect</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
  <span class="s2">&quot;postgresql+asyncpg://scott:tiger@localhost/test&quot;</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">use_inspector</span><span class="p">(</span><span class="n">conn</span><span class="p">):</span>
    <span class="n">inspector</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
    <span class="c1"># use the inspector</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inspector</span><span class="o">.</span><span class="n">get_view_names</span><span class="p">())</span>
    <span class="c1"># return any value to the caller</span>
    <span class="k">return</span> <span class="n">inspector</span><span class="o">.</span><span class="n">get_table_names</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">async_main</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="n">tables</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">use_inspector</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_main</span><span class="p">())</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/reflection.html#metadata-reflection"><span class="std std-ref">Reflecting Database Objects</span></a></p>
<p><a class="reference internal" href="../../core/inspection.html"><span class="std std-ref">Runtime Inspection API</span></a></p>
</div>
</section>
<section id="engine-api-documentation">
<h2>Engine API Documentation<a class="headerlink" href="#engine-api-documentation" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><span class="sig-name descname">AsyncConnection</span></a></p></td>
<td><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><span class="sig-name descname">AsyncEngine</span></a></p></td>
<td><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><span class="sig-name descname">AsyncTransaction</span></a></p></td>
<td><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine"><span class="sig-name descname">create_async_engine</span></a>(*arg, **kw)</p></td>
<td><p>Create a new async engine instance.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.create_async_engine">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">create_async_engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.create_async_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new async engine instance.</p>
<p>Arguments passed to <a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> are mostly
identical to those passed to the <a class="reference internal" href="../../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> function.
The specified dialect must be an asyncio-compatible dialect
such as <a class="reference internal" href="../../dialects/postgresql.html#dialect-postgresql-asyncpg"><span class="std std-ref">asyncpg</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncEngine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sync_engine</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> is acquired using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+asyncpg://user:pass@host/dbname&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager which when entered will deliver an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> with an
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> established.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into table (x, y, z) values (1, 2, 3)&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;my_special_procedure(5)&quot;</span><span class="p">))</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">clear_compiled_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.clear_compiled_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the compiled cache associated with the dialect.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/future.html#sqlalchemy.future.Engine" title="sqlalchemy.future.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>This applies <strong>only</strong> to the built-in cache that is established
via the <code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code> parameter.
It will not impact any dictionary caches that were passed via the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execution_options.params.query_cache" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.query_cache</span></code></a> parameter.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.connect">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> will procure a database
connection from the underlying connection pool when it is entered
as an async context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">user_table</span><span class="p">))</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> may also be started outside of a
context manager by invoking its <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.start" title="sqlalchemy.ext.asyncio.AsyncConnection.start"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.start()</span></code></a>
method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.dispose">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">dispose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.dispose" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispose of the connection pool used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>.</p>
<p>This will close all connection pool connections that are
<strong>currently checked in</strong>.  See the documentation for the underlying
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code> method for further notes.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> that will provide
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects with the given execution
options.</p>
<p>Proxied from <code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code>.  See that
method for details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">get_execution_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.get_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the non-SQL options which will take effect during execution.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/future.html#sqlalchemy.future.Engine" title="sqlalchemy.future.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.raw_connection">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">raw_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “raw” DBAPI connection from the connection pool.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#dbapi-connections"><span class="std std-ref">Working with Driver SQL and Raw DBAPI Connections</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncEngine.</span></code></a><span class="sig-name descname"><span class="pre">update_execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncEngine.update_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the default execution_options dictionary
of this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../../core/future.html#sqlalchemy.future.Engine" title="sqlalchemy.future.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> class.</p>
</div>
<p>The given keys/values in **opt are added to the
default execution options that will be used for
all connections.  The initial contents of this dictionary
can be sent via the <code class="docutils literal notranslate"><span class="pre">execution_options</span></code> parameter
to <a class="reference internal" href="../../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">async_engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync_connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> is acquired using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine.connect" title="sqlalchemy.ext.asyncio.AsyncEngine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncEngine.connect()</span></code></a>
method of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+asyncpg://user:pass@host/dbname&quot;</span><span class="p">)</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a transaction prior to autobegin occurring.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a nested transaction and return a transaction handle.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.close">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>.</p>
<p>This has the effect of also rolling back the transaction if one
is in place.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.commit">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the transaction that is currently in progress.</p>
<p>This method commits the current transaction if one has been started.
If no transaction was started, the method has no effect, assuming
the connection is in a non-invalidated state.</p>
<p>A transaction is begun on a <a class="reference internal" href="../../core/future.html#sqlalchemy.future.Connection" title="sqlalchemy.future.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> automatically
whenever a statement is first executed, or when the
<a class="reference internal" href="../../core/future.html#sqlalchemy.future.Connection.begin" title="sqlalchemy.future.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is called.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implemented for async; call
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection" title="sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.get_raw_connection()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">exec_driver_sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.exec_driver_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a driver-level SQL string and return buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.execute">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and return a buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.object"></span><strong>object</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.object">¶</a> – <p>The statement to be executed.  This is always
an object that is in both the <a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> and
<a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a> hierarchies, including:</p>
<ul>
<li><p><a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a></p></li>
<li><p><a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a>, <a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>,
<a class="reference internal" href="../../core/dml.html#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a></p></li>
<li><p><a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.TextClause" title="sqlalchemy.sql.expression.TextClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextClause</span></code></a> and
<a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.TextualSelect" title="sqlalchemy.sql.expression.TextualSelect"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextualSelect</span></code></a></p></li>
<li><p><a class="reference internal" href="../../core/ddl.html#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a> and objects which inherit from
<a class="reference internal" href="../../core/ddl.html#sqlalchemy.schema.DDLElement" title="sqlalchemy.schema.DDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLElement</span></code></a></p></li>
</ul>
</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.parameters">¶</a> – parameters which will be bound into the statement.
This may be either a dictionary of parameter names to values,
or a mutable sequence (e.g. a list) of dictionaries.  When a
list of dictionaries is passed, the underlying statement execution
will make use of the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.executemany()</span></code> method.
When a single dictionary is passed, the DBAPI <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code>
method will be used.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncConnection.execute.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.execute.params.execution_options">¶</a> – optional dictionary of execution options,
which will be associated with the statement execution.  This
dictionary can provide a subset of the options that are accepted
by <code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.execution_options">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Set non-SQL options for the connection which take effect
during execution.</p>
<p>This returns this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object with
the new options added.</p>
<p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code> for full details
on this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> representing the current
nested (savepoint) transaction, if any.</p>
<p>This makes use of the underlying synchronous connection’s
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.get_nested_transaction" title="sqlalchemy.engine.Connection.get_nested_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_nested_transaction()</span></code></a> method to get the
current <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>, which is then proxied in a new
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">get_raw_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the pooled DBAPI-level connection in use by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>.</p>
<p>This is typically the SQLAlchemy connection-pool proxied connection
which then has an attribute .connection that refers to the actual
DBAPI-level connection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.get_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> representing the current
transaction, if any.</p>
<p>This makes use of the underlying synchronous connection’s
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.get_transaction" title="sqlalchemy.engine.Connection.get_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_transaction()</span></code></a> method to get the current
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>, which is then proxied in a new
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.info" title="sqlalchemy.engine.Connection.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.info</span></code></a> dictionary of the
underlying <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This dictionary is freely writable for user-defined state to be
associated with the database connection.</p>
<p>This attribute is only available if the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> is
currently connected.   If the <code class="xref py py-attr docutils literal notranslate"><span class="pre">AsyncConnection.closed</span></code> attribute
is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then accessing this attribute will raise
<a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceClosedError</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.invalidate">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidate the underlying DBAPI connection associated with
this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>See the method <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> for full
detail on this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.rollback">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back the transaction that is currently in progress.</p>
<p>This method rolls back the current transaction if one has been started.
If no transaction was started, the method has no effect.  If a
transaction was started and the connection is in an invalidated state,
the transaction is cleared using this method.</p>
<p>A transaction is begun on a <a class="reference internal" href="../../core/future.html#sqlalchemy.future.Connection" title="sqlalchemy.future.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> automatically
whenever a statement is first executed, or when the
<a class="reference internal" href="../../core/future.html#sqlalchemy.future.Connection.begin" title="sqlalchemy.future.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is called.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.run_sync">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">run_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.run_sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke the given sync callable passing self as the first argument.</p>
<p>This method maintains the asyncio event loop all the way through
to the database connection by running the given callable in a
specially instrumented greenlet.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">async_engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The provided callable is invoked inline within the asyncio event
loop, and will block on traditional IO calls.  IO within this
callable should only call into SQLAlchemy’s asyncio database
APIs which will be properly adapted to the greenlet context.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#session-run-sync"><span class="std std-ref">Running Synchronous Methods and Functions under asyncio</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.scalar">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a scalar object.</p>
<p>This method is shorthand for invoking the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> method after invoking the
<a class="reference internal" href="../../core/future.html#sqlalchemy.future.Connection.execute" title="sqlalchemy.future.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method.  Parameters are equivalent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a scalar Python value representing the first column of the
first row returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.start">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_ctxmanager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object’s context
outside of using a Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> block.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncConnection.stream">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncConnection.</span></code></a><span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a streaming
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncTransaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio proxy for a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ProxyComparable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.close">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.commit">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.rollback">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back this <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncTransaction.start">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncTransaction.</span></code></a><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_ctxmanager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncTransaction.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a> object’s context
outside of using a Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> block.</p>
</dd></dl>

</dd></dl>

</section>
<section id="result-set-api-documentation">
<h2>Result Set API Documentation<a class="headerlink" href="#result-set-api-documentation" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object is an async-adapted version of the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.  It is only returned when using the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> or <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a>
methods, which return a result object that is on top of an active database
cursor.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><span class="sig-name descname">AsyncMappingResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns dictionary values
rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><span class="sig-name descname">AsyncResult</span></a></p></td>
<td><p>An asyncio wrapper around a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><span class="sig-name descname">AsyncScalarResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns scalar values
rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">real_result</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult" title="Permalink to this definition">¶</a></dt>
<dd><p>An asyncio wrapper around a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> only applies to statement executions that
use a server-side cursor.  It is returned only from the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection.stream" title="sqlalchemy.ext.asyncio.AsyncConnection.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncConnection.stream()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="sqlalchemy.ext.asyncio.AsyncSession.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.stream()</span></code></a> methods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As is the case with <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>, this object is
used for ORM results returned by <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.execute" title="sqlalchemy.ext.asyncio.AsyncSession.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.execute()</span></code></a>,
which can yield instances of ORM mapped objects either individually or
within tuple-like rows.  Note that these result objects do not
deduplicate instances or rows automatically as is the case with the
legacy <a class="reference internal" href="../query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object. For in-Python de-duplication of
instances or rows, use the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> modifier
method.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.all">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all rows in a list.</p>
<p>Closes the result set after invocation.   Subsequent invocations
will return an empty list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
<p>Refer to <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.fetchmany">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many rows.</p>
<p>When all rows are exhausted, returns an empty list.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch rows in groups, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.fetchone">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one row.</p>
<p>When all rows are exhausted, returns None.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch the first row of a result only, use the
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> method.  To iterate through all
rows, iterate the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object if no filters are applied, or None
if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.first">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first row or None if no row is present.</p>
<p>Closes the result set and discards remaining rows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default. To
return exactly one single scalar value, that is, the first column of
the first row, use the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object, or None
if no rows remain.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="sqlalchemy.ext.asyncio.AsyncResult.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.freeze">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">freeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.freeze" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a callable object that will produce copies of this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> when invoked.</p>
<p>The callable object returned is an instance of
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>.</p>
<p>This is used for result set caching.  The method must be called
on the result when it has been unconsumed, and calling the method
will consume the result fully.   When the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>
is retrieved from a cache, it can be called any number of times where
it will produce a new <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object each time
against its stored set of rows.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_events.html#do-orm-execute-re-executing"><span class="std std-ref">Re-Executing Statements</span></a> - example usage within the
ORM to implement a result-set cache.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.keys" title="sqlalchemy.engine.Result.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.keys()</span></code></a> collection from the
underlying <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">mappings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a mappings filter to returned rows, returning an instance of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a>.</p>
<p>When this filter is applied, fetching rows will return
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> objects instead of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<p>Refer to <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.mappings" title="sqlalchemy.engine.Result.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a> filtering object
referring to the underlying <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">others</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> with other compatible result
objects.</p>
<p>The object returned is an instance of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.MergedResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MergedResult</span></code></a>,
which will be composed of iterators from the given result
objects.</p>
<p>The new result will use the metadata from this result object.
The subsequent result objects must be against an identical
set of result / cursor metadata, otherwise the behavior is
undefined.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.one">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one row or raise an exception.</p>
<p>Raises <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a> if the result returns no
rows, or <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a> if multiple rows
would be returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a> method, or combine
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>, <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="sqlalchemy.ext.asyncio.AsyncResult.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalar_one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.one_or_none">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one result or raise an exception.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if the result has no rows.
Raises <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>
if multiple rows are returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or None if no row is available.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of rows of the size given.</p>
<p>An async iterator is returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">scroll_results</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">users_table</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;list of rows: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">partition</span><span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first column of the first row, and close the result set.</p>
<p>Returns None if there are no rows to fetch.</p>
<p>No validation is performed to test if additional rows remain.</p>
<p>After calling this method, the object is fully closed,
e.g. the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.CursorResult.close" title="sqlalchemy.engine.CursorResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a>
method will have been called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a Python scalar value , or None if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar_one">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one scalar result or raise an exception.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalar_one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one or no scalar result.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> and
then <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> filtering object which
will return single elements rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<p>Refer to <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncResult.scalars.params.index"></span><strong>index</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars.params.index">¶</a> – integer or row key indicating the column to be fetched
from each row, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code> indicating the first column.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> filtering object
referring to this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>.</p>
<p>Refer to <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncScalarResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">real_result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns scalar values
rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.scalars" title="sqlalchemy.ext.asyncio.AsyncResult.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.scalars()</span></code></a> method.</p>
<p>Refer to the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.all">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all scalar values in a list.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="sqlalchemy.ext.asyncio.AsyncResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.all" title="sqlalchemy.ext.asyncio.AsyncScalarResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncScalarResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many objects.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.first">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first object or None if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.one">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncScalarResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncScalarResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncScalarResult" title="sqlalchemy.ext.asyncio.AsyncScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncScalarResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> for usage details.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncMappingResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> that returns dictionary values
rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.mappings" title="sqlalchemy.ext.asyncio.AsyncResult.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.mappings()</span></code></a> method.</p>
<p>Refer to the <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> object in the synchronous
SQLAlchemy API for a complete behavioral description.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncCommon</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.all">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all scalar values in a list.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.all" title="sqlalchemy.ext.asyncio.AsyncResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.all()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.all" title="sqlalchemy.ext.asyncio.AsyncMappingResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncMappingResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many objects.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchmany" title="sqlalchemy.ext.asyncio.AsyncResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchmany()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one object.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.fetchone" title="sqlalchemy.ext.asyncio.AsyncResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.fetchone()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.first">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first object or None if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.first" title="sqlalchemy.ext.asyncio.AsyncResult.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.first()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.one">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one" title="sqlalchemy.ext.asyncio.AsyncResult.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.one_or_none" title="sqlalchemy.ext.asyncio.AsyncResult.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.one_or_none()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.partitions" title="sqlalchemy.ext.asyncio.AsyncResult.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.partitions()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncMappingResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncMappingResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncMappingResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncMappingResult" title="sqlalchemy.ext.asyncio.AsyncMappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMappingResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult.unique" title="sqlalchemy.ext.asyncio.AsyncResult.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncResult.unique()</span></code></a> for usage details.</p>
</dd></dl>

</dd></dl>

</section>
<section id="orm-session-api-documentation">
<h2>ORM Session API Documentation<a class="headerlink" href="#orm-session-api-documentation" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_object_session"><span class="sig-name descname">async_object_session</span></a>(instance)</p></td>
<td><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> to which the given instance
belongs.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><span class="sig-name descname">async_scoped_session</span></a></p></td>
<td><p>Provides scoped management of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> objects.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_session"><span class="sig-name descname">async_session</span></a>(session)</p></td>
<td><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> which is proxying the given
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object, if any.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><span class="sig-name descname">AsyncSession</span></a></p></td>
<td><p>Asyncio version of <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><span class="sig-name descname">AsyncSessionTransaction</span></a></p></td>
<td><p>A wrapper for the ORM <a class="reference internal" href="../session_api.html#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> object.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_object_session">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> to which the given instance
belongs.</p>
<p>This function makes use of the sync-API function
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.object_session" title="sqlalchemy.orm.object_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">object_session</span></code></a> to retrieve the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> which
refers to the given instance, and from there links it to the original
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>If the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> has been garbage collected, the
return value is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This functionality is also available from the
<a class="reference internal" href="../internals.html#sqlalchemy.orm.InstanceState.async_session" title="sqlalchemy.orm.InstanceState.async_session"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.async_session</span></code></a> accessor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_object_session.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_object_session.params.instance">¶</a> – an ORM mapped instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> object, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_session">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> which is proxying the given
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_session.params.session"></span><strong>session</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_session.params.session">¶</a> – a <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> instance, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">async_scoped_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_factory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scopefunc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides scoped management of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> objects.</p>
<p>See the section <a class="reference internal" href="#asyncio-scoped-session"><span class="std std-ref">Using asyncio scoped session</span></a> for usage details.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.19.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.scoping.ScopedSessionMixin</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.__call__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.scoping.ScopedSessionMixin.__call__</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">ScopedSessionMixin</span></code></p>
</div>
<p>Return the current <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, creating it
using the <a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoping.scoped_session.session_factory" title="sqlalchemy.orm.scoping.scoped_session.session_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scoped_session.session_factory</span></code></a> if not present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.__call__.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.__call__.params.**kw">¶</a> – Keyword arguments will be passed to the
<a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoping.scoped_session.session_factory" title="sqlalchemy.orm.scoping.scoped_session.session_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scoped_session.session_factory</span></code></a> callable, if an existing
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is not present.  If the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is present
and keyword arguments have been passed,
<a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> is raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_factory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scopefunc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.params.session_factory"></span><strong>session_factory</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.params.session_factory">¶</a> – <p>a factory to create new <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>
instances. This is usually, but not necessarily, an instance
of <a class="reference internal" href="../session_api.html#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> which itself was passed the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> to its <a class="reference internal" href="../session_api.html#sqlalchemy.orm.sessionmaker.params.class_" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">sessionmaker.class_</span></code></a>
parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">async_session_factory</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">some_async_engine</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span> <span class="n">AsyncSession</span><span class="p">)</span>
<span class="n">AsyncSession</span> <span class="o">=</span> <span class="n">async_scoped_session</span><span class="p">(</span><span class="n">async_session_factory</span><span class="p">,</span> <span class="n">scopefunc</span><span class="o">=</span><span class="n">current_task</span><span class="p">)</span></pre></div>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.params.scopefunc"></span><strong>scopefunc</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.params.scopefunc">¶</a> – function which defines
the current scope.   A function such as <code class="docutils literal notranslate"><span class="pre">asyncio.current_task</span></code>
may be useful here.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.add">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_warn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an object in the <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Its state will be persisted to the database on the next flush
operation.</p>
<p>Repeated calls to <code class="docutils literal notranslate"><span class="pre">add()</span></code> will be ignored. The opposite of <code class="docutils literal notranslate"><span class="pre">add()</span></code>
is <code class="docutils literal notranslate"><span class="pre">expunge()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.add_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">add_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.add_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the given collection of instances to this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.autoflush" title="Permalink to this definition">¶</a></dt>
<dd><div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>The underlying <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will perform the
“begin” action when the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a>
object is entered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="c1"># .. ORM transaction is begun</span></pre></div>
</div>
<p>Note that database IO will not normally occur when the session-level
transaction is begun, as database transactions begin on an
on-demand basis.  However, the begin block is async to accommodate
for a <a class="reference internal" href="../events.html#sqlalchemy.orm.SessionEvents.after_transaction_create" title="sqlalchemy.orm.SessionEvents.after_transaction_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.after_transaction_create()</span></code></a>
event hook that may perform IO.</p>
<p>For a general description of ORM begin, see
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.begin" title="sqlalchemy.orm.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object
which will begin a “nested” transaction, e.g. SAVEPOINT.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>Behavior is the same as that of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a>.</p>
<p>For a general description of ORM begin nested, see
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.begin_nested" title="sqlalchemy.orm.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.bind">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">bind</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.bind" title="Permalink to this definition">¶</a></dt>
<dd><div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close out the transactional resources and ORM objects used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>This expunges all ORM objects associated with this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, ends any transaction in progress and
<a class="reference internal" href="../../glossary.html#term-releases"><span class="xref std std-term">releases</span></a> any <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects which
this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself has checked out from
associated <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> objects. The operation then
leaves the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in a state which it may be
used again.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a> method <strong>does not prevent
the Session from being used again</strong>. The
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself does not actually have a
distinct “closed” state; it merely means the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> will release all database
connections and ORM objects.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_basics.html#session-closing"><span class="std std-ref">Closing</span></a> - detail on the semantics of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.close_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">close_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.close_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> sessions.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current transaction in progress.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.configure">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.configure" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">ScopedSessionMixin.configure()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">ScopedSessionMixin</span></code></p>
</div>
<p>reconfigure the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> used by this
<a class="reference internal" href="../contextual.html#sqlalchemy.orm.scoping.scoped_session" title="sqlalchemy.orm.scoping.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a>.</p>
<p>See <a class="reference internal" href="../session_api.html#sqlalchemy.orm.sessionmaker.configure" title="sqlalchemy.orm.sessionmaker.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sessionmaker.configure()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object corresponding to
this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s transactional state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.delete">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark an instance as deleted.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>The database delete operation occurs upon <code class="docutils literal notranslate"><span class="pre">flush()</span></code>.</p>
<p>As this operation may need to cascade along unloaded relationships,
it is awaitable to allow for those queries to take place.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘deleted’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code></p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.dirty">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">dirty</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all persistent instances considered dirty.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_mapped_object</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">dirty</span></pre></div>
</div>
<p>Instances are considered dirty when they were modified but not
deleted.</p>
<p>Note that this ‘dirty’ calculation is ‘optimistic’; most
attribute-setting or collection modification operations will
mark an instance as ‘dirty’ and place it in this set, even if
there is no net change to the attribute’s value.  At flush
time, the value of each attribute is compared to its
previously saved value, and if there’s no net change, no SQL
operation will occur (this is a more expensive operation so
it’s only done at flush time).</p>
<p>To check if an instance has actionable net changes to its
attributes, use the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.is_modified" title="sqlalchemy.orm.Session.is_modified"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.is_modified()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.execute" title="Permalink to this definition">¶</a></dt>
<dd><div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>Execute a statement and return a buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expire">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire the attributes on an instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Marks the attributes of an instance as out of date. When an expired
attribute is next accessed, a query will be issued to the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire all objects in the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> simultaneously,
use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code>.</p>
<p>The <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code> only makes sense for the specific
case that a non-ORM SQL statement was emitted in the current
transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.expire.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire.params.instance">¶</a> – The instance to be refreshed.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.expire.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire.params.attribute_names">¶</a> – optional list of string attribute names
indicating a subset of attributes to be expired.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_state_management.html#session-expire"><span class="std std-ref">Refreshing / Expiring</span></a> - introductory material</p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a></p>
<p><a class="reference internal" href="../query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expire_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expire_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expire_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Expires all persistent instances within this Session.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>When any attributes on a persistent instance is next accessed,
a query will be issued using the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire individual objects and individual attributes
on those objects, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code>.</p>
<p>The <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code> should not be needed when
autocommit is <code class="docutils literal notranslate"><span class="pre">False</span></code>, assuming the transaction is isolated.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_state_management.html#session-expire"><span class="std std-ref">Refreshing / Expiring</span></a> - introductory material</p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a></p>
<p><a class="reference internal" href="../query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expunge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expunge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the <cite>instance</cite> from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This will free all internal references to the instance.  Cascading
will be applied according to the <em>expunge</em> cascade rule.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.expunge_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">expunge_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.expunge_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all object instances from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">expunge(obj)</span></code> on all objects in this
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.flush">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all the object changes to the database.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.get">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_existing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance based on the given primary key identifier,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.get_bind">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">get_bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clause</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_sa_skip_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_sa_skip_for_implicit_returning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “bind” to which this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is bound.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>The “bind” is usually an instance of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
except in the case where the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has been
explicitly bound directly to a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>For a multiply-bound or unbound <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, the
<code class="docutils literal notranslate"><span class="pre">mapper</span></code> or <code class="docutils literal notranslate"><span class="pre">clause</span></code> arguments are used to determine the
appropriate bind to return.</p>
<p>Note that the “mapper” argument is usually present
when <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> is called via an ORM
operation such as a <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.query" title="sqlalchemy.orm.Session.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.query()</span></code></a>, each
individual INSERT/UPDATE/DELETE operation within a
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code></a>, call, etc.</p>
<p>The order of resolution is:</p>
<ol class="arabic simple">
<li><p>if mapper given and <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.params.binds" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.binds</span></code></a> is present,
locate a bind based first on the mapper in use, then
on the mapped class in use, then on any base classes that are
present in the <code class="docutils literal notranslate"><span class="pre">__mro__</span></code> of the mapped class, from more specific
superclasses to more general.</p></li>
<li><p>if clause given and <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code> is present,
locate a bind based on <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects
found in the given clause present in <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code>.</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code> is present, return that.</p></li>
<li><p>if clause given, attempt to return a bind
linked to the <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> ultimately
associated with the clause.</p></li>
<li><p>if mapper given, attempt to return a bind
linked to the <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> ultimately
associated with the <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or other
selectable to which the mapper is mapped.</p></li>
<li><p>No bind can be found, <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.UnboundExecutionError" title="sqlalchemy.exc.UnboundExecutionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnboundExecutionError</span></code></a>
is raised.</p></li>
</ol>
<p>Note that the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> method can be overridden on
a user-defined subclass of <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to provide any kind
of bind resolution scheme.  See the example at
<a class="reference internal" href="../persistence_techniques.html#session-custom-partitioning"><span class="std std-ref">Custom Vertical Partitioning</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.get_bind.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind.params.mapper">¶</a> – Optional <a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.mapper" title="sqlalchemy.orm.mapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapper()</span></code></a> mapped class or instance of
<a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.   The bind can be derived from a
<a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
first by consulting the “binds” map associated with this
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, and secondly by consulting the
<a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
associated with the <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> to which the
<a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
is mapped for a bind.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.get_bind.params.clause"></span><strong>clause</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.get_bind.params.clause">¶</a> – A <a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> (i.e.
<a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a>,
<a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>,
etc.).  If the <code class="docutils literal notranslate"><span class="pre">mapper</span></code> argument is not present or could not
produce a bind, the given expression construct will be searched
for a bound element, typically a <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
associated with
bound <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../persistence_techniques.html#session-partitioning"><span class="std std-ref">Partitioning Strategies (e.g. multiple database backends per Session)</span></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.params.binds" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.binds</span></code></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.bind_mapper" title="sqlalchemy.orm.Session.bind_mapper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_mapper()</span></code></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.bind_table" title="sqlalchemy.orm.Session.bind_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_table()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.identity_key">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an identity key.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.util.identity_key" title="sqlalchemy.orm.util.identity_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.identity_map">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">identity_map</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.identity_map" title="Permalink to this definition">¶</a></dt>
<dd><div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-modifiable dictionary.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>The initial value of this dictionary can be populated using the
<code class="docutils literal notranslate"><span class="pre">info</span></code> argument to the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> constructor or
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> constructor or factory methods.  The dictionary
here is always local to this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> and can be modified
independently of all other <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.is_active">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">is_active</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> not in “partial rollback” state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> no longer begins
a new transaction immediately, so this attribute will be False
when the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is first instantiated.</p>
</div>
<p>“partial rollback” state typically indicates that the flush process
of the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has failed, and that the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a> method must be emitted in order to
fully roll back the transaction.</p>
<p>If this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is not in a transaction at all, the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will autobegin when it is first used, so in this
case <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.is_active" title="sqlalchemy.orm.Session.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></a> will return True.</p>
<p>Otherwise, if this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is within a transaction,
and that transaction has not been rolled back internally, the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.is_active" title="sqlalchemy.orm.Session.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></a> will also return True.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../faq/sessions.html#faq-session-rollback"><span class="std std-ref">“This Session’s transaction has been rolled back due to a previous exception during flush.” (or similar)</span></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.in_transaction" title="sqlalchemy.orm.Session.in_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">is_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_collections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given instance has locally
modified attributes.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This method retrieves the history for each instrumented
attribute on the instance and performs a comparison of the current
value to its previously committed value, if any.</p>
<p>It is in effect a more expensive and accurate
version of checking for the given instance in the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a> collection; a full test for
each attribute’s net “dirty” status is performed.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">is_modified</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span></pre></div>
</div>
<p>A few caveats to this method apply:</p>
<ul>
<li><p>Instances present in the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a> collection may
report <code class="docutils literal notranslate"><span class="pre">False</span></code> when tested with this method.  This is because
the object may have received change events via attribute mutation,
thus placing it in <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a>, but ultimately the state
is the same as that loaded from the database, resulting in no net
change here.</p></li>
<li><p>Scalar attributes may not have recorded the previously set
value when a new value was applied, if the attribute was not loaded,
or was expired, at the time the new value was received - in these
cases, the attribute is assumed to have a change, even if there is
ultimately no net change against its database value. SQLAlchemy in
most cases does not need the “old” value when a set event occurs, so
it skips the expense of a SQL call if the old value isn’t present,
based on the assumption that an UPDATE of the scalar value is
usually needed, and in those few cases where it isn’t, is less
expensive on average than issuing a defensive SELECT.</p>
<p>The “old” value is fetched unconditionally upon set only if the
attribute container has the <code class="docutils literal notranslate"><span class="pre">active_history</span></code> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This flag is set typically for primary key attributes and scalar
object references that are not a simple many-to-one.  To set this
flag for any arbitrary mapped column, use the <code class="docutils literal notranslate"><span class="pre">active_history</span></code>
argument with <a class="reference internal" href="../mapping_columns.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a>.</p>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.instance">¶</a> – mapped instance to be tested for pending changes.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.include_collections"></span><strong>include_collections</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session.is_modified.params.include_collections">¶</a> – Indicates if multivalued collections
should be included in the operation.  Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> is a
way to detect only local-column based properties (i.e. scalar columns
or many-to-one foreign keys) that would result in an UPDATE for this
instance upon flush.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the state of a given instance into a corresponding instance
within this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.new">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">new</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.new" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘new’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">no_autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.no_autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager that disables autoflush.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">no_autoflush</span><span class="p">:</span>

    <span class="n">some_object</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="c1"># won&#39;t autoflush</span>
    <span class="n">some_object</span><span class="o">.</span><span class="n">related_thing</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeRelated</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>Operations that proceed within the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block
will not be subject to flushes occurring upon query
access.  This is useful when initializing a series
of objects which involve existing database queries,
where the uncompleted object should not yet be flushed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.object_session">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to which an object belongs.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <a class="reference internal" href="../session_api.html#sqlalchemy.orm.object_session" title="sqlalchemy.orm.object_session"><code class="xref py py-func docutils literal notranslate"><span class="pre">object_session()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.refresh">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire and refresh the attributes on the given instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
<p>A query will be issued to the database and all attributes will be
refreshed with their current database value.</p>
<p>This is the async version of the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a> method.
See that method for a complete description of all options.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.remove">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispose of the current <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, if present.</p>
<p>Different from scoped_session’s remove method, this method would use
await to wait for the close method of AsyncSession.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the current transaction in progress.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.async_scoped_session.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.async_scoped_session.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.async_scoped_session.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a scalar result.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.async_scoped_session" title="sqlalchemy.ext.asyncio.scoping.async_scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">async_scoped_session</span></code></a> class.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncSession</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Asyncio version of <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ReversibleProxy</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.add">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_warn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an object in the <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Its state will be persisted to the database on the next flush
operation.</p>
<p>Repeated calls to <code class="docutils literal notranslate"><span class="pre">add()</span></code> will be ignored. The opposite of <code class="docutils literal notranslate"><span class="pre">add()</span></code>
is <code class="docutils literal notranslate"><span class="pre">expunge()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.add_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">add_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.add_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the given collection of instances to this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object.</p>
<p>The underlying <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will perform the
“begin” action when the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a>
object is entered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">async_session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="c1"># .. ORM transaction is begun</span></pre></div>
</div>
<p>Note that database IO will not normally occur when the session-level
transaction is begun, as database transactions begin on an
on-demand basis.  However, the begin block is async to accommodate
for a <a class="reference internal" href="../events.html#sqlalchemy.orm.SessionEvents.after_transaction_create" title="sqlalchemy.orm.SessionEvents.after_transaction_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.after_transaction_create()</span></code></a>
event hook that may perform IO.</p>
<p>For a general description of ORM begin, see
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.begin" title="sqlalchemy.orm.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object
which will begin a “nested” transaction, e.g. SAVEPOINT.</p>
<p>Behavior is the same as that of <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a>.</p>
<p>For a general description of ORM begin nested, see
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.begin_nested" title="sqlalchemy.orm.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.close">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close out the transactional resources and ORM objects used by this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
<p>This expunges all ORM objects associated with this
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>, ends any transaction in progress and
<a class="reference internal" href="../../glossary.html#term-releases"><span class="xref std std-term">releases</span></a> any <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> objects which
this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself has checked out from
associated <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncEngine" title="sqlalchemy.ext.asyncio.AsyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncEngine</span></code></a> objects. The operation then
leaves the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> in a state which it may be
used again.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a> method <strong>does not prevent
the Session from being used again</strong>. The
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> itself does not actually have a
distinct “closed” state; it merely means the
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> will release all database
connections and ORM objects.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_basics.html#session-closing"><span class="std std-ref">Closing</span></a> - detail on the semantics of
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.close" title="sqlalchemy.ext.asyncio.AsyncSession.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.close()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.close_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">async</span> <span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">close_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.close_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> sessions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.commit">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current transaction in progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.connection">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncConnection" title="sqlalchemy.ext.asyncio.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> object corresponding to
this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s transactional state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.delete">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark an instance as deleted.</p>
<p>The database delete operation occurs upon <code class="docutils literal notranslate"><span class="pre">flush()</span></code>.</p>
<p>As this operation may need to cascade along unloaded relationships,
it is awaitable to allow for those queries to take place.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘deleted’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code></p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.dirty">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">dirty</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all persistent instances considered dirty.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_mapped_object</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">dirty</span></pre></div>
</div>
<p>Instances are considered dirty when they were modified but not
deleted.</p>
<p>Note that this ‘dirty’ calculation is ‘optimistic’; most
attribute-setting or collection modification operations will
mark an instance as ‘dirty’ and place it in this set, even if
there is no net change to the attribute’s value.  At flush
time, the value of each attribute is compared to its
previously saved value, and if there’s no net change, no SQL
operation will occur (this is a more expensive operation so
it’s only done at flush time).</p>
<p>To check if an instance has actionable net changes to its
attributes, use the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.is_modified" title="sqlalchemy.orm.Session.is_modified"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.is_modified()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.execute">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a buffered
<a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expire">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expire" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire the attributes on an instance.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>Marks the attributes of an instance as out of date. When an expired
attribute is next accessed, a query will be issued to the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire all objects in the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> simultaneously,
use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code>.</p>
<p>The <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code> only makes sense for the specific
case that a non-ORM SQL statement was emitted in the current
transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.expire.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire.params.instance">¶</a> – The instance to be refreshed.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.expire.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.expire.params.attribute_names">¶</a> – optional list of string attribute names
indicating a subset of attributes to be expired.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_state_management.html#session-expire"><span class="std std-ref">Refreshing / Expiring</span></a> - introductory material</p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a></p>
<p><a class="reference internal" href="../query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expire_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expire_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expire_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Expires all persistent instances within this Session.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>When any attributes on a persistent instance is next accessed,
a query will be issued using the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire individual objects and individual attributes
on those objects, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code>.</p>
<p>The <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s default behavior is to
expire all state whenever the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code> should not be needed when
autocommit is <code class="docutils literal notranslate"><span class="pre">False</span></code>, assuming the transaction is isolated.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_state_management.html#session-expire"><span class="std std-ref">Refreshing / Expiring</span></a> - introductory material</p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a></p>
<p><a class="reference internal" href="../query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expunge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expunge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the <cite>instance</cite> from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This will free all internal references to the instance.  Cascading
will be applied according to the <em>expunge</em> cascade rule.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.expunge_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">expunge_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.expunge_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all object instances from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">expunge(obj)</span></code> on all objects in this
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.flush">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all the object changes to the database.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_existing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance based on the given primary key identifier,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_bind">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clause</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_sa_skip_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_sa_skip_for_implicit_returning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “bind” to which this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is bound.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>The “bind” is usually an instance of <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
except in the case where the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has been
explicitly bound directly to a <a class="reference internal" href="../../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>For a multiply-bound or unbound <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, the
<code class="docutils literal notranslate"><span class="pre">mapper</span></code> or <code class="docutils literal notranslate"><span class="pre">clause</span></code> arguments are used to determine the
appropriate bind to return.</p>
<p>Note that the “mapper” argument is usually present
when <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> is called via an ORM
operation such as a <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.query" title="sqlalchemy.orm.Session.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.query()</span></code></a>, each
individual INSERT/UPDATE/DELETE operation within a
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code></a>, call, etc.</p>
<p>The order of resolution is:</p>
<ol class="arabic simple">
<li><p>if mapper given and <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.params.binds" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.binds</span></code></a> is present,
locate a bind based first on the mapper in use, then
on the mapped class in use, then on any base classes that are
present in the <code class="docutils literal notranslate"><span class="pre">__mro__</span></code> of the mapped class, from more specific
superclasses to more general.</p></li>
<li><p>if clause given and <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code> is present,
locate a bind based on <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects
found in the given clause present in <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code>.</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code> is present, return that.</p></li>
<li><p>if clause given, attempt to return a bind
linked to the <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> ultimately
associated with the clause.</p></li>
<li><p>if mapper given, attempt to return a bind
linked to the <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> ultimately
associated with the <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or other
selectable to which the mapper is mapped.</p></li>
<li><p>No bind can be found, <a class="reference internal" href="../../core/exceptions.html#sqlalchemy.exc.UnboundExecutionError" title="sqlalchemy.exc.UnboundExecutionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnboundExecutionError</span></code></a>
is raised.</p></li>
</ol>
<p>Note that the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> method can be overridden on
a user-defined subclass of <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to provide any kind
of bind resolution scheme.  See the example at
<a class="reference internal" href="../persistence_techniques.html#session-custom-partitioning"><span class="std std-ref">Custom Vertical Partitioning</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.get_bind.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind.params.mapper">¶</a> – Optional <a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.mapper" title="sqlalchemy.orm.mapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapper()</span></code></a> mapped class or instance of
<a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.   The bind can be derived from a
<a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
first by consulting the “binds” map associated with this
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, and secondly by consulting the
<a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
associated with the <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> to which the
<a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
is mapped for a bind.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.get_bind.params.clause"></span><strong>clause</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.get_bind.params.clause">¶</a> – A <a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> (i.e.
<a class="reference internal" href="../../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a>,
<a class="reference internal" href="../../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>,
etc.).  If the <code class="docutils literal notranslate"><span class="pre">mapper</span></code> argument is not present or could not
produce a bind, the given expression construct will be searched
for a bound element, typically a <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
associated with
bound <a class="reference internal" href="../../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../persistence_techniques.html#session-partitioning"><span class="std std-ref">Partitioning Strategies (e.g. multiple database backends per Session)</span></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.params.binds" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.binds</span></code></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.bind_mapper" title="sqlalchemy.orm.Session.bind_mapper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_mapper()</span></code></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.bind_table" title="sqlalchemy.orm.Session.bind_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_table()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current nested transaction in progress, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object, or
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.get_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current root transaction in progress, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>an <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSessionTransaction</span></code></a> object, or
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.18.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.identity_key">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.identity_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an identity key.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <a class="reference internal" href="../mapping_api.html#sqlalchemy.orm.util.identity_key" title="sqlalchemy.orm.util.identity_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.in_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has begun a nested
transaction, e.g. SAVEPOINT.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has begun a transaction.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.is_active" title="sqlalchemy.orm.Session.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-modifiable dictionary.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>The initial value of this dictionary can be populated using the
<code class="docutils literal notranslate"><span class="pre">info</span></code> argument to the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> constructor or
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> constructor or factory methods.  The dictionary
here is always local to this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> and can be modified
independently of all other <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.is_active">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">is_active</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> not in “partial rollback” state.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> no longer begins
a new transaction immediately, so this attribute will be False
when the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is first instantiated.</p>
</div>
<p>“partial rollback” state typically indicates that the flush process
of the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has failed, and that the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a> method must be emitted in order to
fully roll back the transaction.</p>
<p>If this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is not in a transaction at all, the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will autobegin when it is first used, so in this
case <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.is_active" title="sqlalchemy.orm.Session.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></a> will return True.</p>
<p>Otherwise, if this <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is within a transaction,
and that transaction has not been rolled back internally, the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.is_active" title="sqlalchemy.orm.Session.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></a> will also return True.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../faq/sessions.html#faq-session-rollback"><span class="std std-ref">“This Session’s transaction has been rolled back due to a previous exception during flush.” (or similar)</span></a></p>
<p><a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.in_transaction" title="sqlalchemy.orm.Session.in_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">is_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_collections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given instance has locally
modified attributes.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This method retrieves the history for each instrumented
attribute on the instance and performs a comparison of the current
value to its previously committed value, if any.</p>
<p>It is in effect a more expensive and accurate
version of checking for the given instance in the
<a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a> collection; a full test for
each attribute’s net “dirty” status is performed.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">is_modified</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span></pre></div>
</div>
<p>A few caveats to this method apply:</p>
<ul>
<li><p>Instances present in the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a> collection may
report <code class="docutils literal notranslate"><span class="pre">False</span></code> when tested with this method.  This is because
the object may have received change events via attribute mutation,
thus placing it in <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a>, but ultimately the state
is the same as that loaded from the database, resulting in no net
change here.</p></li>
<li><p>Scalar attributes may not have recorded the previously set
value when a new value was applied, if the attribute was not loaded,
or was expired, at the time the new value was received - in these
cases, the attribute is assumed to have a change, even if there is
ultimately no net change against its database value. SQLAlchemy in
most cases does not need the “old” value when a set event occurs, so
it skips the expense of a SQL call if the old value isn’t present,
based on the assumption that an UPDATE of the scalar value is
usually needed, and in those few cases where it isn’t, is less
expensive on average than issuing a defensive SELECT.</p>
<p>The “old” value is fetched unconditionally upon set only if the
attribute container has the <code class="docutils literal notranslate"><span class="pre">active_history</span></code> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This flag is set typically for primary key attributes and scalar
object references that are not a simple many-to-one.  To set this
flag for any arbitrary mapped column, use the <code class="docutils literal notranslate"><span class="pre">active_history</span></code>
argument with <a class="reference internal" href="../mapping_columns.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a>.</p>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.instance">¶</a> – mapped instance to be tested for pending changes.</p></li>
<li><p><span class="target" id="sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.include_collections"></span><strong>include_collections</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.is_modified.params.include_collections">¶</a> – Indicates if multivalued collections
should be included in the operation.  Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> is a
way to detect only local-column based properties (i.e. scalar columns
or many-to-one foreign keys) that would result in an UPDATE for this
instance upon flush.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.merge">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the state of a given instance into a corresponding instance
within this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.new">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">new</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.new" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘new’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.no_autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">no_autoflush</span></span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.no_autoflush" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager that disables autoflush.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">no_autoflush</span><span class="p">:</span>

    <span class="n">some_object</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="c1"># won&#39;t autoflush</span>
    <span class="n">some_object</span><span class="o">.</span><span class="n">related_thing</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeRelated</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>Operations that proceed within the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block
will not be subject to flushes occurring upon query
access.  This is useful when initializing a series
of objects which involve existing database queries,
where the uncompleted object should not yet be flushed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.object_session">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.object_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to which an object belongs.</p>
<div class="class-bases docutils container">
<p>Proxied for the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> class on behalf of the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession" title="sqlalchemy.ext.asyncio.AsyncSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncSession</span></code></a> class.</p>
</div>
<p>This is an alias of <a class="reference internal" href="../session_api.html#sqlalchemy.orm.object_session" title="sqlalchemy.orm.object_session"><code class="xref py py-func docutils literal notranslate"><span class="pre">object_session()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.refresh">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire and refresh the attributes on the given instance.</p>
<p>A query will be issued to the database and all attributes will be
refreshed with their current database value.</p>
<p>This is the async version of the <a class="reference internal" href="../session_api.html#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a> method.
See that method for a complete description of all options.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.rollback">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the current transaction in progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.run_sync">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">run_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.run_sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke the given sync callable passing sync self as the first
argument.</p>
<p>This method maintains the asyncio event loop all the way through
to the database connection by running the given callable in a
specially instrumented greenlet.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">AsyncSession</span><span class="p">(</span><span class="n">async_engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">some_business_method</span><span class="p">)</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The provided callable is invoked inline within the asyncio event
loop, and will block on traditional IO calls.  IO within this
callable should only call into SQLAlchemy’s asyncio database
APIs which will be properly adapted to the greenlet context.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#session-run-sync"><span class="std std-ref">Running Synchronous Methods and Functions under asyncio</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.scalar">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a scalar result.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSession.stream">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSession.</span></code></a><span class="sig-name descname"><span class="pre">stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSession.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a statement and return a streaming
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncResult" title="sqlalchemy.ext.asyncio.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.ext.asyncio.</span></span><span class="sig-name descname"><span class="pre">AsyncSessionTransaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for the ORM <a class="reference internal" href="../session_api.html#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> object.</p>
<p>This object is provided so that a transaction-holding object
for the <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSession.begin" title="sqlalchemy.ext.asyncio.AsyncSession.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSession.begin()</span></code></a> may be returned.</p>
<p>The object supports both explicit calls to
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSessionTransaction.commit()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AsyncSessionTransaction.rollback()</span></code></a>, as well as use as an
async context manager.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction" title="sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.ReversibleProxy</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.base.StartableContext</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback">
<em class="property"><span class="pre">async</span> </em><em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.asyncio.AsyncSessionTransaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.asyncio.AsyncSessionTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back this <a class="reference internal" href="#sqlalchemy.ext.asyncio.AsyncTransaction" title="sqlalchemy.ext.asyncio.AsyncTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncTransaction</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="index.html" title="previous chapter">ORM Extensions</a>
        Next:
        <a href="associationproxy.html" title="next chapter">Association Proxy</a>

    <div id="docs-copyright">
        &copy; <a href="../../copyright.html">Copyright</a> 2007-2021, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 4.1.2.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '1.4.23',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../../_static/init.js"></script>


    </body>
</html>


