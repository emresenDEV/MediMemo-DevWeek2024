<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

        <title>
            
    
    Working with Engines and Connections
 &mdash;
    SQLAlchemy 1.4 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.4 Documentation" href="../index.html" />
        <link rel="up" title="Engine and Connection Use" href="engines_connections.html" />
        <link rel="next" title="Connection Pooling" href="pooling.html" />
        <link rel="prev" title="Engine Configuration" href="engines.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.4.23</span>


        | Release Date: August 18, 2021

    </div>

    <h1><a href="../index.html">SQLAlchemy 1.4 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.4 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy Core">SQLAlchemy Core</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="tutorial.html">SQL Expression Language Tutorial (1.x API)</a></span></li>
<li><span class="link-container"><a class="reference external" href="expression_api.html">SQL Statements and Expressions API</a></span></li>
<li><span class="link-container"><a class="reference external" href="schema.html">Schema Definition Language</a></span></li>
<li><span class="link-container"><a class="reference external" href="types.html">Column and Data Types</a></span></li>
<li><span class="link-container"><a class="reference external" href="engines_connections.html">Engine and Connection Use</a></span><ul>
<li><span class="link-container"><a class="reference external" href="engines.html">Engine Configuration</a></span></li>
<li class="selected"><span class="link-container"><strong>Working with Engines and Connections</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#basic-usage">Basic Usage</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-transactions">Using Transactions</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#nesting-of-transaction-blocks">Nesting of Transaction Blocks</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#arbitrary-transaction-nesting-as-an-antipattern">Arbitrary Transaction Nesting as an Antipattern</a></span></li>
<li><span class="link-container"><a class="reference external" href="#migrating-from-the-nesting-pattern">Migrating from the “nesting” pattern</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#library-level-e-g-emulated-autocommit">Library Level (e.g. emulated) Autocommit</a></span></li>
<li><span class="link-container"><a class="reference external" href="#setting-transaction-isolation-levels-including-dbapi-autocommit">Setting Transaction Isolation Levels including DBAPI Autocommit</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-server-side-cursors-a-k-a-stream-results">Using Server Side Cursors (a.k.a. stream results)</a></span></li>
<li><span class="link-container"><a class="reference external" href="#connectionless-execution-implicit-execution">Connectionless Execution, Implicit Execution</a></span></li>
<li><span class="link-container"><a class="reference external" href="#translation-of-schema-names">Translation of Schema Names</a></span></li>
<li><span class="link-container"><a class="reference external" href="#sql-compilation-caching">SQL Compilation Caching</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#configuration">Configuration</a></span></li>
<li><span class="link-container"><a class="reference external" href="#estimating-cache-performance-using-logging">Estimating Cache Performance Using Logging</a></span></li>
<li><span class="link-container"><a class="reference external" href="#how-much-memory-does-the-cache-use">How much memory does the cache use?</a></span></li>
<li><span class="link-container"><a class="reference external" href="#disabling-or-using-an-alternate-dictionary-to-cache-some-or-all-statements">Disabling or using an alternate dictionary to cache some (or all) statements</a></span></li>
<li><span class="link-container"><a class="reference external" href="#caching-for-third-party-dialects">Caching for Third Party Dialects</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-lambdas-to-add-significant-speed-gains-to-statement-production">Using Lambdas to add significant speed gains to statement production</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#synopsis">Synopsis</a></span></li>
<li><span class="link-container"><a class="reference external" href="#quick-guidelines-for-lambdas">Quick Guidelines for Lambdas</a></span></li>
<li><span class="link-container"><a class="reference external" href="#cache-key-generation">Cache Key Generation</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#engine-disposal">Engine Disposal</a></span></li>
<li><span class="link-container"><a class="reference external" href="#working-with-driver-sql-and-raw-dbapi-connections">Working with Driver SQL and Raw DBAPI Connections</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#invoking-sql-strings-directly-to-the-driver">Invoking SQL strings directly to the driver</a></span></li>
<li><span class="link-container"><a class="reference external" href="#working-with-the-dbapi-cursor-directly">Working with the DBAPI cursor directly</a></span></li>
<li><span class="link-container"><a class="reference external" href="#calling-stored-procedures">Calling Stored Procedures</a></span></li>
<li><span class="link-container"><a class="reference external" href="#multiple-result-sets">Multiple Result Sets</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#registering-new-dialects">Registering New Dialects</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#registering-dialects-in-process">Registering Dialects In-Process</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#connection-engine-api">Connection / Engine API</a></span></li>
<li><span class="link-container"><a class="reference external" href="#result-set-api">Result Set  API</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="pooling.html">Connection Pooling</a></span></li>
<li><span class="link-container"><a class="reference external" href="events.html">Core Events</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="api_basics.html">Core API Basics</a></span></li>
<li><span class="link-container"><a class="reference external" href="future.html">SQLAlchemy 2.0 Future (Core)</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar core-connections" >
        
<section id="module-sqlalchemy.engine">
<span id="working-with-engines-and-connections"></span><span id="connections-toplevel"></span><h1>Working with Engines and Connections<a class="headerlink" href="#module-sqlalchemy.engine" title="Permalink to this headline">¶</a></h1>
<p>This section details direct usage of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, and related objects. Its important to note that when
using the SQLAlchemy ORM, these objects are not generally accessed; instead,
the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object is used as the interface to the database.
However, for applications that are built around direct usage of textual SQL
statements and/or SQL expression constructs without involvement by the ORM’s
higher level management services, the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> are king (and queen?) - read on.</p>
<section id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>Recall from <a class="reference internal" href="engines.html"><span class="doc">Engine Configuration</span></a> that an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is created via
the <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;mysql://scott:tiger@localhost/test&#39;</span><span class="p">)</span></pre></div>
</div>
<p>The typical usage of <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> is once per particular database
URL, held globally for the lifetime of a single application process. A single
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> manages many individual <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a> connections on behalf of
the process and is intended to be called upon in a concurrent fashion. The
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is <strong>not</strong> synonymous to the DBAPI <code class="docutils literal notranslate"><span class="pre">connect</span></code> function, which
represents just one connection resource - the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is most
efficient when created just once at the module level of an application, not
per-object or per-function call.</p>
<aside class="sidebar">
<p class="sidebar-title">tip</p>
<p>When using an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> with multiple Python processes, such as when
using <code class="docutils literal notranslate"><span class="pre">os.fork</span></code> or Python <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code>, it’s important that the
engine is initialized per process.  See <a class="reference internal" href="pooling.html#pooling-multiprocessing"><span class="std std-ref">Using Connection Pools with Multiprocessing or os.fork()</span></a> for
details.</p>
</aside>
<p>The most basic function of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is to provide access to a
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, which can then invoke SQL statements.   To emit
a textual statement to the database looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select username from users&quot;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;username:&quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span></pre></div>
</div>
<p>Above, the <a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> method returns a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
object, and by using it in a Python context manager (e.g. the <code class="docutils literal notranslate"><span class="pre">with:</span></code>
statement) the <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a> method is automatically invoked at the
end of the block.  The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, is a <strong>proxy</strong> object for an
actual DBAPI connection. The DBAPI connection is retrieved from the connection
pool at the point at which <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is created.</p>
<p>The object returned is known as <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>, which
references a DBAPI cursor and provides methods for fetching rows
similar to that of the DBAPI cursor.   The DBAPI cursor will be closed
by the <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> when all of its result rows (if any) are
exhausted.  A <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> that returns no rows, such as that of
an UPDATE statement (without any returned rows),
releases cursor resources immediately upon construction.</p>
<p>When the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is closed at the end of the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block, the
referenced DBAPI connection is <a class="reference internal" href="../glossary.html#term-released"><span class="xref std std-term">released</span></a> to the connection pool.   From
the perspective of the database itself, the connection pool will not actually
“close” the connection assuming the pool has room to store this connection  for
the next use.  When the connection is returned to the pool for re-use, the
pooling mechanism issues a <code class="docutils literal notranslate"><span class="pre">rollback()</span></code> call on the DBAPI connection so that
any transactional state or locks are removed, and the connection is ready for
its next use.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.0: </span>The <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> object is replaced in SQLAlchemy
2.0 with a newly refined object known as <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code>.</p>
</div>
<p>Our example above illustrated the execution of a textual SQL string, which
should be invoked by using the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct to indicate that
we’d like to use textual SQL.  The <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method can of
course accommodate more than that, including the variety of SQL expression
constructs described in <a class="reference internal" href="tutorial.html"><span class="std std-ref">SQL Expression Language Tutorial (1.x API)</span></a>.</p>
</section>
<section id="using-transactions">
<h2>Using Transactions<a class="headerlink" href="#using-transactions" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section describes how to use transactions when working directly
with <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects. When using the
SQLAlchemy ORM, the public API for transaction control is via the
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object, which makes usage of the <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
object internally. See <a class="reference internal" href="../orm/session_transaction.html#unitofwork-transaction"><span class="std std-ref">Managing Transactions</span></a> for further
information.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object provides a <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>
method which returns a <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object.  Like the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
itself, this object is usually used within a Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> block so
that its scope is managed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some data&quot;</span><span class="p">})</span></pre></div>
</div>
<p>The above block can be stated more simply by using the <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a>
method of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># runs a transaction</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="s2">&quot;this is some data&quot;</span><span class="p">})</span></pre></div>
</div>
<p>The block managed by each <code class="docutils literal notranslate"><span class="pre">.begin()</span></code> method has the behavior such that
the transaction is committed when the block completes.   If an exception is
raised, the transaction is instead rolled back, and the exception propagated
outwards.</p>
<p>The underlying object used to represent the transaction is the
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object.  This object is returned by the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method and includes the methods
<a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a>.   The context
manager calling form, which invokes these methods automatically, is recommended
as a best practice.</p>
<section id="nesting-of-transaction-blocks">
<span id="connections-nested-transactions"></span><h3>Nesting of Transaction Blocks<a class="headerlink" href="#nesting-of-transaction-blocks" title="Permalink to this headline">¶</a></h3>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The “transaction nesting” feature of SQLAlchemy is a legacy feature
that is deprecated in the 1.4 release and will be removed in SQLAlchemy 2.0.
The pattern has proven to be a little too awkward and complicated, unless an
application makes more of a first-class framework around the behavior.  See
the following subsection <a class="reference internal" href="#connections-avoid-nesting"><span class="std std-ref">Arbitrary Transaction Nesting as an Antipattern</span></a>.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object also handles “nested” behavior by keeping
track of the outermost begin/commit pair. In this example, two functions both
issue a transaction on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, but only the outermost
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object actually takes effect when it is committed.</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="c1"># method_a starts a transaction and calls method_b</span>
<span class="k">def</span> <span class="nf">method_a</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>  <span class="c1"># open a transaction</span>
        <span class="n">method_b</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>

<span class="c1"># method_b also starts a transaction</span>
<span class="k">def</span> <span class="nf">method_b</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span> <span class="c1"># open a transaction - this runs in the</span>
                             <span class="c1"># context of method_a&#39;s transaction</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into mytable values (&#39;bat&#39;, &#39;lala&#39;)&quot;</span><span class="p">))</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">mytable</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="s2">&quot;bat&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="s2">&quot;lala&quot;</span><span class="p">})</span>

<span class="c1"># open a Connection and call method_a</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">method_a</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span></pre></div>
</div>
<p>Above, <code class="docutils literal notranslate"><span class="pre">method_a</span></code> is called first, which calls <code class="docutils literal notranslate"><span class="pre">connection.begin()</span></code>. Then
it calls <code class="docutils literal notranslate"><span class="pre">method_b</span></code>. When <code class="docutils literal notranslate"><span class="pre">method_b</span></code> calls <code class="docutils literal notranslate"><span class="pre">connection.begin()</span></code>, it just
increments a counter that is decremented when it calls <code class="docutils literal notranslate"><span class="pre">commit()</span></code>. If either
<code class="docutils literal notranslate"><span class="pre">method_a</span></code> or <code class="docutils literal notranslate"><span class="pre">method_b</span></code> calls <code class="docutils literal notranslate"><span class="pre">rollback()</span></code>, the whole transaction is
rolled back. The transaction is not committed until <code class="docutils literal notranslate"><span class="pre">method_a</span></code> calls the
<code class="docutils literal notranslate"><span class="pre">commit()</span></code> method. This “nesting” behavior allows the creation of functions
which “guarantee” that a transaction will be used if one was not already
available, but will automatically participate in an enclosing transaction if
one exists.</p>
<section id="arbitrary-transaction-nesting-as-an-antipattern">
<span id="connections-avoid-nesting"></span><h4>Arbitrary Transaction Nesting as an Antipattern<a class="headerlink" href="#arbitrary-transaction-nesting-as-an-antipattern" title="Permalink to this headline">¶</a></h4>
<p>With many years of experience, the above “nesting” pattern has not proven to
be very popular, and where it has been observed in large projects such
as Openstack, it tends to be complicated.</p>
<p>The most ideal way to organize an application would have a single, or at
least very few, points at which the “beginning” and “commit” of all
database transactions is demarcated.   This is also the general
idea discussed in terms of the ORM at <a class="reference internal" href="../orm/session_basics.html#session-faq-whentocreate"><span class="std std-ref">When do I construct a Session, when do I commit it, and when do I close it?</span></a>.  To
adapt the example from the previous section to this practice looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># method_a calls method_b</span>
<span class="k">def</span> <span class="nf">method_a</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="n">method_b</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>

<span class="c1"># method_b uses the connection and assumes the transaction</span>
<span class="c1"># is external</span>
<span class="k">def</span> <span class="nf">method_b</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into mytable values (&#39;bat&#39;, &#39;lala&#39;)&quot;</span><span class="p">))</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">mytable</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="s2">&quot;bat&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="s2">&quot;lala&quot;</span><span class="p">})</span>

<span class="c1"># open a Connection inside of a transaction and call method_a</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">method_a</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span></pre></div>
</div>
<p>That is, <code class="docutils literal notranslate"><span class="pre">method_a()</span></code> and <code class="docutils literal notranslate"><span class="pre">method_b()</span></code> do not deal with the details
of the transaction at all; the transactional scope of the connection is
defined <strong>externally</strong> to the functions that have a SQL dialogue with the
connection.</p>
<p>It may be observed that the above code has fewer lines, and less indentation
which tends to correlate with lower <a class="reference internal" href="../glossary.html#term-cyclomatic-complexity"><span class="xref std std-term">cyclomatic complexity</span></a>.   The
above code is organized such that <code class="docutils literal notranslate"><span class="pre">method_a()</span></code> and <code class="docutils literal notranslate"><span class="pre">method_b()</span></code> are always
invoked from a point at which a transaction is begun.  The previous
version of the example features a <code class="docutils literal notranslate"><span class="pre">method_a()</span></code> and a <code class="docutils literal notranslate"><span class="pre">method_b()</span></code> that are
trying to be agnostic of this fact, which suggests they are prepared for
at least twice as many potential codepaths through them.</p>
</section>
<section id="migrating-from-the-nesting-pattern">
<span id="connections-subtransactions"></span><h4>Migrating from the “nesting” pattern<a class="headerlink" href="#migrating-from-the-nesting-pattern" title="Permalink to this headline">¶</a></h4>
<p>As SQLAlchemy’s intrinsic-nested pattern is considered legacy, an application
that for either legacy or novel reasons still seeks to have a context that
automatically frames transactions should seek to maintain this functionality
through the use of a custom Python context manager.  A similar example is also
provided in terms of the ORM in the “seealso” section below.</p>
<p>To provide backwards compatibility for applications that make use of this
pattern, the following context manager or a similar implementation based on
a decorator may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">contextlib</span>

<span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
<span class="k">def</span> <span class="nf">transaction</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">connection</span><span class="o">.</span><span class="n">in_transaction</span><span class="p">():</span>
        <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
            <span class="k">yield</span> <span class="n">connection</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">connection</span></pre></div>
</div>
<p>The above contextmanager would be used as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># method_a starts a transaction and calls method_b</span>
<span class="k">def</span> <span class="nf">method_a</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>  <span class="c1"># open a transaction</span>
        <span class="n">method_b</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>

<span class="c1"># method_b either starts a transaction, or uses the one already</span>
<span class="c1"># present</span>
<span class="k">def</span> <span class="nf">method_b</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>  <span class="c1"># open a transaction</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into mytable values (&#39;bat&#39;, &#39;lala&#39;)&quot;</span><span class="p">))</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">mytable</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="s2">&quot;bat&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="s2">&quot;lala&quot;</span><span class="p">})</span>

<span class="c1"># open a Connection and call method_a</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">method_a</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span></pre></div>
</div>
<p>A similar approach may be taken such that connectivity is established
on demand as well; the below approach features a single-use context manager
that accesses an enclosing state in order to test if connectivity is already
present:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">contextlib</span>

<span class="k">def</span> <span class="nf">connectivity</span><span class="p">(</span><span class="n">engine</span><span class="p">):</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
    <span class="k">def</span> <span class="nf">connect</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">connection</span>

        <span class="k">if</span> <span class="n">connection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">connection</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
                    <span class="k">yield</span> <span class="n">connection</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">connection</span>

    <span class="k">return</span> <span class="n">connect</span></pre></div>
</div>
<p>Using the above would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># method_a passes along connectivity context, at the same time</span>
<span class="c1"># it chooses to establish a connection by calling &quot;with&quot;</span>
<span class="k">def</span> <span class="nf">method_a</span><span class="p">(</span><span class="n">connectivity</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">connectivity</span><span class="p">():</span>
        <span class="n">method_b</span><span class="p">(</span><span class="n">connectivity</span><span class="p">)</span>

<span class="c1"># method_b also wants to use a connection from the context, so it</span>
<span class="c1"># also calls &quot;with:&quot;, but also it actually uses the connection.</span>
<span class="k">def</span> <span class="nf">method_b</span><span class="p">(</span><span class="n">connectivity</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">connectivity</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into mytable values (&#39;bat&#39;, &#39;lala&#39;)&quot;</span><span class="p">))</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">mytable</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="s2">&quot;bat&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="s2">&quot;lala&quot;</span><span class="p">})</span>

<span class="c1"># create a new connection/transaction context object and call</span>
<span class="c1"># method_a</span>
<span class="n">method_a</span><span class="p">(</span><span class="n">connectivity</span><span class="p">(</span><span class="n">engine</span><span class="p">))</span></pre></div>
</div>
<p>The above context manager acts not only as a “transaction” context but also
as a context that manages having an open connection against a particular
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.   When using the ORM <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, this
connectivty management is provided by the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> itself.
An overview of ORM connectivity patterns is at <a class="reference internal" href="../orm/session_transaction.html#unitofwork-transaction"><span class="std std-ref">Managing Transactions</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_transaction.html#session-subtransactions"><span class="std std-ref">Migrating from the “subtransaction” pattern</span></a> - ORM version</p>
</div>
</section>
</section>
</section>
<section id="library-level-e-g-emulated-autocommit">
<span id="autocommit"></span><h2>Library Level (e.g. emulated) Autocommit<a class="headerlink" href="#library-level-e-g-emulated-autocommit" title="Permalink to this headline">¶</a></h2>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The “autocommit” feature of SQLAlchemy Core is deprecated
and will not be present in version 2.0 of SQLAlchemy.   DBAPI-level
AUTOCOMMIT is now widely available which offers superior performance
and occurs transparently.  See <a class="reference internal" href="../changelog/migration_20.html#migration-20-autocommit"><span class="std std-ref">Library-level (but not driver level) “Autocommit” removed from both Core and ORM</span></a> for background.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section discusses the feature within SQLAlchemy that automatically
invokes the <code class="docutils literal notranslate"><span class="pre">.commit()</span></code> method on a DBAPI connection, however this is against
a DBAPI connection that <strong>is itself transactional</strong>.  For true AUTOCOMMIT,
see the next section <a class="reference internal" href="#dbapi-autocommit"><span class="std std-ref">Setting Transaction Isolation Levels including DBAPI Autocommit</span></a>.</p>
</div>
<p>The previous transaction example illustrates how to use <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
so that several executions can take part in the same transaction. What happens
when we issue an INSERT, UPDATE or DELETE call without using
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>?  While some DBAPI
implementations provide various special “non-transactional” modes, the core
behavior of DBAPI per PEP-0249 is that a <em>transaction is always in progress</em>,
providing only <code class="docutils literal notranslate"><span class="pre">rollback()</span></code> and <code class="docutils literal notranslate"><span class="pre">commit()</span></code> methods but no <code class="docutils literal notranslate"><span class="pre">begin()</span></code>.
SQLAlchemy assumes this is the case for any given DBAPI.</p>
<p>Given this requirement, SQLAlchemy implements its own “autocommit” feature which
works completely consistently across all backends. This is achieved by
detecting statements which represent data-changing operations, i.e. INSERT,
UPDATE, DELETE, as well as data definition language (DDL) statements such as
CREATE TABLE, ALTER TABLE, and then issuing a COMMIT automatically if no
transaction is in progress. The detection is based on the presence of the
<code class="docutils literal notranslate"><span class="pre">autocommit=True</span></code> execution option on the statement.   If the statement
is a text-only statement and the flag is not set, a regular expression is used
to detect INSERT, UPDATE, DELETE, as well as a variety of other commands
for a particular backend:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;INSERT INTO users VALUES (1, &#39;john&#39;)&quot;</span><span class="p">))</span>  <span class="c1"># autocommits</span></pre></div>
</div>
<p>The “autocommit” feature is only in effect when no <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> has
otherwise been declared.   This means the feature is not generally used with
the ORM, as the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object by default always maintains an
ongoing <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>Full control of the “autocommit” behavior is available using the generative
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a> method provided on <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
and <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, using the “autocommit” flag which will
turn on or off the autocommit for the selected scope. For example, a
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct representing a stored procedure that commits might use
it so that a SELECT statement will issue a COMMIT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT my_mutating_procedure()&quot;</span><span class="p">))</span></pre></div>
</div>
</section>
<section id="setting-transaction-isolation-levels-including-dbapi-autocommit">
<span id="dbapi-autocommit"></span><h2>Setting Transaction Isolation Levels including DBAPI Autocommit<a class="headerlink" href="#setting-transaction-isolation-levels-including-dbapi-autocommit" title="Permalink to this headline">¶</a></h2>
<p>Most DBAPIs support the concept of configurable transaction <a class="reference internal" href="../glossary.html#term-isolation"><span class="xref std std-term">isolation</span></a> levels.
These are traditionally the four levels “READ UNCOMMITTED”, “READ COMMITTED”,
“REPEATABLE READ” and “SERIALIZABLE”.  These are usually applied to a
DBAPI connection before it begins a new transaction, noting that most
DBAPIs will begin this transaction implicitly when SQL statements are first
emitted.</p>
<p>DBAPIs that support isolation levels also usually support the concept of true
“autocommit”, which means that the DBAPI connection itself will be placed into
a non-transactional autocommit mode.   This usually means that the typical
DBAPI behavior of emitting “BEGIN” to the database automatically no longer
occurs, but it may also include other directives.   When using this mode,
<strong>the DBAPI does not use a transaction under any circumstances</strong>.  SQLAlchemy
methods like <code class="docutils literal notranslate"><span class="pre">.begin()</span></code>, <code class="docutils literal notranslate"><span class="pre">.commit()</span></code> and <code class="docutils literal notranslate"><span class="pre">.rollback()</span></code> pass silently
and have no effect.</p>
<p>Instead, each statement invoked upon the connection will commit any changes
automatically; it sometimes also means that the connection itself will use
fewer server-side database resources. For this reason and others, “autocommit”
mode is often desirable for non-transactional applications that need to read
individual tables or rows outside the scope of a true ACID transaction.</p>
<p>SQLAlchemy dialects should support these isolation levels as well as autocommit
to as great a degree as possible.   The levels are set via family of
“execution_options” parameters and methods that are throughout the Core, such
as the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a> method.   The parameter is
known as <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a> and
the values are strings which are typically a subset of the following names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># possible values for Connection.execution_options(isolation_level=&quot;&lt;value&gt;&quot;)</span>

<span class="s2">&quot;AUTOCOMMIT&quot;</span>
<span class="s2">&quot;READ COMMITTED&quot;</span>
<span class="s2">&quot;READ UNCOMMITTED&quot;</span>
<span class="s2">&quot;REPEATABLE READ&quot;</span>
<span class="s2">&quot;SERIALIZABLE&quot;</span></pre></div>
</div>
<p>Not every DBAPI supports every value; if an unsupported value is used for a
certain backend, an error is raised.</p>
<p>For example, to force REPEATABLE READ on a specific connection, then
begin a transaction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;REPEATABLE READ&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">&lt;</span><span class="n">statement</span><span class="o">&gt;</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a> option may
also be set engine wide, as is often preferable.  This is achieved by
passing it within the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.execution_options" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.execution_options</span></code></a>
parameter to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">eng</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
    <span class="n">execution_options</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;isolation_level&quot;</span><span class="p">:</span> <span class="s2">&quot;REPEATABLE READ&quot;</span>
    <span class="p">}</span>
<span class="p">)</span></pre></div>
</div>
<p>With the above setting, the DBAPI connection will be set to use a
<code class="docutils literal notranslate"><span class="pre">&quot;REPEATABLE</span> <span class="pre">READ&quot;</span></code> isolation level setting for each new transaction
begun.</p>
<p>An application that frequently chooses to run operations within different
isolation levels may wish to create multiple “sub-engines” of a lead
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, each of which will be configured to a different
isolation level.  One such use case is an application that has operations
that break into “transactional” and “read-only” operations, a separate
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> that makes use of <code class="docutils literal notranslate"><span class="pre">&quot;AUTOCOMMIT&quot;</span></code> may be
separated off from the main engine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">eng</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">)</span>

<span class="n">autocommit_engine</span> <span class="o">=</span> <span class="n">eng</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;AUTOCOMMIT&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Above, the <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a> method creates a shallow
copy of the original <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.  Both <code class="docutils literal notranslate"><span class="pre">eng</span></code> and
<code class="docutils literal notranslate"><span class="pre">autocommit_engine</span></code> share the same dialect and connection pool.  However, the
“AUTOCOMMIT” mode will be set upon connections when they are acquired from the
<code class="docutils literal notranslate"><span class="pre">autocommit_engine</span></code>.</p>
<p>The isolation level setting, regardless of which one it is, is unconditionally
reverted when a connection is returned to the connection pool.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
parameter necessarily does not apply to statement level options, such as
that of <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a>.  This because the option
must be set on a DBAPI connection on a per-transaction basis.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/sqlite.html#sqlite-isolation-level"><span class="std std-ref">SQLite Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/postgresql.html#postgresql-isolation-level"><span class="std std-ref">PostgreSQL Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/mysql.html#mysql-isolation-level"><span class="std std-ref">MySQL Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/mssql.html#mssql-isolation-level"><span class="std std-ref">SQL Server Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../orm/session_transaction.html#session-transaction-isolation"><span class="std std-ref">Setting Transaction Isolation Levels / DBAPI AUTOCOMMIT</span></a> - for the ORM</p>
<p><a class="reference internal" href="../faq/connections.html#faq-execute-retry-autocommit"><span class="std std-ref">Using DBAPI Autocommit Allows for a Readonly Version of Transparent Reconnect</span></a> - a recipe that uses DBAPI autocommit
to transparently reconnect to the database for read-only operations</p>
</div>
</section>
<section id="using-server-side-cursors-a-k-a-stream-results">
<span id="engine-stream-results"></span><h2>Using Server Side Cursors (a.k.a. stream results)<a class="headerlink" href="#using-server-side-cursors-a-k-a-stream-results" title="Permalink to this headline">¶</a></h2>
<p>A limited number of dialects have explicit support for the concept of “server
side cursors” vs. “buffered cursors”.    While a server side cursor implies a
variety of different capabilities, within SQLAlchemy’s engine and dialect
implementation, it refers only to whether or not a particular set of results is
fully buffered in memory before they are fetched from the cursor, using a
method such as <code class="docutils literal notranslate"><span class="pre">cursor.fetchall()</span></code>.   SQLAlchemy has no direct support
for cursor behaviors such as scrolling; to make use of these features for
a particular DBAPI, use the cursor directly as documented at
<a class="reference internal" href="#dbapi-connections"><span class="std std-ref">Working with Driver SQL and Raw DBAPI Connections</span></a>.</p>
<p>Some DBAPIs, such as the cx_Oracle DBAPI, exclusively use server side cursors
internally.  All result sets are essentially unbuffered across the total span
of a result set, utilizing only a smaller buffer that is of a fixed size such
as 100 rows at a time.</p>
<p>For those dialects that have conditional support for buffered or unbuffered
results, there are usually caveats to the use of the “unbuffered”, or server
side cursor mode.   When using the psycopg2 dialect for example, an error is
raised if a server side cursor is used with any kind of DML or DDL statement.
When using MySQL drivers with a server side cursor, the DBAPI connection is in
a more fragile state and does not recover as gracefully from error conditions
nor will it allow a rollback to proceed until the cursor is fully closed.</p>
<p>For this reason, SQLAlchemy’s dialects will always default to the less error
prone version of a cursor, which means for PostgreSQL and MySQL dialects
it defaults to a buffered, “client side” cursor where the full set of results
is pulled into memory before any fetch methods are called from the cursor.
This mode of operation is appropriate in the <strong>vast majority</strong> of cases;
unbuffered cursors are not generally useful except in the uncommon case
of an application fetching a very large number of rows in chunks, where
the processing of these rows can be complete before more rows are fetched.</p>
<p>To make use of a server side cursor for a particular execution, the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> option
is used, which may be called on the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object,
on the statement object, or in the ORM-level contexts mentioned below.</p>
<p>When using this option for a statement, it’s usually appropriate to use
a method like <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> to work on small sections
of the result set at a time, while also fetching enough rows for each
pull so that the operation is efficient:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">stream_results</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select * from table&quot;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">_process_rows</span><span class="p">(</span><span class="n">partition</span><span class="p">)</span></pre></div>
</div>
<p>If the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> is iterated directly, rows are fetched internally
using a default buffering scheme that buffers first a small set of rows,
then a larger and larger buffer on each fetch up to a pre-configured limit
of 1000 rows.   This can be affected using the <code class="docutils literal notranslate"><span class="pre">max_row_buffer</span></code> execution
option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">stream_results</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">max_row_buffer</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select * from table&quot;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">_process_row</span><span class="p">(</span><span class="n">row</span><span class="p">)</span></pre></div>
</div>
<p>The size of the buffer may also be set to a fixed size using the
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method.  Calling this method with a number
of rows will cause all result-fetching methods to work from
buffers of the given size, only fetching new rows when the buffer is empty:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">stream_results</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select * from table&quot;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">yield_per</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">_process_row</span><span class="p">(</span><span class="n">row</span><span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">stream_results</span></code> option is also available with the ORM.  When using the
ORM, either the <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>
methods should be used to set the number of ORM rows to be buffered each time
while yielding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">orm</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">User_id</span><span class="p">)</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">stream_results</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">partitions</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">_process_rows</span><span class="p">(</span><span class="n">partition</span><span class="p">)</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ORM result sets currently must make use of <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a>
or <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> in order to achieve streaming ORM results.
If either of these methods are not used to set the number of rows to
fetch before yielding, the entire result is fetched before rows are yielded.
This may change in a future release so that the automatic buffer size used
by <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> takes place for ORM results as well.</p>
</div>
<p>When using a <a class="reference internal" href="../glossary.html#term-1.x-style"><span class="xref std std-term">1.x style</span></a> ORM query with <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>, yield_per is
available via <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.Query.yield_per" title="sqlalchemy.orm.Query.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.yield_per()</span></code></a> - this also sets the <code class="docutils literal notranslate"><span class="pre">stream_results</span></code>
execution option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">yield_per</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="c1"># process row</span></pre></div>
</div>
</section>
<section id="connectionless-execution-implicit-execution">
<span id="dbengine-implicit"></span><h2>Connectionless Execution, Implicit Execution<a class="headerlink" href="#connectionless-execution-implicit-execution" title="Permalink to this headline">¶</a></h2>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.0: </span>The features of “connectionless” and “implicit” execution
in SQLAlchemy are deprecated and will be removed in version 2.0.  See
<a class="reference internal" href="../changelog/migration_20.html#migration-20-implicit-execution"><span class="std std-ref">“Implicit” and “Connectionless” execution, “bound metadata” removed</span></a> for background.</p>
</div>
<p>Recall from the first section we mentioned executing with and without explicit
usage of <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>. “Connectionless” execution
refers to the usage of the <code class="docutils literal notranslate"><span class="pre">execute()</span></code> method on an object
which is not a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.  This was illustrated using the
<a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execute()</span></code></a> method of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select username from users&quot;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;username:&quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span></pre></div>
</div>
<p>In addition to “connectionless” execution, it is also possible
to use the <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execute()</span></code></a> method of
any <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a> construct, which is a marker for SQL expression objects
that support execution.   The SQL expression object itself references an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> known as the <strong>bind</strong>, which it uses
in order to provide so-called “implicit” execution services.</p>
<p>Given a table as below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span>

<span class="n">meta</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">users_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
<span class="p">)</span></pre></div>
</div>
<p>Explicit execution delivers the SQL text or constructed SQL expression to the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method of <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>:</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///file.db&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># ....</span></pre></div>
</div>
<p>Explicit, connectionless execution delivers the expression to the
<a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execute()</span></code></a> method of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>:</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///file.db&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="c1"># ....</span>
<span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
<p>Implicit execution is also connectionless, and makes usage of the <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execute()</span></code></a> method
on the expression itself.   This method is provided as part of the
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a> class, which refers to a SQL statement that is sufficient
for being invoked against the database.    The method makes usage of
the assumption that either an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> has been <strong>bound</strong> to the expression
object.   By “bound” we mean that the special attribute <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.bind" title="sqlalchemy.schema.MetaData.bind"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MetaData.bind</span></code></a>
has been used to associate a series of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects and all SQL constructs derived from them with a specific
engine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///file.db&#39;</span><span class="p">)</span>
<span class="n">meta</span><span class="o">.</span><span class="n">bind</span> <span class="o">=</span> <span class="n">engine</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">users_table</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="c1"># ....</span>
<span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
<p>Above, we associate an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> with a <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> object using
the special attribute <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.bind" title="sqlalchemy.schema.MetaData.bind"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MetaData.bind</span></code></a>.  The <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> construct produced
from the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object has a method <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execute()</span></code></a>, which will
search for an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> that’s “bound” to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<p>Overall, the usage of “bound metadata” has three general effects:</p>
<ul class="simple">
<li><p>SQL statement objects gain an <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execute()</span></code></a> method which automatically
locates a “bind” with which to execute themselves.</p></li>
<li><p>The ORM <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object supports using “bound metadata” in order
to establish which <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> should be used to invoke SQL statements
on behalf of a particular mapped class, though the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
also features its own explicit system of establishing complex <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>/
mapped class configurations.</p></li>
<li><p>The <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.create" title="sqlalchemy.schema.Table.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.create()</span></code></a>,
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.drop" title="sqlalchemy.schema.Table.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.drop()</span></code></a>, and “autoload” features all make usage of the bound
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> automatically without the need to pass it explicitly.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The concepts of “bound metadata” and “implicit execution” are not emphasized in modern SQLAlchemy.
While they offer some convenience, they are no longer required by any API and
are never necessary.</p>
<p>In applications where multiple <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects are present, each one logically associated
with a certain set of tables (i.e. <em>vertical sharding</em>), the “bound metadata” technique can be used
so that individual <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> can refer to the appropriate <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> automatically;
in particular this is supported within the ORM via the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object
as a means to associate <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects with an appropriate <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
as an alternative to using the bind arguments accepted directly by the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p>However, the “implicit execution” technique is not at all appropriate for use with the
ORM, as it bypasses the transactional context maintained by the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p>Overall, in the <em>vast majority</em> of cases, “bound metadata” and “implicit execution”
are <strong>not useful</strong>.   While “bound metadata” has a marginal level of usefulness with regards to
ORM configuration, “implicit execution” is a very old usage pattern that in most
cases is more confusing than it is helpful, and its usage is discouraged.
Both patterns seem to encourage the overuse of expedient “short cuts” in application design
which lead to problems later on.</p>
<p>Modern SQLAlchemy usage, especially the ORM, places a heavy stress on working within the context
of a transaction at all times; the “implicit execution” concept makes the job of
associating statement execution with a particular transaction much more difficult.
The <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execute()</span></code></a> method on a particular SQL statement
usually implies that the execution is not part of any particular transaction, which is
usually not the desired effect.</p>
</div>
<p>In both “connectionless” examples, the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is created behind the scenes; the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> returned by the <code class="docutils literal notranslate"><span class="pre">execute()</span></code>
call references the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> used to issue
the SQL statement. When the <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> is closed, the underlying
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is closed for us, resulting in the
DBAPI connection being returned to the pool with transactional resources removed.</p>
</section>
<section id="translation-of-schema-names">
<span id="schema-translating"></span><h2>Translation of Schema Names<a class="headerlink" href="#translation-of-schema-names" title="Permalink to this headline">¶</a></h2>
<p>To support multi-tenancy applications that distribute common sets of tables
into multiple schemas, the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a>
execution option may be used to repurpose a set of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects
to render under different schema names without any changes.</p>
<p>Given a table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
<span class="p">)</span></pre></div>
</div>
<p>The “schema” of this <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> as defined by the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a> attribute is <code class="docutils literal notranslate"><span class="pre">None</span></code>.  The
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a> can specify
that all <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects with a schema of <code class="docutils literal notranslate"><span class="pre">None</span></code> would instead
render the schema as <code class="docutils literal notranslate"><span class="pre">user_schema_one</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span>
    <span class="n">schema_translate_map</span><span class="o">=</span><span class="p">{</span><span class="kc">None</span><span class="p">:</span> <span class="s2">&quot;user_schema_one&quot;</span><span class="p">})</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span></pre></div>
</div>
<p>The above code will invoke SQL on the database of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">user_schema_one</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user_schema_one</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="n">FROM</span>
<span class="n">user_schema_one</span><span class="o">.</span><span class="n">user</span></pre></div>
</div>
<p>That is, the schema name is substituted with our translated name.  The
map can specify any number of target-&gt;destination schemas:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span>
    <span class="n">schema_translate_map</span><span class="o">=</span><span class="p">{</span>
        <span class="kc">None</span><span class="p">:</span> <span class="s2">&quot;user_schema_one&quot;</span><span class="p">,</span>     <span class="c1"># no schema name -&gt; &quot;user_schema_one&quot;</span>
        <span class="s2">&quot;special&quot;</span><span class="p">:</span> <span class="s2">&quot;special_schema&quot;</span><span class="p">,</span> <span class="c1"># schema=&quot;special&quot; becomes &quot;special_schema&quot;</span>
        <span class="s2">&quot;public&quot;</span><span class="p">:</span> <span class="kc">None</span>               <span class="c1"># Table objects with schema=&quot;public&quot; will render with no schema</span>
    <span class="p">})</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a> parameter
affects all DDL and SQL constructs generated from the SQL expression language,
as derived from the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> objects.
It does <strong>not</strong> impact literal string SQL used via the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>
construct nor via plain strings passed to <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>.</p>
<p>The feature takes effect <strong>only</strong> in those cases where the name of the
schema is derived directly from that of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>;
it does not impact methods where a string schema name is passed directly.
By this pattern, it takes effect within the “can create” / “can drop” checks
performed by methods such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a> or
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code></a> are called, and it takes effect when
using table reflection given a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object.  However it does
<strong>not</strong> affect the operations present on the <a class="reference internal" href="reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Inspector</span></code></a> object,
as the schema name is passed to these methods explicitly.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To use the schema translation feature with the ORM <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>,
set this option at the level of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, then pass that engine
to the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.  The <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> uses a new
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> for each transaction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">schema_engine</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">schema_translate_map</span> <span class="o">=</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span> <span class="p">)</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">schema_engine</span><span class="p">)</span>

<span class="o">...</span></pre></div>
</div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</section>
<section id="sql-compilation-caching">
<span id="sql-caching"></span><h2>SQL Compilation Caching<a class="headerlink" href="#sql-compilation-caching" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>SQLAlchemy now has a transparent query caching system
that substantially lowers the Python computational overhead involved in
converting SQL statement constructs into SQL strings across both
Core and ORM.   See the introduction at <a class="reference internal" href="../changelog/migration_14.html#change-4639"><span class="std std-ref">Transparent SQL Compilation Caching added to All DQL, DML Statements in Core, ORM</span></a>.</p>
</div>
<p>SQLAlchemy includes a comprehensive caching system for the SQL compiler as well
as its ORM variants.   This caching system is transparent within the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and provides that the SQL compilation process for a given Core
or ORM SQL statement, as well as related computations which assemble
result-fetching mechanics for that statement, will only occur once for that
statement object and all others with the identical
structure, for the duration that the particular structure remains within the
engine’s “compiled cache”. By “statement objects that have the identical
structure”, this generally corresponds to a SQL statement that is
constructed within a function and is built each time that function runs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run_my_statement</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span></pre></div>
</div>
<p>The above statement will generate SQL resembling
<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">id,</span> <span class="pre">col</span> <span class="pre">FROM</span> <span class="pre">table</span> <span class="pre">WHERE</span> <span class="pre">col</span> <span class="pre">=</span> <span class="pre">:col</span> <span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">id</span></code>, noting that
while the value of <code class="docutils literal notranslate"><span class="pre">parameter</span></code> is a plain Python object such as a string
or an integer, the string SQL form of the statement does not include this
value as it uses bound parameters.  Subsequent invocations of the above
<code class="docutils literal notranslate"><span class="pre">run_my_statement()</span></code> function will use a cached compilation construct
within the scope of the <code class="docutils literal notranslate"><span class="pre">connection.execute()</span></code> call for enhanced performance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it is important to note that the SQL compilation cache is caching
the <strong>SQL string that is passed to the database only</strong>, and <strong>not the data</strong>
returned by a query.   It is in no way a data cache and does not
impact the results returned for a particular SQL statement nor does it
imply any memory use linked to fetching of result rows.</p>
</div>
<p>While SQLAlchemy has had a rudimentary statement cache since the early 1.x
series, and additionally has featured the “Baked Query” extension for the ORM,
both of these systems required a high degree of special API use in order for
the cache to be effective.  The new cache as of 1.4 is instead completely
automatic and requires no change in programming style to be effective.</p>
<p>The cache is automatically used without any configurational changes and no
special steps are needed in order to enable it. The following sections
detail the configuration and advanced usage patterns for the cache.</p>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>The cache itself is a dictionary-like object called an <code class="docutils literal notranslate"><span class="pre">LRUCache</span></code>, which is
an internal SQLAlchemy dictionary subclass that tracks the usage of particular
keys and features a periodic “pruning” step which removes the least recently
used items when the size of the cache reaches a certain threshold.  The size
of this cache defaults to 500 and may be configured using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">,</span> <span class="n">query_cache_size</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span></pre></div>
</div>
<p>The size of the cache can grow to be a factor of 150% of the size given, before
it’s pruned back down to the target size.  A cache of size 1200 above can therefore
grow to be 1800 elements in size at which point it will be pruned to 1200.</p>
<p>The sizing of the cache is based on a single entry per unique SQL statement rendered,
per engine.   SQL statements generated from both the Core and the ORM are
treated equally.  DDL statements will usually not be cached.  In order to determine
what the cache is doing, engine logging will include details about the
cache’s behavior, described in the next section.</p>
</section>
<section id="estimating-cache-performance-using-logging">
<h3>Estimating Cache Performance Using Logging<a class="headerlink" href="#estimating-cache-performance-using-logging" title="Permalink to this headline">¶</a></h3>
<p>The above cache size of 1200 is actually fairly large.   For small applications,
a size of 100 is likely sufficient.  To estimate the optimal size of the cache,
assuming enough memory is present on the target host, the size of the cache
should be based on the number of unique SQL strings that may be rendered for the
target engine in use.    The most expedient way to see this is to use
SQL echoing, which is most directly enabled by using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a> flag, or by using Python logging; see the
section <a class="reference internal" href="engines.html#dbengine-logging"><span class="std std-ref">Configuring Logging</span></a> for background on logging configuration.</p>
<p>As an example, we will examine the logging produced by the following program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">ForeignKey</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Integer</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>
    <span class="n">bs</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">a_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;a.id&quot;</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>


<span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">add_all</span><span class="p">(</span>
    <span class="p">[</span><span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()]),</span> <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()]),</span> <span class="n">A</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="p">[</span><span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">(),</span> <span class="n">B</span><span class="p">()])]</span>
<span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="k">for</span> <span class="n">a_rec</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a_rec</span><span class="o">.</span><span class="n">bs</span><span class="p">)</span></pre></div>
</div>
<p>When run, each SQL statement that’s logged will include a bracketed
cache statistics badge to the left of the parameters passed.   The four
types of message we may see are summarized as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[raw</span> <span class="pre">sql]</span></code> - the driver or the end-user emitted raw SQL using
<a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a> - caching does not apply</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[no</span> <span class="pre">key]</span></code> - the statement object is a DDL statement that is not cached, or
the statement object contains uncacheable elements such as user-defined
constructs or arbitrarily large VALUES clauses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[generated</span> <span class="pre">in</span> <span class="pre">Xs]</span></code> - the statement was a <strong>cache miss</strong> and had to be
compiled, then stored in the cache.  it took X seconds to produce the
compiled construct.  The number X will be in the small fractional seconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[cached</span> <span class="pre">since</span> <span class="pre">Xs</span> <span class="pre">ago]</span></code> - the statement was a <strong>cache hit</strong> and did not
have to be recompiled.  The statement has been stored in the cache since
X seconds ago.  The number X will be proportional to how long the application
has been running and how long the statement has been cached, so for example
would be 86400 for a 24 hour period.</p></li>
</ul>
<p>Each badge is described in more detail below.</p>
<p>The first statements we see for the above program will be the SQLite dialect
checking for the existence of the “a” and “b” tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">Engine</span> <span class="n">PRAGMA</span> <span class="n">temp</span><span class="o">.</span><span class="n">table_info</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="n">INFO</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">Engine</span> <span class="p">[</span><span class="n">raw</span> <span class="n">sql</span><span class="p">]</span> <span class="p">()</span>
<span class="n">INFO</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">Engine</span> <span class="n">PRAGMA</span> <span class="n">main</span><span class="o">.</span><span class="n">table_info</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
<span class="n">INFO</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">Engine</span> <span class="p">[</span><span class="n">raw</span> <span class="n">sql</span><span class="p">]</span> <span class="p">()</span></pre></div>
</div>
<p>For the above two SQLite PRAGMA statements, the badge reads <code class="docutils literal notranslate"><span class="pre">[raw</span> <span class="pre">sql]</span></code>,
which indicates the driver is sending a Python string directly to the
database using <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a>.  Caching does not apply
to such statements because they already exist in string form, and there
is nothing known about what kinds of result rows will be returned since
SQLAlchemy does not parse SQL strings ahead of time.</p>
<p>The next statements we see are the CREATE TABLE statements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">Engine</span>
<span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">a</span> <span class="p">(</span>
  <span class="nb">id</span> <span class="n">INTEGER</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
  <span class="n">data</span> <span class="n">VARCHAR</span><span class="p">,</span>
  <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="nb">id</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">INFO</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">Engine</span> <span class="p">[</span><span class="n">no</span> <span class="n">key</span> <span class="mf">0.00007</span><span class="n">s</span><span class="p">]</span> <span class="p">()</span>
<span class="n">INFO</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">Engine</span>
<span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">b</span> <span class="p">(</span>
  <span class="nb">id</span> <span class="n">INTEGER</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
  <span class="n">a_id</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="n">data</span> <span class="n">VARCHAR</span><span class="p">,</span>
  <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="nb">id</span><span class="p">),</span>
  <span class="n">FOREIGN</span> <span class="n">KEY</span><span class="p">(</span><span class="n">a_id</span><span class="p">)</span> <span class="n">REFERENCES</span> <span class="n">a</span> <span class="p">(</span><span class="nb">id</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">INFO</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">Engine</span> <span class="p">[</span><span class="n">no</span> <span class="n">key</span> <span class="mf">0.00006</span><span class="n">s</span><span class="p">]</span> <span class="p">()</span></pre></div>
</div>
<p>For each of these statements, the badge reads <code class="docutils literal notranslate"><span class="pre">[no</span> <span class="pre">key</span> <span class="pre">0.00006s]</span></code>.  This
indicates that these two particular statements, caching did not occur because
the DDL-oriented <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct did not produce a
cache key.  DDL constructs generally do not participate in caching because
they are not typically subject to being repeated a second time and DDL
is also a database configurational step where performance is not as critical.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">[no</span> <span class="pre">key]</span></code> badge is important for one other reason, as it can be produced
for SQL statements that are cacheable except for some particular sub-construct
that is not currently cacheable.   Examples of this include custom user-defined
SQL elements that don’t define caching parameters, as well as some constructs
that generate arbitrarily long and non-reproducible SQL strings, the main
examples being the <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Values" title="sqlalchemy.sql.expression.Values"><code class="xref py py-class docutils literal notranslate"><span class="pre">Values</span></code></a> construct as well as when using “multivalued
inserts” with the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.values()</span></code></a> method.</p>
<p>So far our cache is still empty.  The next statements will be cached however,
a segment looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INFO sqlalchemy.engine.Engine INSERT INTO a (data) VALUES (?)
INFO sqlalchemy.engine.Engine [generated in 0.00011s] (None,)
INFO sqlalchemy.engine.Engine INSERT INTO a (data) VALUES (?)
INFO sqlalchemy.engine.Engine [cached since 0.0003533s ago] (None,)
INFO sqlalchemy.engine.Engine INSERT INTO a (data) VALUES (?)
INFO sqlalchemy.engine.Engine [cached since 0.0005326s ago] (None,)
INFO sqlalchemy.engine.Engine INSERT INTO b (a_id, data) VALUES (?, ?)
INFO sqlalchemy.engine.Engine [generated in 0.00010s] (1, None)
INFO sqlalchemy.engine.Engine INSERT INTO b (a_id, data) VALUES (?, ?)
INFO sqlalchemy.engine.Engine [cached since 0.0003232s ago] (1, None)
INFO sqlalchemy.engine.Engine INSERT INTO b (a_id, data) VALUES (?, ?)
INFO sqlalchemy.engine.Engine [cached since 0.0004887s ago] (1, None)</pre></div>
</div>
<p>Above, we see essentially two unique SQL strings; <code class="docutils literal notranslate"><span class="pre">&quot;INSERT</span> <span class="pre">INTO</span> <span class="pre">a</span> <span class="pre">(data)</span> <span class="pre">VALUES</span> <span class="pre">(?)&quot;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&quot;INSERT</span> <span class="pre">INTO</span> <span class="pre">b</span> <span class="pre">(a_id,</span> <span class="pre">data)</span> <span class="pre">VALUES</span> <span class="pre">(?,</span> <span class="pre">?)&quot;</span></code>.  Since SQLAlchemy uses
bound parameters for all literal values, even though these statements are
repeated many times for different objects, because the parameters are separate,
the actual SQL string stays the same.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the above two statements are generated by the ORM unit of work
process, and in fact will be caching these in a separate cache that is
local to each mapper.  However the mechanics and terminology are the same.
The section <a class="reference internal" href="#engine-compiled-cache"><span class="std std-ref">Disabling or using an alternate dictionary to cache some (or all) statements</span></a> below will describe how user-facing
code can also use an alternate caching container on a per-statement basis.</p>
</div>
<p>The caching badge we see for the first occurrence of each of these two
statements is <code class="docutils literal notranslate"><span class="pre">[generated</span> <span class="pre">in</span> <span class="pre">0.00011s]</span></code>. This indicates that the statement
was <strong>not in the cache, was compiled into a String in .00011s and was then
cached</strong>.   When we see the <code class="docutils literal notranslate"><span class="pre">[generated]</span></code> badge, we know that this means
there was a <strong>cache miss</strong>.  This is to be expected for the first occurrence of
a particular statement.  However, if lots of new <code class="docutils literal notranslate"><span class="pre">[generated]</span></code> badges are
observed for a long-running application that is generally using the same series
of SQL statements over and over, this may be a sign that the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> parameter is too small.  When a
statement that was cached is then evicted from the cache due to the LRU
cache pruning lesser used items, it will display the <code class="docutils literal notranslate"><span class="pre">[generated]</span></code> badge
when it is next used.</p>
<p>The caching badge that we then see for the subsequent occurrences of each of
these two statements looks like <code class="docutils literal notranslate"><span class="pre">[cached</span> <span class="pre">since</span> <span class="pre">0.0003533s</span> <span class="pre">ago]</span></code>.  This
indicates that the statement <strong>was found in the cache, and was originally
placed into the cache .0003533 seconds ago</strong>.   It is important to note that
while the <code class="docutils literal notranslate"><span class="pre">[generated]</span></code> and <code class="docutils literal notranslate"><span class="pre">[cached</span> <span class="pre">since]</span></code> badges refer to a number of
seconds, they mean different things; in the case of <code class="docutils literal notranslate"><span class="pre">[generated]</span></code>, the number
is a rough timing of how long it took to compile the statement, and will be an
extremely small amount of time.   In the case of <code class="docutils literal notranslate"><span class="pre">[cached</span> <span class="pre">since]</span></code>, this is
the total time that a statement has been present in the cache.  For an
application that’s been running for six hours, this number may read <code class="docutils literal notranslate"><span class="pre">[cached</span>
<span class="pre">since</span> <span class="pre">21600</span> <span class="pre">seconds</span> <span class="pre">ago]</span></code>, and that’s a good thing.    Seeing high numbers for
“cached since” is an indication that these statements have not been subject to
cache misses for a long time.  Statements that frequently have a low number of
“cached since” even if the application has been running a long time may
indicate these statements are too frequently subject to cache misses, and that
the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> may need to be increased.</p>
<p>Our example program then performs some SELECTs where we can see the same
pattern of “generated” then “cached”, for the SELECT of the “a” table as well
as for subsequent lazy loads of the “b” table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INFO sqlalchemy.engine.Engine SELECT a.id AS a_id, a.data AS a_data
FROM a
INFO sqlalchemy.engine.Engine [generated in 0.00009s] ()
INFO sqlalchemy.engine.Engine SELECT b.id AS b_id, b.a_id AS b_a_id, b.data AS b_data
FROM b
WHERE ? = b.a_id
INFO sqlalchemy.engine.Engine [generated in 0.00010s] (1,)
INFO sqlalchemy.engine.Engine SELECT b.id AS b_id, b.a_id AS b_a_id, b.data AS b_data
FROM b
WHERE ? = b.a_id
INFO sqlalchemy.engine.Engine [cached since 0.0005922s ago] (2,)
INFO sqlalchemy.engine.Engine SELECT b.id AS b_id, b.a_id AS b_a_id, b.data AS b_data
FROM b
WHERE ? = b.a_id</pre></div>
</div>
<p>From our above program, a full run shows a total of four distinct SQL strings
being cached.   Which indicates a cache size of <strong>four</strong> would be sufficient.   This is
obviously an extremely small size, and the default size of 500 is fine to be left
at its default.</p>
</section>
<section id="how-much-memory-does-the-cache-use">
<h3>How much memory does the cache use?<a class="headerlink" href="#how-much-memory-does-the-cache-use" title="Permalink to this headline">¶</a></h3>
<p>The previous section detailed some techniques to check if the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> needs to be bigger.   How do we know
if the cache is not too large?   The reason we may want to set
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.query_cache_size" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code></a> to not be higher than a certain
number would be because we have an application that may make use of a very large
number of different statements, such as an application that is building queries
on the fly from a search UX, and we don’t want our host to run out of memory
if for example, a hundred thousand different queries were run in the past 24 hours
and they were all cached.</p>
<p>It is extremely difficult to measure how much memory is occupied by Python
data structures, however using a process to measure growth in memory via <code class="docutils literal notranslate"><span class="pre">top</span></code> as a
successive series of 250 new statements are added to the cache suggest a
moderate Core statement takes up about 12K while a small ORM statement takes about
20K, including result-fetching structures which for the ORM will be much greater.</p>
</section>
<section id="disabling-or-using-an-alternate-dictionary-to-cache-some-or-all-statements">
<span id="engine-compiled-cache"></span><h3>Disabling or using an alternate dictionary to cache some (or all) statements<a class="headerlink" href="#disabling-or-using-an-alternate-dictionary-to-cache-some-or-all-statements" title="Permalink to this headline">¶</a></h3>
<p>The internal cache used is known as <code class="docutils literal notranslate"><span class="pre">LRUCache</span></code>, but this is mostly just
a dictionary.  Any dictionary may be used as a cache for any series of
statements by using the <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.compiled_cache" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.compiled_cache</span></code></a>
option as an execution option.  Execution options may be set on a statement,
on an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, as well as
when using the ORM <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method for SQLAlchemy-2.0
style invocations.   For example, to run a series of SQL statements and have
them cached in a particular dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_cache</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">compiled_cache</span><span class="o">=</span><span class="n">my_cache</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span></pre></div>
</div>
<p>The SQLAlchemy ORM uses the above technique to hold onto per-mapper caches
within the unit of work “flush” process that are separate from the default
cache configured on the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, as well as for some
relationship loader queries.</p>
<p>The cache can also be disabled with this argument by sending a value of
<code class="docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># disable caching for this connection</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">compiled_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span></pre></div>
</div>
</section>
<section id="caching-for-third-party-dialects">
<span id="engine-thirdparty-caching"></span><h3>Caching for Third Party Dialects<a class="headerlink" href="#caching-for-third-party-dialects" title="Permalink to this headline">¶</a></h3>
<p>The caching feature requires that the dialect’s compiler produces a SQL
construct that is generically reusable given a particular cache key.  This means
that any literal values in a statement, such as the LIMIT/OFFSET values for
a SELECT, can not be hardcoded in the dialect’s compilation scheme, as
the compiled string will not be re-usable.   SQLAlchemy supports rendered
bound parameters using the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.BindParameter.render_literal_execute" title="sqlalchemy.sql.expression.BindParameter.render_literal_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BindParameter.render_literal_execute()</span></code></a>
method which can be applied to the existing <code class="docutils literal notranslate"><span class="pre">Select._limit_clause</span></code> and
<code class="docutils literal notranslate"><span class="pre">Select._offset_clause</span></code> attributes by a custom compiler.</p>
<p>As there are many third party dialects, many of which may be generating
literal values from SQL statements without the benefit of the newer “literal execute”
feature, SQLAlchemy as of version 1.4.5 has added a flag to dialects known as
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect.supports_statement_cache" title="sqlalchemy.engine.Dialect.supports_statement_cache"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dialect.supports_statement_cache</span></code></a>.  This flag is tested to be present
directly on a dialect class, and not any superclasses, so that even a third
party dialect that subclasses an existing cacheable SQLAlchemy dialect such
as <code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.postgresql.PGDialect</span></code> must still specify this flag,
once the dialect has been altered as needed and tested for reusability of
compiled SQL statements with differing parameters.</p>
<p>For all third party dialects that don’t support this flag, the logging for
such a dialect will indicate <code class="docutils literal notranslate"><span class="pre">dialect</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">support</span> <span class="pre">caching</span></code>.   Dialect
authors can apply the flag as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.engine.default</span> <span class="kn">import</span> <span class="n">DefaultDialect</span>

<span class="k">class</span> <span class="nc">MyDialect</span><span class="p">(</span><span class="n">DefaultDialect</span><span class="p">):</span>
    <span class="n">supports_statement_cache</span> <span class="o">=</span> <span class="kc">True</span></pre></div>
</div>
<p>The flag needs to be applied to all subclasses of the dialect as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyDBAPIForMyDialect</span><span class="p">(</span><span class="n">MyDialect</span><span class="p">):</span>
    <span class="n">supports_statement_cache</span> <span class="o">=</span> <span class="kc">True</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.5.</span></p>
</div>
</section>
<section id="using-lambdas-to-add-significant-speed-gains-to-statement-production">
<span id="engine-lambda-caching"></span><h3>Using Lambdas to add significant speed gains to statement production<a class="headerlink" href="#using-lambdas-to-add-significant-speed-gains-to-statement-production" title="Permalink to this headline">¶</a></h3>
<div class="admonition deepalchemy">
<p class="admonition-title">Deep Alchemy</p>
<p>This technique is generally non-essential except in very performance
intensive scenarios, and intended for experienced Python programmers.
While fairly straightforward, it involves metaprogramming concepts that are
not appropriate for novice Python developers.  The lambda approach can be
applied to at a later time to existing code with a minimal amount of effort.</p>
</div>
<p>Python functions, typically expressed as lambdas, may be used to generate
SQL expressions which are cacheable based on the Python code location of
the lambda function itself as well as the closure variables within the
lambda.   The rationale is to allow caching of not only the SQL string-compiled
form of a SQL expression construct as is SQLAlchemy’s normal behavior when
the lambda system isn’t used, but also the in-Python composition
of the SQL expression construct itself, which also has some degree of
Python overhead.</p>
<p>The lambda SQL expression feature is available as a performance enhancing
feature, and is also optionally used in the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.with_loader_criteria" title="sqlalchemy.orm.with_loader_criteria"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_loader_criteria()</span></code></a>
ORM option in order to provide a generic SQL fragment.</p>
<section id="synopsis">
<h4>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h4>
<p>Lambda statements are constructed using the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.lambda_stmt" title="sqlalchemy.sql.expression.lambda_stmt"><code class="xref py py-func docutils literal notranslate"><span class="pre">lambda_stmt()</span></code></a> function,
which returns an instance of <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.StatementLambdaElement" title="sqlalchemy.sql.expression.StatementLambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementLambdaElement</span></code></a>, which is
itself an executable statement construct.    Additional modifiers and criteria
are added to the object using the Python addition operator <code class="docutils literal notranslate"><span class="pre">+</span></code>, or
alternatively the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.StatementLambdaElement.add_criteria" title="sqlalchemy.sql.expression.StatementLambdaElement.add_criteria"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StatementLambdaElement.add_criteria()</span></code></a> method which
allows for more options.</p>
<p>It is assumed that the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.lambda_stmt" title="sqlalchemy.sql.expression.lambda_stmt"><code class="xref py py-func docutils literal notranslate"><span class="pre">lambda_stmt()</span></code></a> construct is being invoked
within an enclosing function or method that expects to be used many times
within an application, so that subsequent executions beyond the first one
can take advantage of the compiled SQL being cached.  When the lambda is
constructed inside of an enclosing function in Python it is then subject
to also having closure variables, which are significant to the whole
approach:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">lambda_stmt</span>

<span class="k">def</span> <span class="nf">run_my_statement</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">run_my_statement</span><span class="p">(</span><span class="n">some_connection</span><span class="p">,</span> <span class="s2">&quot;some parameter&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Above, the three <code class="docutils literal notranslate"><span class="pre">lambda</span></code> callables that are used to define the structure
of a SELECT statement are invoked exactly once, and the resulting SQL
string cached in the compilation cache of the engine.   From that point
forward, the <code class="docutils literal notranslate"><span class="pre">run_my_statement()</span></code> function may be invoked any number
of times and the <code class="docutils literal notranslate"><span class="pre">lambda</span></code> callables within it will not be called, only
used as cache keys to retrieve the already-compiled SQL.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important to note that there is already SQL caching in place
when the lambda system is not used.   The lambda system only adds an
additional layer of work reduction per SQL statement invoked by caching
the building up of the SQL construct itself and also using a simpler
cache key.</p>
</div>
</section>
<section id="quick-guidelines-for-lambdas">
<h4>Quick Guidelines for Lambdas<a class="headerlink" href="#quick-guidelines-for-lambdas" title="Permalink to this headline">¶</a></h4>
<p>Above all, the emphasis within the lambda SQL system is ensuring that there
is never a mismatch between the cache key generated for a lambda and the
SQL string it will produce.   The <code class="xref py py-class docutils literal notranslate"><span class="pre">LamdaElement</span></code> and related
objects will run and analyze the given lambda in order to calculate how
it should be cached on each run, trying to detect any potential problems.
Basic guidelines include:</p>
<ul>
<li><p><strong>Any kind of statement is supported</strong> - while it’s expected that
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> constructs are the prime use case for <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.lambda_stmt" title="sqlalchemy.sql.expression.lambda_stmt"><code class="xref py py-func docutils literal notranslate"><span class="pre">lambda_stmt()</span></code></a>,
DML statements such as <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> and <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.update" title="sqlalchemy.sql.expression.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">update()</span></code></a> are
equally usable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">upd</span><span class="p">(</span><span class="n">id_</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">())</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">newname</span><span class="p">)</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="n">id_</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stmt</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">upd</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">))</span></pre></div>
</div>
</li>
<li><p><strong>ORM use cases directly supported as well</strong> - the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.lambda_stmt" title="sqlalchemy.sql.expression.lambda_stmt"><code class="xref py py-func docutils literal notranslate"><span class="pre">lambda_stmt()</span></code></a>
can accommodate ORM functionality completely and used directly with
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">))</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">)</span>

    <span class="n">row</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">row</span></pre></div>
</div>
</li>
<li><p><strong>Bound parameters are automatically accommodated</strong> - in contrast to SQLAlchemy’s
previous “baked query” system, the lambda SQL system accommodates for
Python literal values which become SQL bound parameters automatically.
This means that even though a given lambda runs only once, the values that
become bound parameters are extracted from the <strong>closure</strong> of the lambda
on every run:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">my_stmt</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">my_stmt</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">)))</span>
<span class="gp">...</span>
<div class='show_sql'><span class="k">SELECT</span> <span class="k">max</span><span class="p">(</span><span class="o">?</span><span class="p">,</span> <span class="o">?</span><span class="p">)</span> <span class="k">AS</span> <span class="n">max_1</span>
<span class="p">[</span><span class="k">generated</span> <span class="k">in</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00057</span><span class="n">s</span><span class="p">]</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</div><span class="go">10</span>
<div class='show_sql'><span class="k">SELECT</span> <span class="k">max</span><span class="p">(</span><span class="o">?</span><span class="p">,</span> <span class="o">?</span><span class="p">)</span> <span class="k">AS</span> <span class="n">max_1</span>
<span class="p">[</span><span class="n">cached</span> <span class="n">since</span> <span class="mi">0</span><span class="p">.</span><span class="mi">002059</span><span class="n">s</span> <span class="n">ago</span><span class="p">]</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</div><span class="go">12</span></pre></div>
</div>
<p>Above, <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.StatementLambdaElement" title="sqlalchemy.sql.expression.StatementLambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementLambdaElement</span></code></a> extracted the values of <code class="docutils literal notranslate"><span class="pre">x</span></code>
and <code class="docutils literal notranslate"><span class="pre">y</span></code> from the <strong>closure</strong> of the lambda that is generated each time
<code class="docutils literal notranslate"><span class="pre">my_stmt()</span></code> is invoked; these were substituted into the cached SQL
construct as the values of the parameters.</p>
</li>
<li><p><strong>The lambda should ideally produce an identical SQL structure in all cases</strong> -
Avoid using conditionals or custom callables inside of lambdas that might make
it produce different SQL based on inputs; if a function might conditionally
use two different SQL fragments, use two separate lambdas:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># **Don&#39;t** do this:</span>

<span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">thing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
    <span class="n">stmt</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">parameter</span><span class="p">)</span> <span class="k">if</span> <span class="n">thing</span>
        <span class="k">else</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stmt</span>

<span class="c1"># **Do** do this:</span>

<span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">thing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">thing</span><span class="p">:</span>
        <span class="n">stmt</span> <span class="o">+=</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stmt</span> <span class="o">+=</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>There are a variety of failures which can occur if the lambda does not
produce a consistent SQL construct and some are not trivially detectable
right now.</p>
</li>
<li><p><strong>Don’t use functions inside the lambda to produce bound values</strong> - the
bound value tracking approach requires that the actual value to be used in
the SQL statement be locally present in the closure of the lambda.  This is
not possible if values are generated from other functions, and the
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.LambdaElement" title="sqlalchemy.sql.expression.LambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">LambdaElement</span></code></a> should normally raise an error if this is
attempted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_x</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_y</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">get_x</span><span class="p">(),</span> <span class="n">get_y</span><span class="p">())))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">my_stmt</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span>
<span class="gp">...</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  # ...</span>
<span class="gr">sqlalchemy.exc.InvalidRequestError</span>: <span class="n">Can&#39;t invoke Python callable get_x()</span>
<span class="go">inside of lambda expression argument at</span>
<span class="go">&lt;code object &lt;lambda&gt; at 0x7fed15f350e0, file &quot;&lt;stdin&gt;&quot;, line 6&gt;;</span>
<span class="go">lambda SQL constructs should not invoke functions from closure variables</span>
<span class="go">to produce literal values since the lambda SQL system normally extracts</span>
<span class="go">bound values without actually invoking the lambda or any functions within it.</span></pre></div>
</div>
<p>Above, the use of <code class="docutils literal notranslate"><span class="pre">get_x()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_y()</span></code>, if they are necessary, should
occur <strong>outside</strong> of the lambda and assigned to a local closure variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_x</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_y</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span> <span class="o">=</span> <span class="n">get_x</span><span class="p">(),</span> <span class="n">get_y</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
</li>
<li><p><strong>Avoid referring to non-SQL constructs inside of lambdas as they are not
cacheable by default</strong> - this issue refers to how the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.LambdaElement" title="sqlalchemy.sql.expression.LambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">LambdaElement</span></code></a>
creates a cache key from other closure variables within the statement.  In order
to provide the best guarantee of an accurate cache key, all objects located
in the closure of the lambda are considered to be significant, and none
will be assumed to be appropriate for a cache key by default.
So the following example will also raise a rather detailed error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">foo</span><span class="o">.</span><span class="n">y</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>   <span class="nb">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">my_stmt</span><span class="p">(</span><span class="n">Foo</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))))</span>
<span class="gp">...</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  # ...</span>
<span class="gr">sqlalchemy.exc.InvalidRequestError</span>: <span class="n">Closure variable named &#39;foo&#39; inside of</span>
<span class="go">lambda callable &lt;code object &lt;lambda&gt; at 0x7fed15f35450, file</span>
<span class="go">&quot;&lt;stdin&gt;&quot;, line 2&gt; does not refer to a cachable SQL element, and also</span>
<span class="go">does not appear to be serving as a SQL literal bound value based on the</span>
<span class="go">default SQL expression returned by the function.  This variable needs to</span>
<span class="go">remain outside the scope of a SQL-generating lambda so that a proper cache</span>
<span class="go">key may be generated from the lambda&#39;s state.  Evaluate this variable</span>
<span class="go">outside of the lambda, set track_on=[&lt;elements&gt;] to explicitly select</span>
<span class="go">closure elements to track, or set track_closure_variables=False to exclude</span>
<span class="go">closure variables from being part of the cache key.</span></pre></div>
</div>
<p>The above error indicates that <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.LambdaElement" title="sqlalchemy.sql.expression.LambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">LambdaElement</span></code></a> will not assume
that the <code class="docutils literal notranslate"><span class="pre">Foo</span></code> object passed in will contine to behave the same in all
cases.    It also won’t assume it can use <code class="docutils literal notranslate"><span class="pre">Foo</span></code> as part of the cache key
by default; if it were to use the <code class="docutils literal notranslate"><span class="pre">Foo</span></code> object as part of the cache key,
if there were many different <code class="docutils literal notranslate"><span class="pre">Foo</span></code> objects this would fill up the cache
with duplicate information, and would also hold long-lasting references to
all of these objects.</p>
<p>The best way to resolve the above situation is to not refer to <code class="docutils literal notranslate"><span class="pre">foo</span></code>
inside of the lambda, and refer to it <strong>outside</strong> instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span> <span class="o">=</span> <span class="n">foo</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">foo</span><span class="o">.</span><span class="n">y</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">x_param</span><span class="p">,</span> <span class="n">y_param</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>In some situations, if the SQL structure of the lambda is guaranteed to
never change based on input, to pass <code class="docutils literal notranslate"><span class="pre">track_closure_variables=False</span></code>
which will disable any tracking of closure variables other than those
used for bound parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span>
<span class="gp">... </span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">foo</span><span class="o">.</span><span class="n">y</span><span class="p">)),</span>
<span class="gp">... </span>        <span class="n">track_closure_variables</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>There is also the option to add objects to the element to explicitly form
part of the cache key, using the <code class="docutils literal notranslate"><span class="pre">track_on</span></code> parameter; using this parameter
allows specific values to serve as the cache key and will also prevent other
closure variables from being considered.  This is useful for cases where part
of the SQL being constructed originates from a contextual object of some sort
that may have many different values.  In the example below, the first
segment of the SELECT statement will disable tracking of the <code class="docutils literal notranslate"><span class="pre">foo</span></code> variable,
whereas the second segment will explicitly track <code class="docutils literal notranslate"><span class="pre">self</span></code> as part of the
cache key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span>
<span class="gp">... </span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">column_expressions</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">track_closure_variables</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">add_criteria</span><span class="p">(</span>
<span class="gp">... </span>        <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">where_criteria</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">track_on</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">track_on</span></code> means the given objects will be stored long term in the
lambda’s internal cache and will have strong references for as long as the
cache doesn’t clear out those objects (an LRU scheme of 1000 entries is used
by default).</p>
</li>
</ul>
</section>
<section id="cache-key-generation">
<h4>Cache Key Generation<a class="headerlink" href="#cache-key-generation" title="Permalink to this headline">¶</a></h4>
<p>In order to understand some of the options and behaviors which occur
with lambda SQL constructs, an understanding of the caching system
is helpful.</p>
<p>SQLAlchemy’s caching system normally generates a cache key from a given
SQL expression construct by producing a structure that represents all the
state within the construct:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_key</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">_generate_cache_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>  <span class="c1"># somewhat paraphrased</span>
<span class="go">CacheKey(key=(</span>
<span class="go">  &#39;0&#39;,</span>
<span class="go">  &lt;class &#39;sqlalchemy.sql.selectable.Select&#39;&gt;,</span>
<span class="go">  &#39;_raw_columns&#39;,</span>
<span class="go">  (</span>
<span class="go">    (</span>
<span class="go">      &#39;1&#39;,</span>
<span class="go">      &lt;class &#39;sqlalchemy.sql.elements.ColumnClause&#39;&gt;,</span>
<span class="go">      &#39;name&#39;,</span>
<span class="go">      &#39;q&#39;,</span>
<span class="go">      &#39;type&#39;,</span>
<span class="go">      (</span>
<span class="go">        &lt;class &#39;sqlalchemy.sql.sqltypes.NullType&#39;&gt;,</span>
<span class="go">      ),</span>
<span class="go">    ),</span>
<span class="go">  ),</span>
<span class="go">  # a few more elements are here, and many more for a more</span>
<span class="go">  # complicated SELECT statement</span>
<span class="go">),)</span></pre></div>
</div>
<p>The above key is stored in the cache which is essentially a dictionary, and the
value is a construct that among other things stores the string form of the SQL
statement, in this case the phrase “SELECT q”.  We can observe that even for an
extremely short query the cache key is pretty verbose as it has to represent
everything that may vary about what’s being rendered and potentially executed.</p>
<p>The lambda construction system by contrast creates a different kind of cache
key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">lambda_stmt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_key</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">_generate_cache_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
<span class="go">CacheKey(key=(</span>
<span class="go">  &lt;code object &lt;lambda&gt; at 0x7fed1617c710, file &quot;&lt;stdin&gt;&quot;, line 1&gt;,</span>
<span class="go">  &lt;class &#39;sqlalchemy.sql.lambdas.StatementLambdaElement&#39;&gt;,</span>
<span class="go">),)</span></pre></div>
</div>
<p>Above, we see a cache key that is vastly shorter than that of the non-lambda
statement, and additionally that production of the <code class="docutils literal notranslate"><span class="pre">select(column(&quot;q&quot;))</span></code>
construct itself was not even necessary; the Python lambda itself contains
an attribute called <code class="docutils literal notranslate"><span class="pre">__code__</span></code> which refers to a Python code object that
within the runtime of the application is immutable and permanent.</p>
<p>When the lambda also includes closure variables, in the normal case that these
variables refer to SQL constructs such as column objects, they become
part of the cache key, or if they refer to literal values that will be bound
parameters, they are placed in a separate element of the cache key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_stmt</span><span class="p">(</span><span class="n">parameter</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">col</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="n">lambda_stmt</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">parameter</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">stmt</span></pre></div>
</div>
<p>The above <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.StatementLambdaElement" title="sqlalchemy.sql.expression.StatementLambdaElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementLambdaElement</span></code></a> includes two lambdas, both
of which refer to the <code class="docutils literal notranslate"><span class="pre">col</span></code> closure variable, so the cache key will
represent both of these segments as well as the <code class="docutils literal notranslate"><span class="pre">column()</span></code> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">my_stmt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">_generate_cache_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="go">CacheKey(key=(</span>
<span class="go">  &lt;code object &lt;lambda&gt; at 0x7f07323c50e0, file &quot;&lt;stdin&gt;&quot;, line 3&gt;,</span>
<span class="go">  (</span>
<span class="go">    &#39;0&#39;,</span>
<span class="go">    &lt;class &#39;sqlalchemy.sql.elements.ColumnClause&#39;&gt;,</span>
<span class="go">    &#39;name&#39;,</span>
<span class="go">    &#39;q&#39;,</span>
<span class="go">    &#39;type&#39;,</span>
<span class="go">    (</span>
<span class="go">      &lt;class &#39;sqlalchemy.sql.sqltypes.NullType&#39;&gt;,</span>
<span class="go">    ),</span>
<span class="go">  ),</span>
<span class="go">  &lt;code object &lt;lambda&gt; at 0x7f07323c5190, file &quot;&lt;stdin&gt;&quot;, line 4&gt;,</span>
<span class="go">  &lt;class &#39;sqlalchemy.sql.lambdas.LinkedLambdaElement&#39;&gt;,</span>
<span class="go">  (</span>
<span class="go">    &#39;0&#39;,</span>
<span class="go">    &lt;class &#39;sqlalchemy.sql.elements.ColumnClause&#39;&gt;,</span>
<span class="go">    &#39;name&#39;,</span>
<span class="go">    &#39;q&#39;,</span>
<span class="go">    &#39;type&#39;,</span>
<span class="go">    (</span>
<span class="go">      &lt;class &#39;sqlalchemy.sql.sqltypes.NullType&#39;&gt;,</span>
<span class="go">    ),</span>
<span class="go">  ),</span>
<span class="go">  (</span>
<span class="go">    &#39;0&#39;,</span>
<span class="go">    &lt;class &#39;sqlalchemy.sql.elements.ColumnClause&#39;&gt;,</span>
<span class="go">    &#39;name&#39;,</span>
<span class="go">    &#39;q&#39;,</span>
<span class="go">    &#39;type&#39;,</span>
<span class="go">    (</span>
<span class="go">      &lt;class &#39;sqlalchemy.sql.sqltypes.NullType&#39;&gt;,</span>
<span class="go">    ),</span>
<span class="go">  ),</span>
<span class="go">),)</span></pre></div>
</div>
<p>The second part of the cache key has retrieved the bound parameters that will
be used when the statement is invoked:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="o">.</span><span class="n">bindparams</span>
<span class="go">[BindParameter(&#39;%(139668884281280 parameter)s&#39;, 5, type_=Integer())]</span></pre></div>
</div>
<p>For a series of examples of “lambda” caching with performance comparisons,
see the “short_selects” test suite within the <a class="reference internal" href="../orm/examples.html#examples-performance"><span class="std std-ref">Performance</span></a>
performance example.</p>
</section>
</section>
</section>
<section id="engine-disposal">
<span id="id1"></span><h2>Engine Disposal<a class="headerlink" href="#engine-disposal" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> refers to a connection pool, which means under normal
circumstances, there are open database connections present while the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object is still resident in memory.   When an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
is garbage collected, its connection pool is no longer referred to by
that <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, and assuming none of its connections are still checked
out, the pool and its connections will also be garbage collected, which has the
effect of closing out the actual database connections as well.   But otherwise,
the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> will hold onto open database connections assuming
it uses the normally default pool implementation of <a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is intended to normally be a permanent
fixture established up-front and maintained throughout the lifespan of an
application.  It is <strong>not</strong> intended to be created and disposed on a
per-connection basis; it is instead a registry that maintains both a pool
of connections as well as configurational information about the database
and DBAPI in use, as well as some degree of internal caching of per-database
resources.</p>
<p>However, there are many cases where it is desirable that all connection resources
referred to by the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> be completely closed out.  It’s
generally not a good idea to rely on Python garbage collection for this
to occur for these cases; instead, the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> can be explicitly disposed using
the <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> method.   This disposes of the engine’s
underlying connection pool and replaces it with a new one that’s empty.
Provided that the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
is discarded at this point and no longer used, all <strong>checked-in</strong> connections
which it refers to will also be fully closed.</p>
<p>Valid use cases for calling <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> include:</p>
<ul class="simple">
<li><p>When a program wants to release any remaining checked-in connections
held by the connection pool and expects to no longer be connected
to that database at all for any future operations.</p></li>
<li><p>When a program uses multiprocessing or <code class="docutils literal notranslate"><span class="pre">fork()</span></code>, and an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object is copied to the child process,
<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> should be called so that the engine creates
brand new database connections local to that fork.   Database connections
generally do <strong>not</strong> travel across process boundaries.</p></li>
<li><p>Within test suites or multitenancy scenarios where many
ad-hoc, short-lived <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects may be created and disposed.</p></li>
</ul>
<p>Connections that are <strong>checked out</strong> are <strong>not</strong> discarded when the
engine is disposed or garbage collected, as these connections are still
strongly referenced elsewhere by the application.
However, after <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> is called, those
connections are no longer associated with that <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>; when they
are closed, they will be returned to their now-orphaned connection pool
which will ultimately be garbage collected, once all connections which refer
to it are also no longer referenced anywhere.
Since this process is not easy to control, it is strongly recommended that
<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a> is called only after all checked out connections
are checked in or otherwise de-associated from their pool.</p>
<p>An alternative for applications that are negatively impacted by the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object’s use of connection pooling is to disable pooling
entirely.  This typically incurs only a modest performance impact upon the
use of new connections, and means that when a connection is checked in,
it is entirely closed out and is not held in memory.  See <a class="reference internal" href="pooling.html#pool-switching"><span class="std std-ref">Switching Pool Implementations</span></a>
for guidelines on how to disable pooling.</p>
</section>
<section id="working-with-driver-sql-and-raw-dbapi-connections">
<span id="dbapi-connections"></span><h2>Working with Driver SQL and Raw DBAPI Connections<a class="headerlink" href="#working-with-driver-sql-and-raw-dbapi-connections" title="Permalink to this headline">¶</a></h2>
<p>The introduction on using <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> made use of the
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct in order to illustrate how textual SQL statements
may be invoked.  When working with SQLAlchemy, textual SQL is actually more
of the exception rather than the norm, as the Core expression language
and the ORM both abstract away the textual representation of SQL.  However, the
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct itself also provides some abstraction of textual
SQL in that it normalizes how bound parameters are passed, as well as that
it supports datatyping behavior for parameters and result set rows.</p>
<section id="invoking-sql-strings-directly-to-the-driver">
<h3>Invoking SQL strings directly to the driver<a class="headerlink" href="#invoking-sql-strings-directly-to-the-driver" title="Permalink to this headline">¶</a></h3>
<p>For the use case where one wants to invoke textual SQL directly passed to the
underlying driver (known as the <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a>) without any intervention
from the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct, the <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a>
method may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span><span class="s2">&quot;SET param=&#39;bar&#39;&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>Added the <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a> method.</p>
</div>
</section>
<section id="working-with-the-dbapi-cursor-directly">
<h3>Working with the DBAPI cursor directly<a class="headerlink" href="#working-with-the-dbapi-cursor-directly" title="Permalink to this headline">¶</a></h3>
<p>There are some cases where SQLAlchemy does not provide a genericized way
at accessing some <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a> functions, such as calling stored procedures as well
as dealing with multiple result sets.  In these cases, it’s just as expedient
to deal with the raw DBAPI connection directly.</p>
<p>The most common way to access the raw DBAPI connection is to get it
from an already present <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object directly.  It is
present using the <a class="reference internal" href="#sqlalchemy.engine.Connection.connection" title="sqlalchemy.engine.Connection.connection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.connection</span></code></a> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">dbapi_conn</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">connection</span></pre></div>
</div>
<p>The DBAPI connection here is actually a “proxied” in terms of the
originating connection pool, however this is an implementation detail
that in most cases can be ignored.    As this DBAPI connection is still
contained within the scope of an owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object, it is
best to make use of the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object for most features such
as transaction control as well as calling the <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a>
method; if these operations are performed on the DBAPI connection directly,
the owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will not be aware of these changes in state.</p>
<p>To overcome the limitations imposed by the DBAPI connection that is
maintained by an owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, a DBAPI connection is also
available without the need to procure a
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> first, using the <a class="reference internal" href="#sqlalchemy.engine.Engine.raw_connection" title="sqlalchemy.engine.Engine.raw_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.raw_connection()</span></code></a> method
of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbapi_conn</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span></pre></div>
</div>
<p>This DBAPI connection is again a “proxied” form as was the case before.
The purpose of this proxying is now apparent, as when we call the <code class="docutils literal notranslate"><span class="pre">.close()</span></code>
method of this connection, the DBAPI connection is typically not actually
closed, but instead <a class="reference internal" href="../glossary.html#term-released"><span class="xref std std-term">released</span></a> back to the
engine’s connection pool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbapi_conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
<p>While SQLAlchemy may in the future add built-in patterns for more DBAPI
use cases, there are diminishing returns as these cases tend to be rarely
needed and they also vary highly dependent on the type of DBAPI in use,
so in any case the direct DBAPI calling pattern is always there for those
cases where it is needed.</p>
<p>Some recipes for DBAPI connection use follow.</p>
</section>
<section id="calling-stored-procedures">
<span id="stored-procedures"></span><h3>Calling Stored Procedures<a class="headerlink" href="#calling-stored-procedures" title="Permalink to this headline">¶</a></h3>
<p>For stored procedures with special syntactical or parameter concerns,
DBAPI-level <a class="reference external" href="https://legacy.python.org/dev/peps/pep-0249/#callproc">callproc</a>
may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">callproc</span><span class="p">(</span><span class="s2">&quot;my_procedure&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">])</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
</section>
<section id="multiple-result-sets">
<h3>Multiple Result Sets<a class="headerlink" href="#multiple-result-sets" title="Permalink to this headline">¶</a></h3>
<p>Multiple result set support is available from a raw DBAPI cursor using the
<a class="reference external" href="https://legacy.python.org/dev/peps/pep-0249/#nextset">nextset</a> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;select * from table1; select * from table2&quot;</span><span class="p">)</span>
    <span class="n">results_one</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">nextset</span><span class="p">()</span>
    <span class="n">results_two</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
</section>
</section>
<section id="registering-new-dialects">
<h2>Registering New Dialects<a class="headerlink" href="#registering-new-dialects" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> function call locates the given dialect
using setuptools entrypoints.   These entry points can be established
for third party dialects within the setup.py script.  For example,
to create a new dialect “foodialect://”, the steps are as follows:</p>
<ol class="arabic">
<li><p>Create a package called <code class="docutils literal notranslate"><span class="pre">foodialect</span></code>.</p></li>
<li><p>The package should have a module containing the dialect class,
which is typically a subclass of <a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect" title="sqlalchemy.engine.default.DefaultDialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.default.DefaultDialect</span></code></a>.
In this example let’s say it’s called <code class="docutils literal notranslate"><span class="pre">FooDialect</span></code> and its module is accessed
via <code class="docutils literal notranslate"><span class="pre">foodialect.dialect</span></code>.</p></li>
<li><p>The entry point can be established in setup.py as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[sqlalchemy.dialects]</span>
<span class="s2">foodialect = foodialect.dialect:FooDialect</span>
<span class="s2">&quot;&quot;&quot;</span></pre></div>
</div>
</li>
</ol>
<p>If the dialect is providing support for a particular DBAPI on top of
an existing SQLAlchemy-supported database, the name can be given
including a database-qualification.  For example, if <code class="docutils literal notranslate"><span class="pre">FooDialect</span></code>
were in fact a MySQL dialect, the entry point could be established like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[sqlalchemy.dialects]</span>
<span class="s2">mysql.foodialect = foodialect.dialect:FooDialect</span>
<span class="s2">&quot;&quot;&quot;</span></pre></div>
</div>
<p>The above entrypoint would then be accessed as <code class="docutils literal notranslate"><span class="pre">create_engine(&quot;mysql+foodialect://&quot;)</span></code>.</p>
<section id="registering-dialects-in-process">
<h3>Registering Dialects In-Process<a class="headerlink" href="#registering-dialects-in-process" title="Permalink to this headline">¶</a></h3>
<p>SQLAlchemy also allows a dialect to be registered within the current process, bypassing
the need for separate installation.   Use the <code class="docutils literal notranslate"><span class="pre">register()</span></code> function as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">registry</span>
<span class="n">registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s2">&quot;mysql.foodialect&quot;</span><span class="p">,</span> <span class="s2">&quot;myapp.dialect&quot;</span><span class="p">,</span> <span class="s2">&quot;MyMySQLDialect&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The above will respond to <code class="docutils literal notranslate"><span class="pre">create_engine(&quot;mysql+foodialect://&quot;)</span></code> and load the
<code class="docutils literal notranslate"><span class="pre">MyMySQLDialect</span></code> class from the <code class="docutils literal notranslate"><span class="pre">myapp.dialect</span></code> module.</p>
</section>
</section>
<section id="connection-engine-api">
<h2>Connection / Engine API<a class="headerlink" href="#connection-engine-api" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.Connection"><span class="sig-name descname">Connection</span></a></p></td>
<td><p>Provides high-level functionality for a wrapped DB-API connection.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><span class="sig-name descname">CreateEnginePlugin</span></a></p></td>
<td><p>A set of hooks intended to augment the construction of an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object based on entrypoint names in a URL.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.Engine"><span class="sig-name descname">Engine</span></a></p></td>
<td><p>Connects a <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> and
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> together to provide a
source of database connectivity and behavior.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><span class="sig-name descname">ExceptionContext</span></a></p></td>
<td><p>Encapsulate information about an error condition in progress.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><span class="sig-name descname">NestedTransaction</span></a></p></td>
<td><p>Represent a ‘nested’, or SAVEPOINT transaction.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><span class="sig-name descname">RootTransaction</span></a></p></td>
<td><p>Represent the “root” transaction on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.Transaction"><span class="sig-name descname">Transaction</span></a></p></td>
<td><p>Represent a database transaction in progress.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><span class="sig-name descname">TwoPhaseTransaction</span></a></p></td>
<td><p>Represent a two-phase transaction.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_with_result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_branch_from</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_dispatch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_has_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_allow_revalidate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides high-level functionality for a wrapped DB-API connection.</p>
<p><strong>This is the SQLAlchemy 1.x.x version</strong> of the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
class.   For the <a class="reference internal" href="../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> version, which features some API
differences, see <a class="reference internal" href="future.html#sqlalchemy.future.Connection" title="sqlalchemy.future.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object is procured by calling
the <a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> method of the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
object, and provides services for execution of SQL statements as well
as transaction control.</p>
<p>The Connection object is <strong>not</strong> thread-safe.  While a Connection can be
shared among threads using properly synchronized access, it is still
possible that the underlying DBAPI connection may not support shared
access between threads.  Check the DBAPI documentation for details.</p>
<p>The Connection object represents a single DBAPI connection checked out
from the connection pool. In this state, the connection pool has no affect
upon the connection, including its expiration or timeout state. For the
connection pool to properly manage connections, connections should be
returned to the connection pool (i.e. <code class="docutils literal notranslate"><span class="pre">connection.close()</span></code>) whenever the
connection is not in use.</p>
<div class="class-bases docutils container" id="index-0">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connectable</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_with_result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_branch_from</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_dispatch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_has_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_allow_revalidate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new Connection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a transaction and return a transaction handle.</p>
<p>The returned object is an instance of <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.
This object represents the “scope” of the transaction,
which completes when either the <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a>
or <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> method is called.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method is invoked when using
the <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> context manager method as well.
All documentation that refers to behaviors specific to the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method also apply to use of the
<a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> method.</p>
</div>
<p>Legacy use: nested calls to <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">begin()</span></code></a> on the same
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will return new <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
objects that represent an emulated transaction within the scope of the
enclosing transaction, that is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trans</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>   <span class="c1"># outermost transaction</span>
<span class="n">trans2</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>  <span class="c1"># &quot;nested&quot;</span>
<span class="n">trans2</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>        <span class="c1"># does nothing</span>
<span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>         <span class="c1"># actually commits</span></pre></div>
</div>
<p>Calls to <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> only have an effect
when invoked via the outermost <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object, though the
<a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> method of any of the
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> objects will roll back the
transaction.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The above “nesting” behavior is a legacy behavior specific to
<a class="reference internal" href="../glossary.html#term-1.x-style"><span class="xref std std-term">1.x style</span></a> use and will be removed in SQLAlchemy 2.0. For
notes on <a class="reference internal" href="../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> use, see
<a class="reference internal" href="future.html#sqlalchemy.future.Connection.begin" title="sqlalchemy.future.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> - use a SAVEPOINT</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a> -
use a two phase /XID transaction</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> - context manager available from
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.begin_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a nested transaction (i.e. SAVEPOINT) and return a
transaction handle, assuming an outer transaction is already
established.</p>
<p>Nested transactions require SAVEPOINT support in the
underlying database.  Any transaction in the hierarchy may
<code class="docutils literal notranslate"><span class="pre">commit</span></code> and <code class="docutils literal notranslate"><span class="pre">rollback</span></code>, however the outermost transaction
still controls the overall <code class="docutils literal notranslate"><span class="pre">commit</span></code> or <code class="docutils literal notranslate"><span class="pre">rollback</span></code> of the
transaction of a whole.</p>
<p>The legacy form of <a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> method has
alternate behaviors based on whether or not the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method was called previously. If
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> was not called, then this method will
behave the same as the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method and
return a <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> object that begins and commits a
real transaction - <strong>no savepoint is invoked</strong>. If
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> <strong>has</strong> been called, and a
<a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> is already established, then this method
returns an instance of <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a> which will invoke
and manage the scope of a SAVEPOINT.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The above mentioned behavior of
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> is a legacy behavior
specific to <a class="reference internal" href="../glossary.html#term-1.x-style"><span class="xref std std-term">1.x style</span></a> use. In <a class="reference internal" href="../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> use, the
<a class="reference internal" href="future.html#sqlalchemy.future.Connection.begin_nested" title="sqlalchemy.future.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> method instead autobegins
the outer transaction that can be committed using
“commit-as-you-go” style; see
<a class="reference internal" href="future.html#sqlalchemy.future.Connection.begin_nested" title="sqlalchemy.future.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> for migration details.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4.13: </span>The behavior of
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a>
as returning a <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> if
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> were not called has been restored
as was the case in 1.3.x versions; in previous 1.4.x versions, an
outer transaction would be “autobegun” but would not be committed.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.begin_twophase">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">begin_twophase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.begin_twophase" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a two-phase or XA transaction and return a transaction
handle.</p>
<p>The returned object is an instance of <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>,
which in addition to the methods provided by
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>, also provides a
<a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TwoPhaseTransaction.prepare()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Connection.begin_twophase.params.xid"></span><strong>xid</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.begin_twophase.params.xid">¶</a> – the two phase transaction id.  If not supplied, a
random id will be generated.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This results in a release of the underlying database
resources, that is, the DBAPI connection referenced
internally. The DBAPI connection is typically restored
back to the connection-holding <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> referenced
by the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> that produced this
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>. Any transactional state present on
the DBAPI connection is also unconditionally released via
the DBAPI connection’s <code class="docutils literal notranslate"><span class="pre">rollback()</span></code> method, regardless
of any <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object that may be
outstanding with regards to this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>After <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a> is called, the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is permanently in a closed state,
and will allow no further operations.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.closed">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">closed</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this connection is closed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.connect">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_with_result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a branched version of this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Connection.connect" title="sqlalchemy.engine.Connection.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.connect()</span></code></a> method is considered legacy as of the 1.x series of SQLAlchemy and will be removed in 2.0. (Background on SQLAlchemy 2.0 at: <a class="reference internal" href="../changelog/migration_20.html"><span class="std std-ref">Migrating to SQLAlchemy 2.0</span></a>)</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a> method on the returned
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> can be called and this
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will remain open.</p>
<p>This method provides usage symmetry with
<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a>, including for usage
with context managers.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying DB-API connection managed by this Connection.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dbapi-connections"><span class="std std-ref">Working with Driver SQL and Raw DBAPI Connections</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.default_isolation_level">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">default_isolation_level</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.default_isolation_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The default isolation level assigned to this
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This is the isolation level setting that the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
has when first procured via the <a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> method.
This level stays in place until the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a> is used
to change the setting on a per-<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> basis.</p>
<p>Unlike <a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a>,
this attribute is set
ahead of time from the first connection procured by the dialect,
so SQL query is not invoked when this accessor is called.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.9.9.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a>
- view current level</p>
<p><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> isolation level</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> isolation level</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.detach">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">detach</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.detach" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach the underlying DB-API connection from its connection pool.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SET search_path TO schema1, schema2&quot;</span><span class="p">))</span>

    <span class="c1"># work with connection</span>

<span class="c1"># connection is fully closed (since we used &quot;with:&quot;, can</span>
<span class="c1"># also call .close())</span></pre></div>
</div>
<p>This <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> instance will remain usable.
When closed
(or exited from a context manager context as above),
the DB-API connection will be literally closed and not
returned to its originating pool.</p>
<p>This method can be used to insulate the rest of an application
from a modified state on a connection (such as a transaction
isolation level or similar).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.exec_driver_sql">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">exec_driver_sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.Connection.exec_driver_sql.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql.params.statement">¶</a> – The statement str to be executed.   Bound parameters
must use the underlying DBAPI’s paramstyle, such as “qmark”,
“pyformat”, “format”, etc.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.exec_driver_sql.params.parameters"></span><strong>parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql.params.parameters">¶</a> – <p>represent bound parameter values to be used in the
execution.  The format is one of:   a dictionary of named parameters,
a tuple of positional parameters, or a list containing either
dictionaries or tuples for multiple-execute support.</p>
<p>E.g. multiple dictionaries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (</span><span class="si">%(id)s</span><span class="s2">, </span><span class="si">%(value)s</span><span class="s2">)&quot;</span><span class="p">,</span>
    <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;v1&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;v2&quot;</span><span class="p">}]</span>
<span class="p">)</span></pre></div>
</div>
<p>Single dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (</span><span class="si">%(id)s</span><span class="s2">, </span><span class="si">%(value)s</span><span class="s2">)&quot;</span><span class="p">,</span>
    <span class="nb">dict</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>Single tuple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (?, ?)&quot;</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;v1&#39;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a> method does
not participate in the
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_execute" title="sqlalchemy.events.ConnectionEvents.before_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_execute()</span></code></a> and
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.after_execute" title="sqlalchemy.events.ConnectionEvents.after_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.after_execute()</span></code></a> events.   To
intercept calls to <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a>, use
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a> and
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.after_cursor_execute" title="sqlalchemy.events.ConnectionEvents.after_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.after_cursor_execute()</span></code></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0249"><strong>PEP 249</strong></a></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">multiparams</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a SQL statement construct and returns a
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.Connection.execute.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execute.params.statement">¶</a> – <p>The statement to be executed.  May be
one of:</p>
<ul>
<li><p>a plain string (deprecated)</p></li>
<li><p>any <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> construct that is also
a subclass of <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>, such as a
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> construct</p></li>
<li><p>a <a class="reference internal" href="functions.html#sqlalchemy.sql.functions.FunctionElement" title="sqlalchemy.sql.functions.FunctionElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionElement</span></code></a>, such as that generated
by <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.func" title="sqlalchemy.sql.expression.func"><code class="xref py py-data docutils literal notranslate"><span class="pre">func</span></code></a>, will be automatically wrapped in
a SELECT statement, which is then executed.</p></li>
<li><p>a <a class="reference internal" href="ddl.html#sqlalchemy.schema.DDLElement" title="sqlalchemy.schema.DDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLElement</span></code></a> object</p></li>
<li><p>a <a class="reference internal" href="defaults.html#sqlalchemy.schema.DefaultGenerator" title="sqlalchemy.schema.DefaultGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultGenerator</span></code></a> object</p></li>
<li><p>a <a class="reference internal" href="internals.html#sqlalchemy.engine.Compiled" title="sqlalchemy.engine.Compiled"><code class="xref py py-class docutils literal notranslate"><span class="pre">Compiled</span></code></a> object</p></li>
</ul>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.0: </span>passing a string to
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> is
deprecated and will be removed in version 2.0.  Use the
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct with
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>, or the
<a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a>
method to invoke a driver-level
SQL string.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execute.params.*multiparams/**params"></span><strong>*multiparams/**params</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execute.params.*multiparams/**params">¶</a> – <p>represent bound parameter
values to be used in the execution.   Typically,
the format is either a collection of one or more
dictionaries passed to *multiparams:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;v1&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;v2&quot;</span><span class="p">}</span>
<span class="p">)</span></pre></div>
</div>
<p>…or individual key/values interpreted by **params:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>In the case that a plain SQL string is passed, and the underlying
DBAPI accepts positional bind parameters, a collection of tuples
or individual values in *multiparams may be passed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (?, ?)&quot;</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;v1&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;v2&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (?, ?)&quot;</span><span class="p">,</span>
    <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;v1&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>Note above, the usage of a question mark “?” or other
symbol is contingent upon the “paramstyle” accepted by the DBAPI
in use, which may be any of “qmark”, “named”, “pyformat”, “format”,
“numeric”.   See <a class="reference external" href="https://www.python.org/dev/peps/pep-0249/">pep-249</a> for details on
paramstyle.</p>
<p>To execute a textual SQL statement which uses bound parameters in a
DBAPI-agnostic way, use the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.0: </span>use of tuple or scalar positional parameters
is deprecated. All params should be dicts or sequences of dicts.
Use <a class="reference internal" href="#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exec_driver_sql()</span></code></a> to execute a plain string with
tuple or scalar positional parameters.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Set non-SQL options for the connection which take effect
during execution.</p>
<p>For a “future” style connection, this method returns this same
<a class="reference internal" href="future.html#sqlalchemy.future.Connection" title="sqlalchemy.future.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object with the new options added.</p>
<p>For a legacy connection, this method returns a copy of this
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> which references the same underlying DBAPI
connection, but also defines the given execution options which will
take effect for a call to
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a>. As the new <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> references the
same underlying resource, it’s usually a good idea to ensure that
the copies will be discarded immediately, which is implicit if used
as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">stream_results</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span>\
                    <span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span></pre></div>
</div>
<p>Note that any key/value can be passed to
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>,
and it will be stored in the
<code class="docutils literal notranslate"><span class="pre">_execution_options</span></code> dictionary of the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.
It
is suitable for usage by end-user schemes to communicate with
event listeners, for example.</p>
<p>The keywords that are currently recognized by SQLAlchemy itself
include all those listed under <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a>,
as well as others that are specific to <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.autocommit"></span><strong>autocommit</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.autocommit">¶</a> – <p>Available on: Connection, statement.
When True, a COMMIT will be invoked after execution
when executed in ‘autocommit’ mode, i.e. when an explicit
transaction is not begun on the connection.   Note that this
is <strong>library level, not DBAPI level autocommit</strong>.  The DBAPI
connection will remain in a real transaction unless the
“AUTOCOMMIT” isolation level is used.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The “autocommit” execution option is deprecated
and will be removed in SQLAlchemy 2.0.  See
<a class="reference internal" href="../changelog/migration_20.html#migration-20-autocommit"><span class="std std-ref">Library-level (but not driver level) “Autocommit” removed from both Core and ORM</span></a> for discussion.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.compiled_cache"></span><strong>compiled_cache</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.compiled_cache">¶</a> – <p>Available on: Connection.
A dictionary where <a class="reference internal" href="internals.html#sqlalchemy.engine.Compiled" title="sqlalchemy.engine.Compiled"><code class="xref py py-class docutils literal notranslate"><span class="pre">Compiled</span></code></a> objects
will be cached when the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
compiles a clause
expression into a <a class="reference internal" href="internals.html#sqlalchemy.engine.Compiled" title="sqlalchemy.engine.Compiled"><code class="xref py py-class docutils literal notranslate"><span class="pre">Compiled</span></code></a> object.  This dictionary will
supersede the statement cache that may be configured on the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> itself.   If set to None, caching
is disabled, even if the engine has a configured cache size.</p>
<p>Note that the ORM makes use of its own “compiled” caches for
some operations, including flush operations.  The caching
used by the ORM internally supersedes a cache dictionary
specified here.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.logging_token"></span><strong>logging_token</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.logging_token">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>Adds the specified string token surrounded by brackets in log
messages logged by the connection, i.e. the logging that’s enabled
either via the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a> flag or via the
<code class="docutils literal notranslate"><span class="pre">logging.getLogger(&quot;sqlalchemy.engine&quot;)</span></code> logger. This allows a
per-connection or per-sub-engine token to be available which is
useful for debugging concurrent connection scenarios.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0b2.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="engines.html#dbengine-logging-tokens"><span class="std std-ref">Setting Per-Connection / Sub-Engine Tokens</span></a> - usage example</p>
<p><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.logging_name" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.logging_name</span></code></a> - adds a name to the
name used by the Python logger object itself.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.isolation_level"></span><strong>isolation_level</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level">¶</a> – <p>Available on: <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>Set the transaction isolation level for the lifespan of this
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.
Valid values include those string
values accepted by the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
parameter passed to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.  These levels are
semi-database specific; see individual dialect documentation for
valid levels.</p>
<p>The isolation level option applies the isolation level by emitting
statements on the  DBAPI connection, and <strong>necessarily affects the
original Connection object overall</strong>, not just the copy that is
returned by the call to <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>
method.  The isolation level will remain at the given setting until
the DBAPI connection itself is returned to the connection pool, i.e.
the <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a> method on the original
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is called,
where  an event handler will emit
additional statements on the DBAPI connection in order to revert the
isolation level change.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">isolation_level</span></code> execution option should
<strong>not</strong> be used when a transaction is already established, that
is, the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>
method or similar has been
called.  A database cannot change the isolation level on a
transaction in progress, and different DBAPIs and/or
SQLAlchemy dialects may implicitly roll back or commit
the transaction, or not affect the connection at all.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">isolation_level</span></code> execution option is implicitly
reset if the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is invalidated, e.g. via
the <a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> method, or if a
disconnection error occurs.  The new connection produced after
the invalidation will not have the isolation level re-applied
to it automatically.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> isolation level</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a>
- view current level</p>
<p><a class="reference internal" href="../dialects/sqlite.html#sqlite-isolation-level"><span class="std std-ref">SQLite Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/postgresql.html#postgresql-isolation-level"><span class="std std-ref">PostgreSQL Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/mysql.html#mysql-isolation-level"><span class="std std-ref">MySQL Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../dialects/mssql.html#mssql-isolation-level"><span class="std std-ref">SQL Server Transaction Isolation</span></a></p>
<p><a class="reference internal" href="../orm/session_transaction.html#session-transaction-isolation"><span class="std std-ref">Setting Transaction Isolation Levels / DBAPI AUTOCOMMIT</span></a> - for the ORM</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.no_parameters"></span><strong>no_parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.no_parameters">¶</a> – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, if the final parameter
list or dictionary is totally empty, will invoke the
statement on the cursor as <code class="docutils literal notranslate"><span class="pre">cursor.execute(statement)</span></code>,
not passing the parameter collection at all.
Some DBAPIs such as psycopg2 and mysql-python consider
percent signs as significant only when parameters are
present; this option allows code to generate SQL
containing percent signs (and possibly other characters)
that is neutral regarding whether it’s executed by the DBAPI
or piped into a script that’s later invoked by
command line tools.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.stream_results"></span><strong>stream_results</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results">¶</a> – <p>Available on: Connection, statement.
Indicate to the dialect that results should be
“streamed” and not pre-buffered, if possible.  This is a limitation
of many DBAPIs.  The flag is currently understood within a subset
of dialects within the PostgreSQL and MySQL categories, and
may be supported by other third party dialects as well.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-stream-results"><span class="std std-ref">Using Server Side Cursors (a.k.a. stream results)</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.schema_translate_map"></span><strong>schema_translate_map</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map">¶</a> – <p>Available on: Connection, Engine.
A dictionary mapping schema names to schema names, that will be
applied to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a> element of each
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
encountered when SQL or DDL expression elements
are compiled into strings; the resulting schema name will be
converted based on presence in the map of the original name.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#schema-translating"><span class="std std-ref">Translation of Schema Names</span></a></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
<p><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.get_execution_options" title="sqlalchemy.engine.Connection.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.get_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">get_execution_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.get_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the non-SQL options which will take effect during execution.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.get_isolation_level">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">get_isolation_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.get_isolation_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current isolation level assigned to this
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This will typically be the default isolation level as determined
by the dialect, unless if the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
feature has been used to alter the isolation level on a
per-<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> basis.</p>
<p>This attribute will typically perform a live SQL operation in order
to procure the current isolation level, so the value returned is the
actual level on the underlying DBAPI connection regardless of how
this state was set.  Compare to the
<a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.default_isolation_level</span></code></a> accessor
which returns the dialect-level setting without performing a SQL
query.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.9.9.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.default_isolation_level</span></code></a>
- view default level</p>
<p><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> isolation level</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
- set per <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> isolation level</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.get_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current nested transaction in progress, if any.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.get_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current root transaction in progress, if any.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.in_nested_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if a transaction is in progress.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Info dictionary associated with the underlying DBAPI connection
referred to by this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, allowing user-defined
data to be associated with the connection.</p>
<p>The data here will follow along with the DBAPI connection including
after it is returned to the connection pool and used again
in subsequent instances of <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidate the underlying DBAPI connection associated with
this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>An attempt will be made to close the underlying DBAPI connection
immediately; however if this operation fails, the error is logged
but not raised.  The connection is then discarded whether or not
close() succeeded.</p>
<p>Upon the next use (where “use” typically means using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method or similar),
this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will attempt to
procure a new DBAPI connection using the services of the
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> as a source of connectivity (e.g.
a “reconnection”).</p>
<p>If a transaction was in progress (e.g. the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method has been called) when
<a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> method is called, at the DBAPI
level all state associated with this transaction is lost, as
the DBAPI connection is closed.  The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
will not allow a reconnection to proceed until the
<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object is ended, by calling the
<a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> method; until that point, any attempt at
continuing to use the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will raise an
<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a>.
This is to prevent applications from accidentally
continuing an ongoing transactional operations despite the
fact that the transaction has been lost due to an
invalidation.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> method,
just like auto-invalidation,
will at the connection pool level invoke the
<a class="reference internal" href="events.html#sqlalchemy.events.PoolEvents.invalidate" title="sqlalchemy.events.PoolEvents.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PoolEvents.invalidate()</span></code></a> event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Connection.invalidate.params.exception"></span><strong>exception</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.invalidate.params.exception">¶</a> – an optional <code class="docutils literal notranslate"><span class="pre">Exception</span></code> instance that’s the
reason for the invalidation.  is passed along to event handlers
and logging functions.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="pooling.html#pool-connection-invalidation"><span class="std std-ref">More on Invalidation</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.invalidated">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">invalidated</span></span><a class="headerlink" href="#sqlalchemy.engine.Connection.invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this connection was invalidated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.run_callable">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">run_callable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callable_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.run_callable" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a callable object or function, execute it, passing
a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> as the first argument.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Connection.run_callable" title="sqlalchemy.engine.Connection.run_callable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.run_callable()</span></code></a> method is deprecated and will be removed in a future release.  Invoke the callable function directly, passing the Connection.</p>
</div>
<p>The given *args and **kwargs are passed subsequent
to the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> argument.</p>
<p>This function, along with <a class="reference internal" href="#sqlalchemy.engine.Engine.run_callable" title="sqlalchemy.engine.Engine.run_callable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.run_callable()</span></code></a>,
allows a function to be run with a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
or <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object without the need to know
which one is being dealt with.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">multiparams</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes and returns the first column of the first row.</p>
<p>The underlying result/cursor is closed after execution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.schema_for_object">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">schema_for_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.schema_for_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the schema name for the given schema item taking into
account current schema translate map.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Connection.transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Connection"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection.</span></code></a><span class="sig-name descname"><span class="pre">transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callable_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the given function within a transaction boundary.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Connection.transaction" title="sqlalchemy.engine.Connection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.transaction()</span></code></a> method is deprecated and will be removed in a future release.  Use the <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> context manager instead.</p>
</div>
<p>The function is passed this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
as the first argument, followed by the given *args and **kwargs,
e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="n">y</span><span class="p">})</span>

<span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span><span class="n">do_something</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span></pre></div>
</div>
<p>The operations inside the function are all invoked within the
context of a single <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.
Upon success, the transaction is committed.  If an
exception is raised, the transaction is rolled back
before propagating the exception.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection.transaction" title="sqlalchemy.engine.Connection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transaction()</span></code></a> method is superseded by
the usage of the Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> statement, which can
be used with <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span></pre></div>
</div>
<p>As well as with <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span></pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> - engine-level transactional
context</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.transaction" title="sqlalchemy.engine.Engine.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.transaction()</span></code></a> - engine-level version of
<a class="reference internal" href="#sqlalchemy.engine.Connection.transaction" title="sqlalchemy.engine.Connection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.transaction()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">CreateEnginePlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin" title="Permalink to this definition">¶</a></dt>
<dd><p>A set of hooks intended to augment the construction of an
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object based on entrypoint names in a URL.</p>
<p>The purpose of <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> is to allow third-party
systems to apply engine, pool and dialect level event listeners without
the need for the target application to be modified; instead, the plugin
names can be added to the database URL.  Target applications for
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> include:</p>
<ul class="simple">
<li><p>connection and SQL performance tools, e.g. which use events to track
number of checkouts and/or time spent with statements</p></li>
<li><p>connectivity plugins such as proxies</p></li>
</ul>
<p>A rudimentary <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> that attaches a logger
to an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.engine</span> <span class="kn">import</span> <span class="n">CreateEnginePlugin</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span>

<span class="k">class</span> <span class="nc">LogCursorEventsPlugin</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># consume the parameter &quot;log_cursor_logging_name&quot; from the</span>
        <span class="c1"># URL query</span>
        <span class="n">logging_name</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;log_cursor_logging_name&quot;</span><span class="p">,</span> <span class="s2">&quot;log_cursor&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logging_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="s2">&quot;update the URL to one that no longer includes our parameters&quot;</span>
        <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="n">difference_update_query</span><span class="p">([</span><span class="s2">&quot;log_cursor_logging_name&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">engine_created</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine</span><span class="p">):</span>
        <span class="s2">&quot;attach an event listener after the new Engine is constructed&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;before_cursor_execute&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_event</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_log_event</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">conn</span><span class="p">,</span>
        <span class="n">cursor</span><span class="p">,</span>
        <span class="n">statement</span><span class="p">,</span>
        <span class="n">parameters</span><span class="p">,</span>
        <span class="n">context</span><span class="p">,</span>
        <span class="n">executemany</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Plugin logged cursor event: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">statement</span><span class="p">)</span></pre></div>
</div>
<p>Plugins are registered using entry points in a similar way as that
of dialects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;sqlalchemy.plugins&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;log_cursor_plugin = myapp.plugins:LogCursorEventsPlugin&#39;</span>
    <span class="p">]</span></pre></div>
</div>
<p>A plugin that uses the above names would be invoked from a database
URL as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test?&quot;</span>
    <span class="s2">&quot;plugin=log_cursor_plugin&amp;log_cursor_logging_name=mylogger&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">plugin</span></code> URL parameter supports multiple instances, so that a URL
may specify multiple plugins; they are loaded in the order stated
in the URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test?&quot;</span>
  <span class="s2">&quot;plugin=plugin_one&amp;plugin=plugin_twp&amp;plugin=plugin_three&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The plugin names may also be passed directly to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>
using the <a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.plugins" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.plugins</span></code></a> argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
  <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;myplugin&quot;</span><span class="p">])</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.3: </span>plugin names can also be specified
to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> as a list</p>
</div>
<p>A plugin may consume plugin-specific arguments from the
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object as well as the <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> dictionary, which is
the dictionary of arguments passed to the <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>
call.  “Consuming” these arguments includes that they must be removed
when the plugin initializes, so that the arguments are not passed along
to the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> constructor, where they will raise an
<a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> because they are not known by the dialect.</p>
<p>As of version 1.4 of SQLAlchemy, arguments should continue to be consumed
from the <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> dictionary directly, by removing the values with a
method such as <code class="docutils literal notranslate"><span class="pre">dict.pop</span></code>. Arguments from the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object
should be consumed by implementing the
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a> method, returning a new copy
of the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> with plugin-specific parameters removed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_one</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;my_argument_one&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_two</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;my_argument_two&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_three</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;my_argument_three&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="n">difference_update_query</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;my_argument_one&quot;</span><span class="p">,</span> <span class="s2">&quot;my_argument_two&quot;</span><span class="p">]</span>
        <span class="p">)</span></pre></div>
</div>
<p>Arguments like those illustrated above would be consumed from a
<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> call such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test?&quot;</span>
  <span class="s2">&quot;plugin=myplugin&amp;my_argument_one=foo&amp;my_argument_two=bar&quot;</span><span class="p">,</span>
  <span class="n">my_argument_three</span><span class="o">=</span><span class="s1">&#39;bat&#39;</span>
<span class="p">)</span></pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object is now immutable; a
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> that needs to alter the
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> should implement the newly added
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a> method, which
is invoked after the plugin is constructed.</p>
<p>For migration, construct the plugin in the following way, checking
for the existence of the <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a>
method to detect which version is running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">,</span> <span class="s2">&quot;update_url&quot;</span><span class="p">):</span>
            <span class="c1"># detect the 1.4 API</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_one</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;my_argument_one&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_two</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="s1">&#39;my_argument_two&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># detect the 1.3 and earlier API - mutate the</span>
            <span class="c1"># URL directly</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_one</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;my_argument_one&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_two</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;my_argument_two&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_three</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;my_argument_three&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="c1"># this method is only called in the 1.4 version</span>
        <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="n">difference_update_query</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;my_argument_one&quot;</span><span class="p">,</span> <span class="s2">&quot;my_argument_two&quot;</span><span class="p">]</span>
        <span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../changelog/migration_14.html#change-5526"><span class="std std-ref">The URL object is now immutable</span></a> - overview of the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> change which
also includes notes regarding <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a>.</p>
</div>
</div>
<p>When the engine creation process completes and produces the
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object, it is again passed to the plugin via the
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="sqlalchemy.engine.CreateEnginePlugin.engine_created"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.engine_created()</span></code></a> hook.  In this hook, additional
changes can be made to the engine, most typically involving setup of
events (e.g. those defined in <a class="reference internal" href="events.html"><span class="std std-ref">Core Events</span></a>).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a>.</p>
<p>The plugin object is instantiated individually for each call
to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.  A single <code class="xref py py-class docutils literal notranslate">
<span class="pre">Engine</span></code> will be
passed to the <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="sqlalchemy.engine.CreateEnginePlugin.engine_created"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.engine_created()</span></code></a> method
corresponding to this URL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.CreateEnginePlugin.params.url"></span><strong>url</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.params.url">¶</a> – <p>the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object.  The plugin may inspect
the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> for arguments.  Arguments used by the
plugin should be removed, by returning an updated <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>
from the <a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a> method.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object is now immutable, so a
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> that needs to alter the
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object should implement the
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="sqlalchemy.engine.CreateEnginePlugin.update_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateEnginePlugin.update_url()</span></code></a> method.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.CreateEnginePlugin.params.kwargs"></span><strong>kwargs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.params.kwargs">¶</a> – The keyword arguments passed to
<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.engine_created">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">engine_created</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
object when it is fully constructed.</p>
<p>The plugin may make additional changes to the engine, such as
registering engine or connection pool events.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.handle_dialect_kwargs">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">handle_dialect_kwargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect_args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.handle_dialect_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>parse and modify dialect kwargs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.handle_pool_kwargs">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">handle_pool_kwargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pool_cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.handle_pool_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>parse and modify pool kwargs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CreateEnginePlugin.update_url">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CreateEnginePlugin.</span></code></a><span class="sig-name descname"><span class="pre">update_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.update_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>.</p>
<p>A new <a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> should be returned.   This method is
typically used to consume configuration arguments from the
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> which must be removed, as they will not be
recognized by the dialect.  The
<a class="reference internal" href="engines.html#sqlalchemy.engine.URL.difference_update_query" title="sqlalchemy.engine.URL.difference_update_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.difference_update_query()</span></code></a> method is available
to remove these arguments.   See the docstring at
<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> for an example.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logging_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">echo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_cache_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hide_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects a <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> and
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> together to provide a
source of database connectivity and behavior.</p>
<p>This is the <strong>SQLAlchemy 1.x version</strong> of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.  For
the <a class="reference internal" href="../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> version, which includes  some API differences,
see <a class="reference internal" href="future.html#sqlalchemy.future.Engine" title="sqlalchemy.future.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>An <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object is instantiated publicly using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> function.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="engines.html"><span class="doc">Engine Configuration</span></a></p>
<p><a class="reference internal" href="#"><span class="std std-ref">Working with Engines and Connections</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connectable</span></code>, <a class="reference internal" href="internals.html#sqlalchemy.log.Identified" title="sqlalchemy.log.Identified"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.log.Identified</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_with_result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a context manager delivering a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
with a <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> established.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into table (x, y, z) values (1, 2, 3)&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;my_special_procedure(5)&quot;</span><span class="p">))</span></pre></div>
</div>
<p>Upon successful operation, the <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
is committed.  If an error is raised, the <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
is rolled back.</p>
<p>Legacy use only: the <code class="docutils literal notranslate"><span class="pre">close_with_result</span></code> flag is normally <code class="docutils literal notranslate"><span class="pre">False</span></code>,
and indicates that the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> will be closed when
the operation is complete. When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, it indicates the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is in “single use” mode, where the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> returned by the first call to
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> will close the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> when that <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> has
exhausted all result rows.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> - procure a
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> from
an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> - start a <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
for a particular <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.clear_compiled_cache">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">clear_compiled_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.clear_compiled_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the compiled cache associated with the dialect.</p>
<p>This applies <strong>only</strong> to the built-in cache that is established
via the <code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.query_cache_size</span></code> parameter.
It will not impact any dictionary caches that were passed via the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.query_cache" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.query_cache</span></code></a> parameter.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.connect">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_with_result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object is a facade that uses a DBAPI
connection internally in order to communicate with the database.  This
connection is procured from the connection-holding <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>
referenced by this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>. When the
<a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.close()</span></code></a> method of the
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object
is called, the underlying DBAPI connection is then returned to the
connection pool, where it may be used again in a subsequent call to
<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.dispose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">dispose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.dispose" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispose of the connection pool used by this
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>This has the effect of fully closing all <strong>currently checked in</strong>
database connections.  Connections that are still checked out
will <strong>not</strong> be closed, however they will no longer be associated
with this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
so when they are closed individually,
eventually the <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> which they are associated with will
be garbage collected and they will be closed out fully, if
not already closed on checkin.</p>
<p>A new connection pool is created immediately after the old one has
been disposed.   This new pool, like all SQLAlchemy connection pools,
does not make any actual connections to the database until one is
first requested, so as long as the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
isn’t used again,
no new connections will be made.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#engine-disposal"><span class="std std-ref">Engine Disposal</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.driver">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">driver</span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver name of the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>
in use by this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">multiparams</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the given construct and returns a
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execute()</span></code></a> method is considered legacy as of the 1.x series of SQLAlchemy and will be removed in 2.0. All statement execution in SQLAlchemy 2.0 is performed by the <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method of <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, or in the ORM by the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method of <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>. (Background on SQLAlchemy 2.0 at: <a class="reference internal" href="../changelog/migration_20.html"><span class="std std-ref">Migrating to SQLAlchemy 2.0</span></a>)</p>
</div>
<p>The arguments are the same as those used by
<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>.</p>
<p>Here, a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is acquired using the
<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> method, and the statement executed
with that connection. The returned <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>
is flagged
such that when the <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> is exhausted and its
underlying cursor is closed, the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
created here
will also be closed, which allows its associated DBAPI connection
resource to be returned to the connection pool.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> that will provide
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects with the given execution options.</p>
<p>The returned <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> remains related to the original
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> in that it shares the same connection pool and
other state:</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> used by the new <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
is the
same instance.  The <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.dispose()</span></code></a>
method will replace
the connection pool instance for the parent engine as well
as this one.</p></li>
<li><p>Event listeners are “cascaded” - meaning, the new
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
inherits the events of the parent, and new events can be associated
with the new <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> individually.</p></li>
<li><p>The logging configuration and logging_name is copied from the parent
<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p></li>
</ul>
<p>The intent of the <a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a> method is
to implement “sharding” schemes where multiple <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
objects refer to the same connection pool, but are differentiated
by options that would be consumed by a custom event:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">primary_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql://&quot;</span><span class="p">)</span>
<span class="n">shard1</span> <span class="o">=</span> <span class="n">primary_engine</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">shard_id</span><span class="o">=</span><span class="s2">&quot;shard1&quot;</span><span class="p">)</span>
<span class="n">shard2</span> <span class="o">=</span> <span class="n">primary_engine</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">shard_id</span><span class="o">=</span><span class="s2">&quot;shard2&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Above, the <code class="docutils literal notranslate"><span class="pre">shard1</span></code> engine serves as a factory for
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
objects that will contain the execution option
<code class="docutils literal notranslate"><span class="pre">shard_id=shard1</span></code>, and <code class="docutils literal notranslate"><span class="pre">shard2</span></code> will produce
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
objects that contain the execution option <code class="docutils literal notranslate"><span class="pre">shard_id=shard2</span></code>.</p>
<p>An event handler can consume the above execution option to perform
a schema switch or other operation, given a connection.  Below
we emit a MySQL <code class="docutils literal notranslate"><span class="pre">use</span></code> statement to switch databases, at the same
time keeping track of which database we’ve established using the
<a class="reference internal" href="#sqlalchemy.engine.Connection.info" title="sqlalchemy.engine.Connection.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.info</span></code></a> dictionary,
which gives us a persistent
storage space that follows the DBAPI connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.engine</span> <span class="kn">import</span> <span class="n">Engine</span>

<span class="n">shards</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span> <span class="n">shard_1</span><span class="p">:</span> <span class="s2">&quot;db1&quot;</span><span class="p">,</span> <span class="s2">&quot;shard_2&quot;</span><span class="p">:</span> <span class="s2">&quot;db2&quot;</span><span class="p">}</span>

<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;before_cursor_execute&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_switch_shard</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">stmt</span><span class="p">,</span>
        <span class="n">params</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">executemany</span><span class="p">):</span>
    <span class="n">shard_id</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">_execution_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;shard_id&#39;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>
    <span class="n">current_shard</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;current_shard&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">current_shard</span> <span class="o">!=</span> <span class="n">shard_id</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;use </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">shards</span><span class="p">[</span><span class="n">shard_id</span><span class="p">])</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;current_shard&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shard_id</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>
- update execution options
on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.update_execution_options" title="sqlalchemy.engine.Engine.update_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.update_execution_options()</span></code></a>
- update the execution
options for a given <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> in place.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.get_execution_options" title="sqlalchemy.engine.Engine.get_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.get_execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.get_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">get_execution_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.get_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the non-SQL options which will take effect during execution.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.has_table">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">has_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.has_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the given backend has a table of the given name.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Engine.has_table" title="sqlalchemy.engine.Engine.has_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.has_table()</span></code></a> method is deprecated and will be removed in a future release.  Please refer to <a class="reference internal" href="reflection.html#sqlalchemy.engine.reflection.Inspector.has_table" title="sqlalchemy.engine.reflection.Inspector.has_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.has_table()</span></code></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="reflection.html#metadata-reflection-inspector"><span class="std std-ref">Fine Grained Reflection with Inspector</span></a> - detailed schema inspection
using the <a class="reference internal" href="reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Inspector</span></code></a> interface.</p>
<p><a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.quoted_name" title="sqlalchemy.sql.expression.quoted_name"><code class="xref py py-class docutils literal notranslate"><span class="pre">quoted_name</span></code></a> - used to pass quoting information along
with a schema identifier.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.name">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#sqlalchemy.engine.Engine.name" title="Permalink to this definition">¶</a></dt>
<dd><p>String name of the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>
in use by this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.raw_connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">raw_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.raw_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a “raw” DBAPI connection from the connection pool.</p>
<p>The returned object is a proxied version of the DBAPI
connection object used by the underlying driver in use.
The object will have all the same behavior as the real DBAPI
connection, except that its <code class="docutils literal notranslate"><span class="pre">close()</span></code> method will result in the
connection being returned to the pool, rather than being closed
for real.</p>
<p>This method provides direct DBAPI connection access for
special situations when the API provided by
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
is not needed.   When a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object is already
present, the DBAPI connection is available using
the <a class="reference internal" href="#sqlalchemy.engine.Connection.connection" title="sqlalchemy.engine.Connection.connection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.connection</span></code></a> accessor.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dbapi-connections"><span class="std std-ref">Working with Driver SQL and Raw DBAPI Connections</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.run_callable">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">run_callable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callable_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.run_callable" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a callable object or function, execute it, passing
a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> as the first argument.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Engine.run_callable" title="sqlalchemy.engine.Engine.run_callable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.run_callable()</span></code></a> method is deprecated and will be removed in a future release.  Use the <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> context manager instead.</p>
</div>
<p>The given *args and **kwargs are passed subsequent
to the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> argument.</p>
<p>This function, along with <a class="reference internal" href="#sqlalchemy.engine.Connection.run_callable" title="sqlalchemy.engine.Connection.run_callable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.run_callable()</span></code></a>,
allows a function to be run with a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
or <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object without the need to know
which one is being dealt with.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">multiparams</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes and returns the first column of the first row.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Engine.scalar" title="sqlalchemy.engine.Engine.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.scalar()</span></code></a> method is considered legacy as of the 1.x series of SQLAlchemy and will be removed in 2.0. All statement execution in SQLAlchemy 2.0 is performed by the <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a> method of <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, or in the ORM by the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method of <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>; the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code> method can then be used to return a scalar result. (Background on SQLAlchemy 2.0 at: <a class="reference internal" href="../changelog/migration_20.html"><span class="std std-ref">Migrating to SQLAlchemy 2.0</span></a>)</p>
</div>
<p>The underlying result/cursor is closed after execution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.table_names">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">table_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.table_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all table names available in the database.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Engine.table_names" title="sqlalchemy.engine.Engine.table_names"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.table_names()</span></code></a> method is deprecated and will be removed in a future release.  Please refer to <a class="reference internal" href="reflection.html#sqlalchemy.engine.reflection.Inspector.get_table_names" title="sqlalchemy.engine.reflection.Inspector.get_table_names"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_table_names()</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.Engine.table_names.params.schema"></span><strong>schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Engine.table_names.params.schema">¶</a> – Optional, retrieve names from a non-default schema.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.Engine.table_names.params.connection"></span><strong>connection</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Engine.table_names.params.connection">¶</a> – Optional, use a specified connection.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callable_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the given function within a transaction boundary.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Engine.transaction" title="sqlalchemy.engine.Engine.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.transaction()</span></code></a> method is deprecated and will be removed in a future release.  Use the <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> context manager instead.</p>
</div>
<p>The function is passed a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> newly procured
from <a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> as the first argument,
followed by the given *args and **kwargs.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="n">y</span><span class="p">})</span>

<span class="n">engine</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span><span class="n">do_something</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span></pre></div>
</div>
<p>The operations inside the function are all invoked within the
context of a single <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.
Upon success, the transaction is committed.  If an
exception is raised, the transaction is rolled back
before propagating the exception.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Engine.transaction" title="sqlalchemy.engine.Engine.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transaction()</span></code></a> method is superseded by
the usage of the Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> statement, which can
be used with <a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span></pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> - engine-level transactional
context</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.transaction" title="sqlalchemy.engine.Connection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.transaction()</span></code></a>
- connection-level version of
<a class="reference internal" href="#sqlalchemy.engine.Engine.transaction" title="sqlalchemy.engine.Engine.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.transaction()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Engine.update_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Engine"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine.</span></code></a><span class="sig-name descname"><span class="pre">update_execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.update_execution_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the default execution_options dictionary
of this <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p>
<p>The given keys/values in **opt are added to the
default execution options that will be used for
all connections.  The initial contents of this dictionary
can be sent via the <code class="docutils literal notranslate"><span class="pre">execution_options</span></code> parameter
to <a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">ExceptionContext</span></span><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Encapsulate information about an error condition in progress.</p>
<p>This object exists solely to be passed to the
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.handle_error()</span></code></a> event,
supporting an interface that
can be extended without backwards-incompatibility.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.9.7.</span></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.chained_exception">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">chained_exception</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.chained_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>The exception that was returned by the previous handler in the
exception chain, if any.</p>
<p>If present, this exception will be the one ultimately raised by
SQLAlchemy unless a subsequent handler replaces it.</p>
<p>May be None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.connection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> in use during the exception.</p>
<p>This member is present, except in the case of a failure when
first connecting.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.engine" title="sqlalchemy.engine.ExceptionContext.engine"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExceptionContext.engine</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.cursor">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">cursor</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>The DBAPI cursor object.</p>
<p>May be None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.engine">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">engine</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> in use during the exception.</p>
<p>This member should always be present, even in the case of a failure
when first connecting.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.0.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.execution_context">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">execution_context</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.execution_context" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> corresponding to the execution
operation in progress.</p>
<p>This is present for statement execution operations, but not for
operations such as transaction begin/end.  It also is not present when
the exception was raised before the <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>
could be constructed.</p>
<p>Note that the <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.statement" title="sqlalchemy.engine.ExceptionContext.statement"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExceptionContext.statement</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.parameters" title="sqlalchemy.engine.ExceptionContext.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExceptionContext.parameters</span></code></a> members may represent a
different value than that of the <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>,
potentially in the case where a
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a> event or similar
modified the statement/parameters to be sent.</p>
<p>May be None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">invalidate_pool_on_disconnect</span></span><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent whether all connections in the pool should be invalidated
when a “disconnect” condition is in effect.</p>
<p>Setting this flag to False within the scope of the
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.handle_error()</span></code></a>
event will have the effect such
that the full collection of connections in the pool will not be
invalidated during a disconnect; only the current connection that is the
subject of the error will actually be invalidated.</p>
<p>The purpose of this flag is for custom disconnect-handling schemes where
the invalidation of other connections in the pool is to be performed
based on other conditions, or even on a per-connection basis.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.3.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.is_disconnect">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">is_disconnect</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.is_disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent whether the exception as occurred represents a “disconnect”
condition.</p>
<p>This flag will always be True or False within the scope of the
<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.handle_error()</span></code></a> handler.</p>
<p>SQLAlchemy will defer to this flag in order to determine whether or not
the connection should be invalidated subsequently.    That is, by
assigning to this flag, a “disconnect” event which then results in
a connection and pool invalidation can be invoked or prevented by
changing this flag.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pool “pre_ping” handler enabled using the
<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.pool_pre_ping" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.pool_pre_ping</span></code></a> parameter does <strong>not</strong>
consult this event before deciding if the “ping” returned false,
as opposed to receiving an unhandled error.   For this use case, the
<a class="reference internal" href="pooling.html#pool-disconnects-pessimistic-custom"><span class="std std-ref">legacy recipe based on engine_connect() may be used</span></a>.  A future API allow more
comprehensive customization of the “disconnect” detection mechanism
across all functions.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.original_exception">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">original_exception</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.original_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>The exception object which was caught.</p>
<p>This member is always present.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.parameters">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">parameters</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameter collection that was emitted directly to the DBAPI.</p>
<p>May be None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.sqlalchemy_exception">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">sqlalchemy_exception</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.sqlalchemy_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.exc.StatementError</span></code></a> which wraps the original,
and will be raised if exception handling is not circumvented by the event.</p>
<p>May be None, as not all exception types are wrapped by SQLAlchemy.
For DBAPI-level exceptions that subclass the dbapi’s Error class, this
field will always be present.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.ExceptionContext.statement">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ExceptionContext.</span></code></a><span class="sig-name descname"><span class="pre">statement</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.statement" title="Permalink to this definition">¶</a></dt>
<dd><p>String SQL statement that was emitted directly to the DBAPI.</p>
<p>May be None.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.NestedTransaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">NestedTransaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.NestedTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent a ‘nested’, or SAVEPOINT transaction.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a> object is created by calling the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> method of
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>When using <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, the semantics of “begin” /
“commit” / “rollback” are as follows:</p>
<ul class="simple">
<li><p>the “begin” operation corresponds to the “BEGIN SAVEPOINT” command, where
the savepoint is given an explicit name that is part of the state
of this object.</p></li>
<li><p>The <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.commit" title="sqlalchemy.engine.NestedTransaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NestedTransaction.commit()</span></code></a> method corresponds to a
“RELEASE SAVEPOINT” operation, using the savepoint identifier associated
with this <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>.</p></li>
<li><p>The <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction.rollback" title="sqlalchemy.engine.NestedTransaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NestedTransaction.rollback()</span></code></a> method corresponds to a
“ROLLBACK TO SAVEPOINT” operation, using the savepoint identifier
associated with this <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>.</p></li>
</ul>
<p>The rationale for mimicking the semantics of an outer transaction in
terms of savepoints so that code may deal with a “savepoint” transaction
and an “outer” transaction in an agnostic way.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_transaction.html#session-begin-nested"><span class="std std-ref">Using SAVEPOINT</span></a> - ORM version of the SAVEPOINT API.</p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.NestedTransaction</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.NestedTransaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.NestedTransaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.NestedTransaction.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.close" title="sqlalchemy.engine.Transaction.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.close()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Close this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.NestedTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.NestedTransaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.NestedTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Commit this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a COMMIT.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“RELEASE SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.NestedTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.NestedTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.NestedTransaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.NestedTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Roll back this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a ROLLBACK.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“ROLLBACK TO SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.RootTransaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">RootTransaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RootTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the “root” transaction on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>This corresponds to the current “BEGIN/COMMIT/ROLLBACK” that’s occurring
for the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>. The <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>
is created by calling upon the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method, and
remains associated with the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> throughout its
active span. The current <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> in use is
accessible via the <a class="reference internal" href="#sqlalchemy.engine.Connection.get_transaction" title="sqlalchemy.engine.Connection.get_transaction"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.get_transaction</span></code></a> method of
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>In <a class="reference internal" href="../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> use, the <a class="reference internal" href="future.html#sqlalchemy.future.Connection" title="sqlalchemy.future.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> also employs
“autobegin” behavior that will create a new
<a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> whenever a connection in a
non-transactional state is used to emit commands on the DBAPI connection.
The scope of the <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a> in 2.0 style
use can be controlled using the <a class="reference internal" href="future.html#sqlalchemy.future.Connection.commit" title="sqlalchemy.future.Connection.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.commit()</span></code></a> and
<a class="reference internal" href="future.html#sqlalchemy.future.Connection.rollback" title="sqlalchemy.future.Connection.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.rollback()</span></code></a> methods.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RootTransaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RootTransaction.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.close" title="sqlalchemy.engine.Transaction.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.close()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Close this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RootTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RootTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Commit this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a COMMIT.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“RELEASE SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RootTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RootTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RootTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Roll back this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a ROLLBACK.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“ROLLBACK TO SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Transaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent a database transaction in progress.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a> object is procured by
calling the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method of
<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">)</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">trans</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into x (a, b) values (1, 2)&quot;</span><span class="p">))</span>
<span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></pre></div>
</div>
<p>The object provides <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rollback()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a>
methods in order to control transaction boundaries.  It
also implements a context manager interface so that
the Python <code class="docutils literal notranslate"><span class="pre">with</span></code> statement can be used with the
<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;insert into x (a, b) values (1, 2)&quot;</span><span class="p">))</span></pre></div>
</div>
<p>The Transaction object is <strong>not</strong> threadsafe.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a></p>
</div>
<div class="class-bases docutils container" id="index-2">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.util.TransactionalContext</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Transaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Transaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Transaction.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Transaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Transaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Transaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a COMMIT.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“RELEASE SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Transaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Transaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Transaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Transaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a ROLLBACK.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“ROLLBACK TO SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">TwoPhaseTransaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent a two-phase transaction.</p>
<p>A new <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a> object may be procured
using the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a> method.</p>
<p>The interface is the same as that of <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
with the addition of the <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code></a> method.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.RootTransaction</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.close" title="sqlalchemy.engine.Transaction.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.close()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Close this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>If this transaction is the base transaction in a begin/commit
nesting, the transaction will rollback().  Otherwise, the
method returns.</p>
<p>This is used to cancel a Transaction without affecting the scope of
an enclosing transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.commit()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Commit this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a COMMIT.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“RELEASE SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction.prepare">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction.</span></code></a><span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare this <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>.</p>
<p>After a PREPARE, the transaction can be committed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.TwoPhaseTransaction.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.TwoPhaseTransaction.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Transaction.rollback()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a></p>
</div>
<p>Roll back this <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>.</p>
<p>The implementation of this may vary based on the type of transaction in
use:</p>
<ul class="simple">
<li><p>For a simple database transaction (e.g. <a class="reference internal" href="#sqlalchemy.engine.RootTransaction" title="sqlalchemy.engine.RootTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code></a>),
it corresponds to a ROLLBACK.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">NestedTransaction</span></code></a>, it corresponds to a
“ROLLBACK TO SAVEPOINT” operation.</p></li>
<li><p>For a <a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>, DBAPI-specific methods for two
phase transactions may be used.</p></li>
</ul>
</dd></dl>

</dd></dl>

</section>
<section id="result-set-api">
<h2>Result Set  API<a class="headerlink" href="#result-set-api" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><span class="sig-name descname">BaseCursorResult</span></a></p></td>
<td><p>Base class for database result objects.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult"><span class="sig-name descname">ChunkedIteratorResult</span></a></p></td>
<td><p>An <a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">IteratorResult</span></code></a> that works from an iterator-producing callable.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><span class="sig-name descname">CursorResult</span></a></p></td>
<td><p>A Result that is representing state from a DBAPI cursor.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.FrozenResult"><span class="sig-name descname">FrozenResult</span></a></p></td>
<td><p>Represents a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object in a “frozen” state suitable
for caching.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.IteratorResult"><span class="sig-name descname">IteratorResult</span></a></p></td>
<td><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that gets data from a Python iterator of
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.LegacyCursorResult"><span class="sig-name descname">LegacyCursorResult</span></a></p></td>
<td><p>Legacy version of <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.LegacyRow"><span class="sig-name descname">LegacyRow</span></a></p></td>
<td><p>A subclass of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> that delivers 1.x SQLAlchemy behaviors
for Core.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><span class="sig-name descname">MappingResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns dictionary values
rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.MergedResult"><span class="sig-name descname">MergedResult</span></a></p></td>
<td><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that is merged from any number of
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> objects.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.Result"><span class="sig-name descname">Result</span></a></p></td>
<td><p>Represent a set of database results.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.Row"><span class="sig-name descname">Row</span></a></p></td>
<td><p>Represent a single result row.</p></td>
</tr>
<tr class="row-odd"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><span class="sig-name descname">RowMapping</span></a></p></td>
<td><p>A <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> that maps column names and objects to <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
<tr class="row-even"><td class="nowrap"><p><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><span class="sig-name descname">ScalarResult</span></a></p></td>
<td><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns scalar values
rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">BaseCursorResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cursor_strategy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cursor_description</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for database result objects.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.inserted_primary_key">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">inserted_primary_key</span></span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.inserted_primary_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the primary key for the row just inserted.</p>
<p>The return value is a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object representing
a named tuple of primary key values in the order in which the
primary key columns are configured in the source
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4.8: </span>- the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>
value is now a named tuple via the <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> class,
rather than a plain tuple.</p>
</div>
<p>This accessor only applies to single row <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a>
constructs which did not explicitly specify
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.returning()</span></code></a>.    Support for multirow inserts,
while not yet available for most backends, would be accessed using
the <a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a> accessor.</p>
<p>Note that primary key columns which specify a server_default clause, or
otherwise do not qualify as “autoincrement” columns (see the notes at
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>), and were generated using the database-side
default, will appear in this list as <code class="docutils literal notranslate"><span class="pre">None</span></code> unless the backend
supports “returning” and the insert statement executed with the
“implicit returning” enabled.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() construct.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.inserted_primary_key_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">inserted_primary_key_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.inserted_primary_key_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value of <a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>
as a row contained within a list; some dialects may support a
multiple row form as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As indicated below, in current SQLAlchemy versions this
accessor is only useful beyond what’s already supplied by
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> when using the
<a class="reference internal" href="../dialects/postgresql.html#postgresql-psycopg2"><span class="std std-ref">psycopg2</span></a> dialect.   Future versions hope to
generalize this feature to more dialects.</p>
</div>
<p>This accessor is added to support dialects that offer the feature
that is currently implemented by the <a class="reference internal" href="../dialects/postgresql.html#psycopg2-executemany-mode"><span class="std std-ref">Psycopg2 Fast Execution Helpers</span></a>
feature, currently <strong>only the psycopg2 dialect</strong>, which provides
for many rows to be INSERTed at once while still retaining the
behavior of being able to return server-generated primary key values.</p>
<ul class="simple">
<li><p><strong>When using the psycopg2 dialect, or other dialects that may support
“fast executemany” style inserts in upcoming releases</strong> : When
invoking an INSERT statement while passing a list of rows as the
second argument to <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>, this accessor
will then provide a list of rows, where each row contains the primary
key value for each row that was INSERTed.</p></li>
<li><p><strong>When using all other dialects / backends that don’t yet support
this feature</strong>: This accessor is only useful for <strong>single row INSERT
statements</strong>, and returns the same information as that of the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> within a
single-element list. When an INSERT statement is executed in
conjunction with a list of rows to be INSERTed, the list will contain
one row per row inserted in the statement, however it will contain
<code class="docutils literal notranslate"><span class="pre">None</span></code> for any server-generated values.</p></li>
</ul>
<p>Future releases of SQLAlchemy will further generalize the
“fast execution helper” feature of psycopg2 to suit other dialects,
thus allowing this accessor to be of more general use.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.is_insert">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">is_insert</span></span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.is_insert" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> is the result
of a executing an expression language compiled
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> construct.</p>
<p>When True, this implies that the
<a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.inserted_primary_key" title="sqlalchemy.engine.BaseCursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inserted_primary_key</span></code></a> attribute is accessible,
assuming the statement did not include
a user defined “returning” construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.last_inserted_params">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">last_inserted_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.last_inserted_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the collection of inserted parameters from this
execution.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.last_updated_params">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">last_updated_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.last_updated_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the collection of updated parameters from this
execution.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an update() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.lastrow_has_defaults">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">lastrow_has_defaults</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.lastrow_has_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">lastrow_has_defaults()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.lastrowid">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">lastrowid</span></span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.lastrowid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ‘lastrowid’ accessor on the DBAPI cursor.</p>
<p>This is a DBAPI specific method and is only functional
for those backends which support it, for statements
where it is appropriate.  It’s behavior is not
consistent across backends.</p>
<p>Usage of this method is normally unnecessary when
using insert() expression constructs; the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> attribute provides a
tuple of primary key values for a newly inserted row,
regardless of database backend.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.postfetch_cols">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">postfetch_cols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.postfetch_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">postfetch_cols()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() or update() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.prefetch_cols">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">prefetch_cols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.prefetch_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">prefetch_cols()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() or update() construct.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.returned_defaults">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returned_defaults</span></span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.returned_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the values of default columns that were fetched using
the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a> feature.</p>
<p>The value is an instance of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>
if <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a> was not used or if the
backend does not support RETURNING.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.9.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.returned_defaults_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returned_defaults_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.returned_defaults_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of rows each containing the values of default
columns that were fetched using
the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a> feature.</p>
<p>The return value is a list of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.returns_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returns_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.returns_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>True if this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> returns zero or more rows.</p>
<p>I.e. if it is legal to call the methods
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchone" title="sqlalchemy.engine.CursorResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchmany" title="sqlalchemy.engine.CursorResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchmany()</span></code></a>
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchall" title="sqlalchemy.engine.CursorResult.fetchall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchall()</span></code></a>.</p>
<p>Overall, the value of <a class="reference internal" href="#sqlalchemy.engine.CursorResult.returns_rows" title="sqlalchemy.engine.CursorResult.returns_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returns_rows</span></code></a> should
always be synonymous with whether or not the DBAPI cursor had a
<code class="docutils literal notranslate"><span class="pre">.description</span></code> attribute, indicating the presence of result columns,
noting that a cursor that returns zero rows still has a
<code class="docutils literal notranslate"><span class="pre">.description</span></code> if a row-returning statement was emitted.</p>
<p>This attribute should be True for all results that are against
SELECT statements, as well as for DML statements INSERT/UPDATE/DELETE
that use RETURNING.   For INSERT/UPDATE/DELETE statements that were
not using RETURNING, the value will usually be False, however
there are some dialect-specific exceptions to this, such as when
using the MSSQL / pyodbc dialect a SELECT is emitted inline in
order to retrieve an inserted primary key value.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.rowcount">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">rowcount</span></span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.rowcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ‘rowcount’ for this result.</p>
<p>The ‘rowcount’ reports the number of rows <em>matched</em>
by the WHERE criterion of an UPDATE or DELETE statement.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notes regarding <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a>:</p>
<ul class="simple">
<li><p>This attribute returns the number of rows <em>matched</em>,
which is not necessarily the same as the number of rows
that were actually <em>modified</em> - an UPDATE statement, for example,
may have no net change on a given row if the SET values
given are the same as those present in the row already.
Such a row would be matched but not modified.
On backends that feature both styles, such as MySQL,
rowcount is configured by default to return the match
count in all cases.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a>
is <em>only</em> useful in conjunction
with an UPDATE or DELETE statement.  Contrary to what the Python
DBAPI says, it does <em>not</em> return the
number of rows available from the results of a SELECT statement
as DBAPIs cannot support this functionality when rows are
unbuffered.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a>
may not be fully implemented by
all dialects.  In particular, most DBAPIs do not support an
aggregate rowcount result from an executemany call.
The <a class="reference internal" href="#sqlalchemy.engine.CursorResult.supports_sane_rowcount" title="sqlalchemy.engine.CursorResult.supports_sane_rowcount"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.supports_sane_rowcount()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount" title="sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.supports_sane_multi_rowcount()</span></code></a> methods
will report from the dialect if each usage is known to be
supported.</p></li>
<li><p>Statements that use RETURNING may not return a correct
rowcount.</p></li>
</ul>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-update-delete-rowcount"><span class="std std-ref">Getting Affected Row Count from UPDATE, DELETE</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 1.4 / 2.0 Tutorial</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.supports_sane_multi_rowcount">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">supports_sane_multi_rowcount</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.supports_sane_multi_rowcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">supports_sane_multi_rowcount</span></code> from the dialect.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> for background.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.BaseCursorResult.supports_sane_rowcount">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">supports_sane_rowcount</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.BaseCursorResult.supports_sane_rowcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">supports_sane_rowcount</span></code> from the dialect.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> for background.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.ChunkedIteratorResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">ChunkedIteratorResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cursor_metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_supports_scalars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamic_yield_per</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ChunkedIteratorResult" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">IteratorResult</span></code></a> that works from an iterator-producing callable.</p>
<p>The given <code class="docutils literal notranslate"><span class="pre">chunks</span></code> argument is a function that is given a number of rows
to return in each chunk, or <code class="docutils literal notranslate"><span class="pre">None</span></code> for all rows.  The function should
then return an un-consumed iterator of lists, each list of the requested
size.</p>
<p>The function can be called at any time again, in which case it should
continue from the same result set but adjust the chunk size as given.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult" title="sqlalchemy.engine.ChunkedIteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.ChunkedIteratorResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.IteratorResult</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ChunkedIteratorResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ChunkedIteratorResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ChunkedIteratorResult.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the row-fetching strategy to fetch num rows at a time.</p>
<p>This impacts the underlying behavior of the result when iterating over
the result object, or otherwise making use of  methods such as
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> that return one row at a time.   Data
from the underlying cursor or other data source will be buffered up to
this many rows in memory, and the buffered collection will then be
yielded out one row at at time or as many rows are requested. Each time
the buffer clears, it will be refreshed to this many rows or as many
rows remain if fewer remain.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method is generally used in
conjunction with the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
execution option, which will allow the database dialect in use to make
use of a server side cursor, if the DBAPI supports it.</p>
<p>Most DBAPIs do not use server side cursors by default, which means  all
rows will be fetched upfront from the database regardless of  the
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> setting.  However,
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> may still be useful in that it batches
the SQLAlchemy-side processing of the raw data from the database, and
additionally when used for ORM scenarios will batch the conversion of
database rows into  ORM entity rows.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.ChunkedIteratorResult.yield_per.params.num"></span><strong>num</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult.yield_per.params.num">¶</a> – number of rows to fetch each time the buffer is refilled.
If set to a value below 1, fetches all rows for the next buffer.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.FrozenResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">FrozenResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.FrozenResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object in a “frozen” state suitable
for caching.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a> object is returned from the
<a class="reference internal" href="#sqlalchemy.engine.Result.freeze" title="sqlalchemy.engine.Result.freeze"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.freeze()</span></code></a> method of any <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>
object.</p>
<p>A new iterable <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object is generated from a fixed
set of data each time the <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a> is invoked as
a callable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

<span class="n">frozen</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>

<span class="n">unfrozen_result_one</span> <span class="o">=</span> <span class="n">frozen</span><span class="p">()</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">unfrozen_result_one</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">unfrozen_result_two</span> <span class="o">=</span> <span class="n">frozen</span><span class="p">()</span>
<span class="n">rows</span> <span class="o">=</span> <span class="n">unfrozen_result_two</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="c1"># ... etc</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_events.html#do-orm-execute-re-executing"><span class="std std-ref">Re-Executing Statements</span></a> - example usage within the
ORM to implement a result-set cache.</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_frozen_result()</span></code> - ORM function to merge
a frozen result back into a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.IteratorResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">IteratorResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cursor_metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_source_supports_scalars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.IteratorResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that gets data from a Python iterator of
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.IteratorResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result</span></code></a>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.LegacyRow">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">LegacyRow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keymap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_style</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.LegacyRow" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> that delivers 1.x SQLAlchemy behaviors
for Core.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> class is where most of the Python mapping
(i.e. dictionary-like)
behaviors are implemented for the row object.  The mapping behavior
of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> going forward is accessible via the <code class="xref py py-class docutils literal notranslate"><span class="pre">_mapping</span></code>
attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>- added <a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> which encapsulates most
of the deprecated behaviors of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.LegacyRow</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.LegacyRow.has_key">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.LegacyRow"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.LegacyRow.</span></code></a><span class="sig-name descname"><span class="pre">has_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.LegacyRow.has_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> contains the given key.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.LegacyRow.has_key" title="sqlalchemy.engine.LegacyRow.has_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LegacyRow.has_key()</span></code></a> method is deprecated and will be removed in a future release.  To test for key membership, use the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute, i.e. ‘key in row._mapping`.</p>
</div>
<p>Through the SQLAlchemy 1.x series, the <code class="docutils literal notranslate"><span class="pre">__contains__()</span></code> method of
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> (or <a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> as of SQLAlchemy 1.4)  also links
to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Row.has_key()</span></code>, in that an expression such as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;some_col&quot;</span> <span class="ow">in</span> <span class="n">row</span></pre></div>
</div>
<p>Will return True if the row contains a column named <code class="docutils literal notranslate"><span class="pre">&quot;some_col&quot;</span></code>,
in the way that a Python mapping works.</p>
<p>However, it is planned that the 2.0 series of SQLAlchemy will reverse
this behavior so that <code class="docutils literal notranslate"><span class="pre">__contains__()</span></code> will refer to a value being
present in the row, in the way that a Python tuple works.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../changelog/migration_14.html#change-4710-core"><span class="std std-ref">RowProxy is no longer a “proxy”; is now called Row and behaves like an enhanced named tuple</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.LegacyRow.items">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.LegacyRow"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.LegacyRow.</span></code></a><span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.LegacyRow.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of tuples, each tuple containing a key/value pair.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.LegacyRow.items" title="sqlalchemy.engine.LegacyRow.items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LegacyRow.items()</span></code></a> method is deprecated and will be removed in a future release.  Use the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute, i.e., ‘row._mapping.items()’.</p>
</div>
<p>This method is analogous to the Python dictionary <code class="docutils literal notranslate"><span class="pre">.items()</span></code> method,
except that it returns a list, not an iterator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.LegacyRow.iterkeys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.LegacyRow"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.LegacyRow.</span></code></a><span class="sig-name descname"><span class="pre">iterkeys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.LegacyRow.iterkeys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a an iterator against the <a class="reference internal" href="#sqlalchemy.engine.Row.keys" title="sqlalchemy.engine.Row.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row.keys()</span></code></a> method.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.LegacyRow.iterkeys" title="sqlalchemy.engine.LegacyRow.iterkeys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LegacyRow.iterkeys()</span></code></a> method is deprecated and will be removed in a future release.  Use the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute, i.e., ‘row._mapping.keys()’.</p>
</div>
<p>This method is analogous to the Python-2-only dictionary
<code class="docutils literal notranslate"><span class="pre">.iterkeys()</span></code> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.LegacyRow.itervalues">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.LegacyRow"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.LegacyRow.</span></code></a><span class="sig-name descname"><span class="pre">itervalues</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.LegacyRow.itervalues" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a an iterator against the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Row.values()</span></code> method.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.LegacyRow.itervalues" title="sqlalchemy.engine.LegacyRow.itervalues"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LegacyRow.itervalues()</span></code></a> method is deprecated and will be removed in a future release.  Use the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute, i.e., ‘row._mapping.values()’.</p>
</div>
<p>This method is analogous to the Python-2-only dictionary
<code class="docutils literal notranslate"><span class="pre">.itervalues()</span></code> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.LegacyRow.values">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.LegacyRow"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.LegacyRow.</span></code></a><span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.LegacyRow.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the values represented by this <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> as a list.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.LegacyRow.values" title="sqlalchemy.engine.LegacyRow.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LegacyRow.values()</span></code></a> method is deprecated and will be removed in a future release.  Use the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute, i.e., ‘row._mapping.values()’.</p>
</div>
<p>This method is analogous to the Python dictionary <code class="docutils literal notranslate"><span class="pre">.values()</span></code> method,
except that it returns a list, not an iterator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.MergedResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">MergedResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cursor_metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MergedResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that is merged from any number of
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> objects.</p>
<p>Returned by the <a class="reference internal" href="#sqlalchemy.engine.Result.merge" title="sqlalchemy.engine.Result.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.merge()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.MergedResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.MergedResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.IteratorResult" title="sqlalchemy.engine.IteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.IteratorResult</span></code></a>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cursor_metadata</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent a set of database results.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object provides a completely
updated usage model and calling facade for SQLAlchemy Core and
SQLAlchemy ORM.   In Core, it forms the basis of the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> object which replaces the previous
<code class="xref py py-class docutils literal notranslate"><span class="pre">ResultProxy</span></code> interface.   When using the ORM, a higher level
object called <a class="reference internal" href="#sqlalchemy.engine.ChunkedIteratorResult" title="sqlalchemy.engine.ChunkedIteratorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChunkedIteratorResult</span></code></a> is normally used.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In SQLAlchemy 1.4 and above, this object is
used for ORM results returned by <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>, which can
yield instances of ORM mapped objects either individually or within
tuple-like rows. Note that the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object does not
deduplicate instances or rows automatically as is the case with the
legacy <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object. For in-Python de-duplication of
instances or rows, use the <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> modifier
method.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../tutorial/dbapi_transactions.html#tutorial-fetching-rows"><span class="std std-ref">Fetching Rows</span></a> - in the <a class="reference internal" href="../tutorial/index.html"><span class="doc">SQLAlchemy 1.4 / 2.0 Tutorial</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.ResultInternal</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all rows in a list.</p>
<p>Closes the result set after invocation.   Subsequent invocations
will return an empty list.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
<p>This method may be used to limit the columns returned as well
as to reorder them.   The given list of expressions are normally
a series of integers or string key names.   They may also be
appropriate <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects which correspond to
a given statement construct.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">statement</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>

<span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<p>Example of using the column objects from the statement itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
        <span class="n">statement</span><span class="o">.</span><span class="n">selected_columns</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
        <span class="n">statement</span><span class="o">.</span><span class="n">selected_columns</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span>
<span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.columns.params.*col_expressions"></span><strong>*col_expressions</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.columns.params.*col_expressions">¶</a> – indicates columns to be returned.  Elements
may be integer row indexes, string column names, or appropriate
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects corresponding to a select construct.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object with the modifications
given.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many rows.</p>
<p>When all rows are exhausted, returns an empty list.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch rows in groups, use the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>
method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one row.</p>
<p>When all rows are exhausted, returns None.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch the first row of a result only, use the
<a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> method.  To iterate through all
rows, iterate the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object if no filters are applied, or None
if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first row or None if no row is present.</p>
<p>Closes the result set and discards remaining rows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the <a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object, or None
if no rows remain.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.freeze">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">freeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.freeze" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a callable object that will produce copies of this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> when invoked.</p>
<p>The callable object returned is an instance of
<a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>.</p>
<p>This is used for result set caching.  The method must be called
on the result when it has been unconsumed, and calling the method
will consume the result fully.   When the <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>
is retrieved from a cache, it can be called any number of times where
it will produce a new <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object each time
against its stored set of rows.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_events.html#do-orm-execute-re-executing"><span class="std std-ref">Re-Executing Statements</span></a> - example usage within the
ORM to implement a result-set cache.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.keys" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">mappings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.mappings" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a mappings filter to returned rows, returning an instance of
<a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a>.</p>
<p>When this filter is applied, fetching rows will return
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> objects instead of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a new <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> filtering object
referring to this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">others</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> with other compatible result
objects.</p>
<p>The object returned is an instance of <a class="reference internal" href="#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.MergedResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MergedResult</span></code></a>,
which will be composed of iterators from the given result
objects.</p>
<p>The new result will use the metadata from this result object.
The subsequent result objects must be against an identical
set of result / cursor metadata, otherwise the behavior is
undefined.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one row or raise an exception.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a> if the result returns no
rows, or <a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a> if multiple rows
would be returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the <a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>, <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one result or raise an exception.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if the result has no rows.
Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>
if multiple rows are returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or None if no row is available.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of rows of the size given.</p>
<p>Each list will be of the size given, excluding the last list to
be yielded, which may have a small number of rows.  No empty
lists will be yielded.</p>
<p>The result object is automatically closed when the iterator
is fully consumed.</p>
<p>Note that the backend driver will usually buffer the entire result
ahead of time unless the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> execution
option is used indicating that the driver should not pre-buffer
results, if possible.   Not all drivers support this option and
the option is silently ignored for those who do not.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.partitions.params.size"></span><strong>size</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.partitions.params.size">¶</a> – indicate the maximum number of rows to be present
in each list yielded.  If None, makes use of the value set by
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a>, if present, otherwise uses the
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> default which may be backend
specific.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>iterator of lists</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.scalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first column of the first row, and close the result set.</p>
<p>Returns None if there are no rows to fetch.</p>
<p>No validation is performed to test if additional rows remain.</p>
<p>After calling this method, the object is fully closed,
e.g. the <a class="reference internal" href="#sqlalchemy.engine.CursorResult.close" title="sqlalchemy.engine.CursorResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a>
method will have been called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a Python scalar value , or None if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.scalar_one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.scalar_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one scalar result or raise an exception.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and then
<a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.scalar_one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.scalar_one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one or no scalar result.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and then
<a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.scalars" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object which
will return single elements rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select int_id from table&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span></pre></div>
</div>
<p>When results are fetched from the <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a>
filtering object, the single column-row that would be returned by the
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> is instead returned as the column’s value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.scalars.params.index"></span><strong>index</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.scalars.params.index">¶</a> – integer or row key indicating the column to be fetched
from each row, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code> indicating the first column.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object referring
to this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
<p>When this filter is applied with no arguments, the rows or objects
returned will filtered such that each row is returned uniquely. The
algorithm used to determine this uniqueness is by default the Python
hashing identity of the whole tuple.   In some cases a specialized
per-entity hashing scheme may be used, such as when using the ORM, a
scheme is applied which  works against the primary key identity of
returned objects.</p>
<p>The unique filter is applied <strong>after all other filters</strong>, which means
if the columns returned have been refined using a method such as the
<a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a>
method, the uniquing is applied to <strong>only the column or columns
returned</strong>.   This occurs regardless of the order in which these
methods have been called upon the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<p>The unique filter also changes the calculus used for methods like
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>.
When using <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a>, these methods will continue
to yield the number of rows or objects requested, after uniquing
has been applied.  However, this necessarily impacts the buffering
behavior of the underlying cursor or datasource, such that multiple
underlying calls to <code class="docutils literal notranslate"><span class="pre">cursor.fetchmany()</span></code> may be necessary in order
to accumulate enough objects in order to provide a unique collection
of the requested size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.unique.params.strategy"></span><strong>strategy</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.unique.params.strategy">¶</a> – a callable that will be applied to rows or objects
being iterated, which should return an object that represents the
unique value of the row.   A Python <code class="docutils literal notranslate"><span class="pre">set()</span></code> is used to store
these identities.   If not passed, a default uniqueness strategy
is used which may have been assembled by the source of this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Result.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Result"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Result.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the row-fetching strategy to fetch num rows at a time.</p>
<p>This impacts the underlying behavior of the result when iterating over
the result object, or otherwise making use of  methods such as
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> that return one row at a time.   Data
from the underlying cursor or other data source will be buffered up to
this many rows in memory, and the buffered collection will then be
yielded out one row at at time or as many rows are requested. Each time
the buffer clears, it will be refreshed to this many rows or as many
rows remain if fewer remain.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method is generally used in
conjunction with the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
execution option, which will allow the database dialect in use to make
use of a server side cursor, if the DBAPI supports it.</p>
<p>Most DBAPIs do not use server side cursors by default, which means  all
rows will be fetched upfront from the database regardless of  the
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> setting.  However,
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> may still be useful in that it batches
the SQLAlchemy-side processing of the raw data from the database, and
additionally when used for ORM scenarios will batch the conversion of
database rows into  ORM entity rows.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.Result.yield_per.params.num"></span><strong>num</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Result.yield_per.params.num">¶</a> – number of rows to fetch each time the buffer is refilled.
If set to a value below 1, fetches all rows for the next buffer.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">ScalarResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">real_result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns scalar values
rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> method.</p>
<p>A special limitation of <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> is that it has
no <code class="docutils literal notranslate"><span class="pre">fetchone()</span></code> method; since the semantics of <code class="docutils literal notranslate"><span class="pre">fetchone()</span></code> are that
the <code class="docutils literal notranslate"><span class="pre">None</span></code> value indicates no more results, this is not compatible
with <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> since there is no way to distinguish
between <code class="docutils literal notranslate"><span class="pre">None</span></code> as a row value versus <code class="docutils literal notranslate"><span class="pre">None</span></code> as an indicator.  Use
<code class="docutils literal notranslate"><span class="pre">next(result)</span></code> to receive values individually.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all scalar values in a list.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.engine.ScalarResult.all" title="sqlalchemy.engine.ScalarResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScalarResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many objects.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first object or None if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> except that
scalar values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.ScalarResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.ScalarResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.ScalarResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ScalarResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> for usage details.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">MappingResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper for a <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> that returns dictionary values
rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> object is acquired by calling the
<a class="reference internal" href="#sqlalchemy.engine.Result.mappings" title="sqlalchemy.engine.Result.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a> method.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.FilterResult</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all scalar values in a list.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish the columns that should be returned in each row.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for the <a class="reference internal" href="#sqlalchemy.engine.MappingResult.all" title="sqlalchemy.engine.MappingResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MappingResult.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch many objects.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one object.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the first object or None if no object is present.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.keys" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return exactly one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return at most one object or raise an exception.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through sub-lists of elements of the size given.</p>
<p>Equivalent to <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> except that
mapping values, rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects,
are returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.MappingResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.MappingResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.MappingResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.MappingResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a>.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> for usage details.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">CursorResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cursor_strategy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cursor_description</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A Result that is representing state from a DBAPI cursor.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.LegacyCursorResult" title="sqlalchemy.engine.LegacyCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyCursorResult</span></code></a>
classes replace the previous <code class="xref py py-class docutils literal notranslate"><span class="pre">ResultProxy</span></code> interface.
These classes are based on the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> calling API
which provides an updated usage model and calling facade for
SQLAlchemy Core and SQLAlchemy ORM.</p>
</div>
<p>Returns database rows via the <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> class, which provides
additional API features and behaviors on top of the raw data returned by
the DBAPI.   Through the use of filters such as the <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a>
method, other kinds of objects may also be returned.</p>
<p>Within the scope of the 1.x series of SQLAlchemy, Core SQL results in
version 1.4 return an instance of <a class="reference internal" href="#sqlalchemy.engine.LegacyCursorResult" title="sqlalchemy.engine.LegacyCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyCursorResult</span></code></a>
which takes the place of the <code class="docutils literal notranslate"><span class="pre">CursorResult</span></code> class used for the 1.3 series
and previously.  This object returns rows as <a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> objects,
which maintains Python mapping (i.e. dictionary) like behaviors upon the
object itself.  Going forward, the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute should
be used for dictionary behaviors.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="tutorial.html#coretutorial-selecting"><span class="std std-ref">Selecting</span></a> - introductory material for accessing
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseCursorResult</span></code></a>, <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Result</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.all" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return all rows in a list.</p>
<p>Closes the result set after invocation.   Subsequent invocations
will return an empty list.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<p>This closes out the underlying DBAPI cursor corresponding to the
statement execution, if one is still present.  Note that the DBAPI
cursor is automatically released when the <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>
exhausts all available rows.  <a class="reference internal" href="#sqlalchemy.engine.CursorResult.close" title="sqlalchemy.engine.CursorResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a> is
generally an optional method except in the case when discarding a
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> that still has additional rows pending
for fetch.</p>
<p>After this method is called, it is no longer valid to call upon
the fetch methods, which will raise a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceClosedError</span></code></a>
on subsequent use.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#"><span class="std std-ref">Working with Engines and Connections</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.columns">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">col_expressions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.columns" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Establish the columns that should be returned in each row.</p>
<p>This method may be used to limit the columns returned as well
as to reorder them.   The given list of expressions are normally
a series of integers or string key names.   They may also be
appropriate <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects which correspond to
a given statement construct.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">statement</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>

<span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<p>Example of using the column objects from the statement itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
        <span class="n">statement</span><span class="o">.</span><span class="n">selected_columns</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
        <span class="n">statement</span><span class="o">.</span><span class="n">selected_columns</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">y</span>
<span class="p">):</span>
    <span class="c1"># ...</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.columns.params.*col_expressions"></span><strong>*col_expressions</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.columns.params.*col_expressions">¶</a> – indicates columns to be returned.  Elements
may be integer row indexes, string column names, or appropriate
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects corresponding to a select construct.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object with the modifications
given.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.fetchall">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.fetchall" title="sqlalchemy.engine.Result.fetchall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchall()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>A synonym for the <a class="reference internal" href="#sqlalchemy.engine.Result.all" title="sqlalchemy.engine.Result.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.all()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.fetchmany">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Fetch many rows.</p>
<p>When all rows are exhausted, returns an empty list.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch rows in groups, use the <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>
method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.fetchone">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">fetchone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Fetch one row.</p>
<p>When all rows are exhausted, returns None.</p>
<p>This method is provided for backwards compatibility with
SQLAlchemy 1.x.x.</p>
<p>To fetch the first row of a result only, use the
<a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> method.  To iterate through all
rows, iterate the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object if no filters are applied, or None
if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.first">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.first" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Fetch the first row or None if no row is present.</p>
<p>Closes the result set and discards remaining rows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the <a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object, or None
if no rows remain.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.freeze">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">freeze</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.freeze" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.freeze" title="sqlalchemy.engine.Result.freeze"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.freeze()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return a callable object that will produce copies of this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> when invoked.</p>
<p>The callable object returned is an instance of
<a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>.</p>
<p>This is used for result set caching.  The method must be called
on the result when it has been unconsumed, and calling the method
will consume the result fully.   When the <a class="reference internal" href="#sqlalchemy.engine.FrozenResult" title="sqlalchemy.engine.FrozenResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenResult</span></code></a>
is retrieved from a cache, it can be called any number of times where
it will produce a new <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object each time
against its stored set of rows.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_events.html#do-orm-execute-re-executing"><span class="std std-ref">Re-Executing Statements</span></a> - example usage within the
ORM to implement a result-set cache.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.inserted_primary_key">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">inserted_primary_key</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.inserted_primary_key" title="sqlalchemy.engine.BaseCursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCursorResult.inserted_primary_key</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return the primary key for the row just inserted.</p>
<p>The return value is a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object representing
a named tuple of primary key values in the order in which the
primary key columns are configured in the source
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4.8: </span>- the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>
value is now a named tuple via the <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> class,
rather than a plain tuple.</p>
</div>
<p>This accessor only applies to single row <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a>
constructs which did not explicitly specify
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.returning()</span></code></a>.    Support for multirow inserts,
while not yet available for most backends, would be accessed using
the <a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a> accessor.</p>
<p>Note that primary key columns which specify a server_default clause, or
otherwise do not qualify as “autoincrement” columns (see the notes at
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>), and were generated using the database-side
default, will appear in this list as <code class="docutils literal notranslate"><span class="pre">None</span></code> unless the backend
supports “returning” and the insert statement executed with the
“implicit returning” enabled.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() construct.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.inserted_primary_key_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">inserted_primary_key_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.inserted_primary_key_rows" title="sqlalchemy.engine.BaseCursorResult.inserted_primary_key_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCursorResult.inserted_primary_key_rows</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return the value of <a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>
as a row contained within a list; some dialects may support a
multiple row form as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As indicated below, in current SQLAlchemy versions this
accessor is only useful beyond what’s already supplied by
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> when using the
<a class="reference internal" href="../dialects/postgresql.html#postgresql-psycopg2"><span class="std std-ref">psycopg2</span></a> dialect.   Future versions hope to
generalize this feature to more dialects.</p>
</div>
<p>This accessor is added to support dialects that offer the feature
that is currently implemented by the <a class="reference internal" href="../dialects/postgresql.html#psycopg2-executemany-mode"><span class="std std-ref">Psycopg2 Fast Execution Helpers</span></a>
feature, currently <strong>only the psycopg2 dialect</strong>, which provides
for many rows to be INSERTed at once while still retaining the
behavior of being able to return server-generated primary key values.</p>
<ul class="simple">
<li><p><strong>When using the psycopg2 dialect, or other dialects that may support
“fast executemany” style inserts in upcoming releases</strong> : When
invoking an INSERT statement while passing a list of rows as the
second argument to <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>, this accessor
will then provide a list of rows, where each row contains the primary
key value for each row that was INSERTed.</p></li>
<li><p><strong>When using all other dialects / backends that don’t yet support
this feature</strong>: This accessor is only useful for <strong>single row INSERT
statements</strong>, and returns the same information as that of the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> within a
single-element list. When an INSERT statement is executed in
conjunction with a list of rows to be INSERTed, the list will contain
one row per row inserted in the statement, however it will contain
<code class="docutils literal notranslate"><span class="pre">None</span></code> for any server-generated values.</p></li>
</ul>
<p>Future releases of SQLAlchemy will further generalize the
“fast execution helper” feature of psycopg2 to suit other dialects,
thus allowing this accessor to be of more general use.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.is_insert">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">is_insert</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.is_insert" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.is_insert" title="sqlalchemy.engine.BaseCursorResult.is_insert"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCursorResult.is_insert</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>True if this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> is the result
of a executing an expression language compiled
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> construct.</p>
<p>When True, this implies that the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inserted_primary_key</span></code></a> attribute is accessible,
assuming the statement did not include
a user defined “returning” construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.keys" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys.keys</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine._WithKeys</span></code></p>
</div>
<p>Return an iterable view which yields the string keys that would
be represented by each <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>The view also can be tested for key containment using the Python
<code class="docutils literal notranslate"><span class="pre">in</span></code> operator, which will test both for the string keys represented
in the view, as well as for alternate keys such as column objects.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>a key view object is returned rather than a
plain list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.last_inserted_params">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">last_inserted_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.last_inserted_params" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.last_inserted_params" title="sqlalchemy.engine.BaseCursorResult.last_inserted_params"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCursorResult.last_inserted_params()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return the collection of inserted parameters from this
execution.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.last_updated_params">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">last_updated_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.last_updated_params" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.last_updated_params" title="sqlalchemy.engine.BaseCursorResult.last_updated_params"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCursorResult.last_updated_params()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return the collection of updated parameters from this
execution.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an update() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.lastrow_has_defaults">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">lastrow_has_defaults</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.lastrow_has_defaults" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.lastrow_has_defaults" title="sqlalchemy.engine.BaseCursorResult.lastrow_has_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCursorResult.lastrow_has_defaults()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return <code class="docutils literal notranslate"><span class="pre">lastrow_has_defaults()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.lastrowid">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">lastrowid</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.lastrowid" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.lastrowid" title="sqlalchemy.engine.BaseCursorResult.lastrowid"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCursorResult.lastrowid</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return the ‘lastrowid’ accessor on the DBAPI cursor.</p>
<p>This is a DBAPI specific method and is only functional
for those backends which support it, for statements
where it is appropriate.  It’s behavior is not
consistent across backends.</p>
<p>Usage of this method is normally unnecessary when
using insert() expression constructs; the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> attribute provides a
tuple of primary key values for a newly inserted row,
regardless of database backend.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">mappings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.mappings" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.mappings" title="sqlalchemy.engine.Result.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Apply a mappings filter to returned rows, returning an instance of
<a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a>.</p>
<p>When this filter is applied, fetching rows will return
<a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> objects instead of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a new <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> filtering object
referring to this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">others</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> with other compatible result
objects.</p>
<p>The object returned is an instance of <a class="reference internal" href="#sqlalchemy.engine.MergedResult" title="sqlalchemy.engine.MergedResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MergedResult</span></code></a>,
which will be composed of iterators from the given result
objects.</p>
<p>The new result will use the metadata from this result object.
The subsequent result objects must be against an identical
set of result / cursor metadata, otherwise the behavior is
undefined.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.one" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return exactly one row or raise an exception.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a> if the result returns no
rows, or <a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a> if multiple rows
would be returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method returns one <strong>row</strong>, e.g. tuple, by default.
To return exactly one single scalar value, that is, the first
column of the first row, use the <a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a> method,
or combine <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>, <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoResultFound" title="sqlalchemy.exc.NoResultFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoResultFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return at most one result or raise an exception.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if the result has no rows.
Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a>
if multiple rows are returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The first <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or None if no row is available.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#sqlalchemy.exc.MultipleResultsFound" title="sqlalchemy.exc.MultipleResultsFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipleResultsFound</span></code></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.first" title="sqlalchemy.engine.Result.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.first()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.partitions">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">partitions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.partitions" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Iterate through sub-lists of rows of the size given.</p>
<p>Each list will be of the size given, excluding the last list to
be yielded, which may have a small number of rows.  No empty
lists will be yielded.</p>
<p>The result object is automatically closed when the iterator
is fully consumed.</p>
<p>Note that the backend driver will usually buffer the entire result
ahead of time unless the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a> execution
option is used indicating that the driver should not pre-buffer
results, if possible.   Not all drivers support this option and
the option is silently ignored for those who do not.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.partitions.params.size"></span><strong>size</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.partitions.params.size">¶</a> – indicate the maximum number of rows to be present
in each list yielded.  If None, makes use of the value set by
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a>, if present, otherwise uses the
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> default which may be backend
specific.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>iterator of lists</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.postfetch_cols">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">postfetch_cols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.postfetch_cols" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.postfetch_cols" title="sqlalchemy.engine.BaseCursorResult.postfetch_cols"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCursorResult.postfetch_cols()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return <code class="docutils literal notranslate"><span class="pre">postfetch_cols()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() or update() construct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.prefetch_cols">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">prefetch_cols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.prefetch_cols" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.prefetch_cols" title="sqlalchemy.engine.BaseCursorResult.prefetch_cols"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCursorResult.prefetch_cols()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return <code class="docutils literal notranslate"><span class="pre">prefetch_cols()</span></code> from the underlying
<a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a>.</p>
<p>See <a class="reference internal" href="internals.html#sqlalchemy.engine.ExecutionContext" title="sqlalchemy.engine.ExecutionContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionContext</span></code></a> for details.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> if the executed
statement is not a compiled expression construct
or is not an insert() or update() construct.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.returned_defaults">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returned_defaults</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.returned_defaults" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.returned_defaults" title="sqlalchemy.engine.BaseCursorResult.returned_defaults"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCursorResult.returned_defaults</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return the values of default columns that were fetched using
the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a> feature.</p>
<p>The value is an instance of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>
if <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a> was not used or if the
backend does not support RETURNING.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.9.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.returned_defaults_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returned_defaults_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.returned_defaults_rows" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.returned_defaults_rows" title="sqlalchemy.engine.BaseCursorResult.returned_defaults_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCursorResult.returned_defaults_rows</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return a list of rows each containing the values of default
columns that were fetched using
the <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a> feature.</p>
<p>The return value is a list of <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.returns_rows">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">returns_rows</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.returns_rows" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.returns_rows" title="sqlalchemy.engine.BaseCursorResult.returns_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCursorResult.returns_rows</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>True if this <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> returns zero or more rows.</p>
<p>I.e. if it is legal to call the methods
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchone" title="sqlalchemy.engine.CursorResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a>,
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchmany" title="sqlalchemy.engine.CursorResult.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchmany()</span></code></a>
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.fetchall" title="sqlalchemy.engine.CursorResult.fetchall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchall()</span></code></a>.</p>
<p>Overall, the value of <a class="reference internal" href="#sqlalchemy.engine.CursorResult.returns_rows" title="sqlalchemy.engine.CursorResult.returns_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returns_rows</span></code></a> should
always be synonymous with whether or not the DBAPI cursor had a
<code class="docutils literal notranslate"><span class="pre">.description</span></code> attribute, indicating the presence of result columns,
noting that a cursor that returns zero rows still has a
<code class="docutils literal notranslate"><span class="pre">.description</span></code> if a row-returning statement was emitted.</p>
<p>This attribute should be True for all results that are against
SELECT statements, as well as for DML statements INSERT/UPDATE/DELETE
that use RETURNING.   For INSERT/UPDATE/DELETE statements that were
not using RETURNING, the value will usually be False, however
there are some dialect-specific exceptions to this, such as when
using the MSSQL / pyodbc dialect a SELECT is emitted inline in
order to retrieve an inserted primary key value.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.rowcount">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">rowcount</span></span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.rowcount" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.rowcount" title="sqlalchemy.engine.BaseCursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCursorResult.rowcount</span></code></a> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return the ‘rowcount’ for this result.</p>
<p>The ‘rowcount’ reports the number of rows <em>matched</em>
by the WHERE criterion of an UPDATE or DELETE statement.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notes regarding <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a>:</p>
<ul class="simple">
<li><p>This attribute returns the number of rows <em>matched</em>,
which is not necessarily the same as the number of rows
that were actually <em>modified</em> - an UPDATE statement, for example,
may have no net change on a given row if the SET values
given are the same as those present in the row already.
Such a row would be matched but not modified.
On backends that feature both styles, such as MySQL,
rowcount is configured by default to return the match
count in all cases.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a>
is <em>only</em> useful in conjunction
with an UPDATE or DELETE statement.  Contrary to what the Python
DBAPI says, it does <em>not</em> return the
number of rows available from the results of a SELECT statement
as DBAPIs cannot support this functionality when rows are
unbuffered.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a>
may not be fully implemented by
all dialects.  In particular, most DBAPIs do not support an
aggregate rowcount result from an executemany call.
The <a class="reference internal" href="#sqlalchemy.engine.CursorResult.supports_sane_rowcount" title="sqlalchemy.engine.CursorResult.supports_sane_rowcount"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.supports_sane_rowcount()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount" title="sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.supports_sane_multi_rowcount()</span></code></a> methods
will report from the dialect if each usage is known to be
supported.</p></li>
<li><p>Statements that use RETURNING may not return a correct
rowcount.</p></li>
</ul>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-update-delete-rowcount"><span class="std std-ref">Getting Affected Row Count from UPDATE, DELETE</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 1.4 / 2.0 Tutorial</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.scalar" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.scalar" title="sqlalchemy.engine.Result.scalar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Fetch the first column of the first row, and close the result set.</p>
<p>Returns None if there are no rows to fetch.</p>
<p>No validation is performed to test if additional rows remain.</p>
<p>After calling this method, the object is fully closed,
e.g. the <a class="reference internal" href="#sqlalchemy.engine.CursorResult.close" title="sqlalchemy.engine.CursorResult.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.close()</span></code></a>
method will have been called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a Python scalar value , or None if no rows remain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.scalar_one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.scalar_one" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one" title="sqlalchemy.engine.Result.scalar_one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return exactly one scalar result or raise an exception.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and then
<a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one" title="sqlalchemy.engine.Result.one"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.scalar_one_or_none">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">scalar_one_or_none</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.scalar_one_or_none" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.scalar_one_or_none" title="sqlalchemy.engine.Result.scalar_one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalar_one_or_none()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return exactly one or no scalar result.</p>
<p>This is equivalent to calling <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> and then
<a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.one_or_none" title="sqlalchemy.engine.Result.one_or_none"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.one_or_none()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.scalars" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Return a <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object which
will return single elements rather than <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select int_id from table&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span></pre></div>
</div>
<p>When results are fetched from the <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a>
filtering object, the single column-row that would be returned by the
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> is instead returned as the column’s value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.scalars.params.index"></span><strong>index</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.scalars.params.index">¶</a> – integer or row key indicating the column to be fetched
from each row, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code> indicating the first column.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object referring
to this <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">supports_sane_multi_rowcount</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.supports_sane_multi_rowcount" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.supports_sane_multi_rowcount" title="sqlalchemy.engine.BaseCursorResult.supports_sane_multi_rowcount"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCursorResult.supports_sane_multi_rowcount()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return <code class="docutils literal notranslate"><span class="pre">supports_sane_multi_rowcount</span></code> from the dialect.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> for background.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.supports_sane_rowcount">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">supports_sane_rowcount</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.supports_sane_rowcount" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult.supports_sane_rowcount" title="sqlalchemy.engine.BaseCursorResult.supports_sane_rowcount"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCursorResult.supports_sane_rowcount()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.BaseCursorResult" title="sqlalchemy.engine.BaseCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCursorResult</span></code></a></p>
</div>
<p>Return <code class="docutils literal notranslate"><span class="pre">supports_sane_rowcount</span></code> from the dialect.</p>
<p>See <a class="reference internal" href="#sqlalchemy.engine.CursorResult.rowcount" title="sqlalchemy.engine.CursorResult.rowcount"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.rowcount</span></code></a> for background.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.unique">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.unique" title="Permalink to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a></p>
</div>
<p>Apply unique filtering to the objects returned by this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>.</p>
<p>When this filter is applied with no arguments, the rows or objects
returned will filtered such that each row is returned uniquely. The
algorithm used to determine this uniqueness is by default the Python
hashing identity of the whole tuple.   In some cases a specialized
per-entity hashing scheme may be used, such as when using the ORM, a
scheme is applied which  works against the primary key identity of
returned objects.</p>
<p>The unique filter is applied <strong>after all other filters</strong>, which means
if the columns returned have been refined using a method such as the
<a class="reference internal" href="#sqlalchemy.engine.Result.columns" title="sqlalchemy.engine.Result.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.columns()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Result.scalars" title="sqlalchemy.engine.Result.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.scalars()</span></code></a>
method, the uniquing is applied to <strong>only the column or columns
returned</strong>.   This occurs regardless of the order in which these
methods have been called upon the <a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
<p>The unique filter also changes the calculus used for methods like
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchmany" title="sqlalchemy.engine.Result.fetchmany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchmany()</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.Result.partitions" title="sqlalchemy.engine.Result.partitions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.partitions()</span></code></a>.
When using <a class="reference internal" href="#sqlalchemy.engine.Result.unique" title="sqlalchemy.engine.Result.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.unique()</span></code></a>, these methods will continue
to yield the number of rows or objects requested, after uniquing
has been applied.  However, this necessarily impacts the buffering
behavior of the underlying cursor or datasource, such that multiple
underlying calls to <code class="docutils literal notranslate"><span class="pre">cursor.fetchmany()</span></code> may be necessary in order
to accumulate enough objects in order to provide a unique collection
of the requested size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.unique.params.strategy"></span><strong>strategy</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.unique.params.strategy">¶</a> – a callable that will be applied to rows or objects
being iterated, which should return an object that represents the
unique value of the row.   A Python <code class="docutils literal notranslate"><span class="pre">set()</span></code> is used to store
these identities.   If not passed, a default uniqueness strategy
is used which may have been assembled by the source of this
<a class="reference internal" href="#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.CursorResult.yield_per">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.CursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult.</span></code></a><span class="sig-name descname"><span class="pre">yield_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CursorResult.yield_per" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the row-fetching strategy to fetch num rows at a time.</p>
<p>This impacts the underlying behavior of the result when iterating over
the result object, or otherwise making use of  methods such as
<a class="reference internal" href="#sqlalchemy.engine.Result.fetchone" title="sqlalchemy.engine.Result.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.fetchone()</span></code></a> that return one row at a time.   Data
from the underlying cursor or other data source will be buffered up to
this many rows in memory, and the buffered collection will then be
yielded out one row at at time or as many rows are requested. Each time
the buffer clears, it will be refreshed to this many rows or as many
rows remain if fewer remain.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> method is generally used in
conjunction with the
<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.stream_results</span></code></a>
execution option, which will allow the database dialect in use to make
use of a server side cursor, if the DBAPI supports it.</p>
<p>Most DBAPIs do not use server side cursors by default, which means  all
rows will be fetched upfront from the database regardless of  the
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> setting.  However,
<a class="reference internal" href="#sqlalchemy.engine.Result.yield_per" title="sqlalchemy.engine.Result.yield_per"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.yield_per()</span></code></a> may still be useful in that it batches
the SQLAlchemy-side processing of the raw data from the database, and
additionally when used for ORM scenarios will batch the conversion of
database rows into  ORM entity rows.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.CursorResult.yield_per.params.num"></span><strong>num</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CursorResult.yield_per.params.num">¶</a> – number of rows to fetch each time the buffer is refilled.
If set to a value below 1, fetches all rows for the next buffer.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.LegacyCursorResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">LegacyCursorResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cursor_strategy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cursor_description</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.LegacyCursorResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Legacy version of <a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>.</p>
<p>This class includes connection “connection autoclose” behavior for use with
“connectionless” execution, as well as delivers rows using the
<a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> row implementation.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.LegacyCursorResult" title="sqlalchemy.engine.LegacyCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.LegacyCursorResult</span></code></a> (<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.LegacyCursorResult.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.LegacyCursorResult"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.LegacyCursorResult.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.LegacyCursorResult.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#sqlalchemy.engine.LegacyCursorResult" title="sqlalchemy.engine.LegacyCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyCursorResult</span></code></a>.</p>
<p>This method has the same behavior as that of
<code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlalchemy.engine.CursorResult()</span></code>, but it also may close
the underlying <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> for the case of “connectionless”
execution.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.0: </span>“connectionless” execution is deprecated and will
be removed in version 2.0.   Version 2.0 will feature the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code>
object that will no longer affect the status
of the originating connection in any case.</p>
</div>
<p>After this method is called, it is no longer valid to call upon
the fetch methods, which will raise a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceClosedError</span></code></a>
on subsequent use.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#"><span class="std std-ref">Working with Engines and Connections</span></a></p>
<p><a class="reference internal" href="#dbengine-implicit"><span class="std std-ref">Connectionless Execution, Implicit Execution</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">Row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keymap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_style</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Row" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent a single result row.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object represents a row of a database result.  It is
typically associated in the 1.x series of SQLAlchemy with the
<a class="reference internal" href="#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> object, however is also used by the ORM for
tuple-like results as of SQLAlchemy 1.4.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object seeks to act as much like a Python named
tuple as possible.   For mapping (i.e. dictionary) behavior on a row,
such as testing for containment of keys, refer to the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a>
attribute.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="tutorial.html#coretutorial-selecting"><span class="std std-ref">Selecting</span></a> - includes examples of selecting
rows from SELECT statements.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> - Compatibility interface introduced in SQLAlchemy
1.4.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>Renamed <code class="docutils literal notranslate"><span class="pre">RowProxy</span></code> to <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.  <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> is no longer a
“proxy” object in that it contains the final form of data within it,
and now acts mostly like a named tuple.  Mapping-like functionality is
moved to the <a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute, but will remain available
in SQLAlchemy 1.x series via the <a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> class that is used
by <a class="reference internal" href="#sqlalchemy.engine.LegacyCursorResult" title="sqlalchemy.engine.LegacyCursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyCursorResult</span></code></a>.
See <a class="reference internal" href="../changelog/migration_14.html#change-4710-core"><span class="std std-ref">RowProxy is no longer a “proxy”; is now called Row and behaves like an enhanced named tuple</span></a> for background
on this change.</p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseRow</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Sequence</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row._asdict">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">_asdict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Row._asdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new dict which maps field names to their corresponding
values.</p>
<p>This method is analogous to the Python named tuple <code class="docutils literal notranslate"><span class="pre">._asdict()</span></code>
method, and works by applying the <code class="docutils literal notranslate"><span class="pre">dict()</span></code> constructor to the
<a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row._fields">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">_fields</span></span><a class="headerlink" href="#sqlalchemy.engine.Row._fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple of string keys as represented by this
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>This attribute is analogous to the Python named tuple <code class="docutils literal notranslate"><span class="pre">._fields</span></code>
attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row._mapping">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">_mapping</span></span><a class="headerlink" href="#sqlalchemy.engine.Row._mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> for this <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<p>This object provides a consistent Python mapping (i.e. dictionary)
interface for the data contained within the row.   The <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
by itself behaves like a named tuple, however in the 1.4 series of
SQLAlchemy, the <a class="reference internal" href="#sqlalchemy.engine.LegacyRow" title="sqlalchemy.engine.LegacyRow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyRow</span></code></a> class is still used by Core which
continues to have mapping-like behaviors against the row object
itself.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._fields" title="sqlalchemy.engine.Row._fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._fields</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.Row.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.Row"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Row.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Row.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of keys as strings represented by this
<a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.Row.keys" title="sqlalchemy.engine.Row.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Row.keys()</span></code></a> method is considered legacy as of the 1.x series of SQLAlchemy and will be removed in 2.0. Use the namedtuple standard accessor <a class="reference internal" href="#sqlalchemy.engine.Row._fields" title="sqlalchemy.engine.Row._fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._fields</span></code></a>, or for full mapping behavior use  row._mapping.keys()  (Background on SQLAlchemy 2.0 at: <a class="reference internal" href="../changelog/migration_20.html"><span class="std std-ref">Migrating to SQLAlchemy 2.0</span></a>)</p>
</div>
<p>The keys can represent the labels of the columns returned by a core
statement or the names of the orm classes returned by an orm
execution.</p>
<p>This method is analogous to the Python dictionary <code class="docutils literal notranslate"><span class="pre">.keys()</span></code> method,
except that it returns a list, not an iterator.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._fields" title="sqlalchemy.engine.Row._fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._fields</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.RowMapping">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">RowMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keymap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_style</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RowMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> that maps column names and objects to <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> values.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> is available from a <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> via the
<a class="reference internal" href="#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> attribute, as well as from the iterable interface
provided by the <a class="reference internal" href="#sqlalchemy.engine.MappingResult" title="sqlalchemy.engine.MappingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingResult</span></code></a> object returned by the
<a class="reference internal" href="#sqlalchemy.engine.Result.mappings" title="sqlalchemy.engine.Result.mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Result.mappings()</span></code></a> method.</p>
<p><a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> supplies Python mapping (i.e. dictionary) access to
the  contents of the row.   This includes support for testing of
containment of specific keys (string column names or objects), as well
as iteration of keys, values, and items:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">if</span> <span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">_mapping</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Column &#39;a&#39;: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">row</span><span class="o">.</span><span class="n">_mapping</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Column b: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">row</span><span class="o">.</span><span class="n">_mapping</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">])</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span>The <a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> object replaces the
mapping-like access previously provided by a database result row,
which now seeks to behave mostly like a named tuple.</p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.RowMapping</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.BaseRow</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RowMapping.items">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RowMapping.</span></code></a><span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RowMapping.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a view of key/value tuples for the elements in the
underlying <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RowMapping.keys">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RowMapping.</span></code></a><span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RowMapping.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a view of ‘keys’ for string column names represented
by the underlying <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.RowMapping.values">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.RowMapping"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.RowMapping.</span></code></a><span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RowMapping.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a view of values for the values represented in the
underlying <a class="reference internal" href="#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="engines.html" title="previous chapter">Engine Configuration</a>
        Next:
        <a href="pooling.html" title="next chapter">Connection Pooling</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2021, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 4.1.2.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.4.23',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


